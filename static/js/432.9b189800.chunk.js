"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[432],{1539:(e,t,n)=>{n.d(t,{M:()=>g});var s=n(8061),a=n(9659),r=n(7536),o=n(6167),i=n(8016),l=n(1510),c=n(7878);const u=e=>{var t,n;let{error:a}=e;return null!==a&&void 0!==a&&a.failed()?(0,c.jsxs)("details",{className:"ErrorPanel",open:!0,children:[(0,c.jsx)("summary",{role:"button",className:"secondary",children:(0,c.jsx)(s.cC,{id:"Parse Error"})}),(0,c.jsx)("pre",{children:(0,c.jsx)("code",{children:null!==(t=null!==(n=null===a||void 0===a?void 0:a.message)&&void 0!==n?n:null===a||void 0===a?void 0:a.shortMessage)&&void 0!==t?t:l.eP})})]}):(0,c.jsx)(c.Fragment,{})},d=e=>{let{value:t,onChange:n,language:s,disabled:a=!1}=e;const[r,i]=(0,o.useState)(t);return(0,c.jsx)("textarea",{"data-testid":`editor-${s}`,disabled:a,value:r,onChange:e=>{var t;const s=null===(t=e.target)||void 0===t?void 0:t.value;i(s),n(s)}})},h=e=>{let{value:t,onChange:n,language:s,error:a,disabled:l=!1,highlight:u}=e;const{theme:d}=(0,o.useContext)(i.Il),h=(0,r.Ik)(),g=(0,o.useRef)(),m=(0,o.useRef)([]),p=(0,o.useRef)(void 0),f=(0,o.useCallback)((()=>("system"===d?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"===d)?"vs-dark":"vs"),[d]),x=(0,o.useCallback)((()=>{var e;m.current=((e,t,n,s)=>{if(!t||!n)return s;const a=t.getModel();if(!a)return s;const r=a.getPositionAt(n.start),o=a.getPositionAt(n.end),i=null===e||void 0===e?void 0:e.Range.fromPositions(r,o),l=[];return i&&(l.push({range:i,options:{inlineClassName:"highlight"}}),t.revealRangeInCenter(i)),t.deltaDecorations(s,l)})(h,g.current,null!==(e=p.current)&&void 0!==e?e:{start:0,end:0},m.current)}),[m,h,g,p]);(0,o.useEffect)((()=>{p.current=u,x()}),[u]);const v=(0,o.useCallback)((e=>{var t;g.current=e,null===(t=g.current)||void 0===t||t.updateOptions({fontFamily:'"JetBrains Mono", source-code-pro, Menlo, Monaco,\n      Consolas, "Roboto Mono", "Ubuntu Monospace", "Noto Mono", "Oxygen Mono",\n      "Liberation Mono", monospace, "Apple Color Emoji", "Segoe UI Emoji",\n      "Segoe UI Symbol", "Noto Color Emoji"',fontSize:16,minimap:{enabled:!1},theme:f(),scrollBeyondLastLine:!1,readOnly:l}),x()}),[f]);return(0,o.useEffect)((()=>{void 0!==g.current&&g.current.updateOptions({theme:f()})}),[g,f]),(0,o.useEffect)((()=>{void 0!==g.current&&g.current.updateOptions({readOnly:l})}),[g,l]),(0,o.useEffect)((()=>{var e,t,n,r,o;if(void 0===g.current)return;if(null===h)return;const i=g.current.getModel();if(null===i)return;if(void 0===a||a.succeeded())return void h.editor.setModelMarkers(i,s,[]);const{line:l,column:c,message:u}=null!==(e=null===(t=/Line (?<line>\d+), col (?<column>\d+): (?<message>.*)/.exec(null!==(n=a.shortMessage)&&void 0!==n?n:""))||void 0===t?void 0:t.groups)&&void 0!==e?e:{line:1,column:1,message:"could not parse error"},d=Number(l),m=d,p=Number(c);let f=p+(null!==(r=null===(o=i.getLineContent(d).substring(p-1).match(/([^\s]+)/))||void 0===o?void 0:o[0].length)&&void 0!==r?r:1);f<=p&&(f=p+1),h.editor.setModelMarkers(i,s,[{message:u,startColumn:p,startLineNumber:d,endColumn:f,endLineNumber:m,severity:8}])}),[a,g,h,s]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r.ZP,{value:t,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n(e)},language:s,onMount:v})})},g=e=>{let{className:t="",style:n={},disabled:s=!1,value:r,onChange:l,grammar:g,language:m,highlight:p}=e;const[f,x]=(0,o.useState)(),{monaco:v}=(0,o.useContext)(i.Il),b=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=g.match(e);x(t.failed()?t:void 0)}),[x,g]);(0,o.useEffect)((()=>b(r)),[b,r]);const j=(0,o.useMemo)((()=>(0,a.D)(b,500)),[b]),y=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l(e),j(e)}),[j,l]);return(0,c.jsx)("div",{className:`Editor ${t}`,style:n,children:v.canUse&&v.wants?(0,c.jsx)(h,{value:r,onChange:y,language:m,error:f,disabled:s,highlight:p}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{value:r,onChange:y,language:m,disabled:s}),(0,c.jsx)(u,{error:f})]})})}},1124:(e,t,n)=>{n.d(t,{G:()=>r,s:()=>a});var s=n(7878);const a=e=>{var t;return(0,s.jsxs)("article",{className:["panel",null!==(t=e.className)&&void 0!==t?t:""].join(" "),children:[e.header&&(0,s.jsx)("header",{children:e.header}),(0,s.jsx)("main",{children:e.children}),e.footer&&(0,s.jsx)("footer",{children:e.footer})]})},r=e=>{var t;return(0,s.jsxs)("details",{className:null!==(t=e.className)&&void 0!==t?t:"",open:e.open,style:e.style,children:[(0,s.jsx)("summary",{children:(0,s.jsx)("div",{className:"flex row align-baseline",children:e.summary})}),e.children]})}},2277:(e,t,n)=>{n.d(t,{N:()=>i});var s=n(7878),a=n(6167),r=n(6830);const o={Enter:128,Backspace:129,ArrowLeft:130,ArrowUp:131,ArrowRight:132,ArrowDown:133,Home:134,End:135,PageUp:136,PageDown:137,Insert:138,Delete:139,Escape:140,F1:141,F2:142,F3:143,F4:144,F5:145,F6:146,F7:147,F8:148,F9:149,F10:150,F11:151,F12:152};const i=e=>{let{keyboard:t,update:n}=e;const[i,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(t.getKey());let g=0;const m=e=>{if(!i)return;u(e.key);const t=function(e){const t=o[e.key];if(void 0!==t)return t;if(1===e.key.length){const t=e.key.charCodeAt(0);if(t>=32&&t<=126)return t}return 0}(e);t!==g&&(f(t),n?.())},p=e=>{i&&(g=0,t.clearKey(),n?.(),h(t.getKey()),u(""))},f=e=>{0!==e&&(t.setKey(e),h(t.getKey()),g=e)};return(0,a.useEffect)((()=>(window.addEventListener("keydown",m),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",p)}))),(0,s.jsxs)("div",{className:"flex row align-baseline",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(r.y,{name:"Keyboard",bits:d})}),(0,s.jsx)("div",{className:"flex-1",children:`Character: ${c}`}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("button",{onClick:()=>{l(!i)},children:[i?"Disable   ":"Enable   ","\u2328\ufe0f"]})})]})}},3052:(e,t,n)=>{n.d(t,{zp:()=>y,ZP:()=>C});var s=n(7878),a=n(8039),r=n(6167),o=n(5838),i=n(7693),l=n(326),c=n(2724),u=n(8285),d=n(7559);const h=0,g=1,m=e=>{const[t,n]=(0,r.useState)(e.mode??h),[a,o]=(0,d.i)(e.value),i=()=>(0,s.jsx)("span",{style:{cursor:"text",...(0,u.b)("full","inline")},onClick:()=>{n(g)},children:a}),l=(0,r.useCallback)((e=>e?.select()),[]),c=(0,r.useCallback)((t=>{n(h),o(t.value??""),e.onChange(t.value??"")}),[e,n,o]),m=()=>(0,s.jsx)("span",{style:{display:"block",position:"relative"},children:(0,s.jsx)("input",{ref:l,style:{zIndex:"10",position:"absolute",left:"0",marginTop:"-0.375rem"},onFocus:e.onFocus,onBlur:e=>{let{target:t}=e;return c(t)},onKeyPress:e=>{let{key:t,target:n}=e;"Enter"===t&&c(n)},type:"text",defaultValue:a})});return(()=>{switch(t){case g:return m();case h:return i();default:return(0,s.jsx)("span",{})}})()};function p(e,t,n){const{totalHeight:s,toleranceHeight:a,bufferedItems:r,settings:{itemHeight:o,minIndex:i,maxIndex:l}}=t,c=i+Math.floor((e-a)/o),u=function(e,t,n,s,a){const r=Math.max(0,e,n);return[...a(r,Math.min(t,n+s-1)-r)]}(i,l,c,r,n),d=Math.max((c-i)*o,0);return{scrollTop:e,topPaddingHeight:d,bottomPaddingHeight:Math.max(s-(d+u.length*o),0),data:u}}const f=e=>{const t=(0,r.useRef)(null),{settings:n,startState:a,reducer:o}=(0,r.useMemo)((()=>{const t=function(e){const{minIndex:t=0,maxIndex:n=Number.MAX_SAFE_INTEGER,startIndex:s=0,itemHeight:a=20,count:r=Math.max(n-t,1),tolerance:o=r}=e;return{minIndex:t,maxIndex:n,startIndex:s,itemHeight:a,count:r,tolerance:o}}(e.settings??{}),n=function(e,t){const{minIndex:n,maxIndex:s,startIndex:a,itemHeight:r,count:o,tolerance:i}=e,l=o+2*i,c=Math.max(0,a-i-n),u=o*r,d=Math.max(s-n,1)*r,h=i*r,g=c*r,m={scrollTop:0,settings:e,viewportHeight:u,totalHeight:d,toleranceHeight:h,bufferedItems:l,topPaddingHeight:g,bottomPaddingHeight:d-(g+(u+2*h)),data:[]};return{...m,...p(g+h,m,t)}}(t,e.get),s=(a=e.get,(e,t)=>({...e,...p(t,e,a)}));var a;return{settings:t,reducer:s,startState:n}}),[e.settings,e.get]),[i,l]=(0,r.useReducer)(o,a);(0,r.useEffect)((()=>{null!==t.current&&l(t.current.scrollTop)}),[n,e.row]);const c=(0,r.useCallback)((e=>{e&&(e.scrollTop=t.current?t.current.scrollTop:n.startIndex*n.itemHeight),t.current=e}),[t,n.startIndex,n.itemHeight]),u=i.data.map((t=>(0,s.jsx)("div",{style:{height:`${n.itemHeight}px`},children:e.row(t)},e.rowKey(t))));return(0,s.jsxs)("div",{ref:c,style:{height:`${i.viewportHeight}px`,overflowY:"scroll",overflowAnchor:"none"},className:e.className??"",onScroll:e=>l(e.target.scrollTop),children:[(0,s.jsx)("div",{style:{height:`${i.topPaddingHeight}px`}}),u,(0,s.jsx)("div",{style:{height:`${i.bottomPaddingHeight}px`}})]})};var x=n(7030),v=n(8698);const b=e=>{let{memory:t,jmp:n={value:0},highlight:a=-1,editable:o=!1,justifyLeft:i=!1,format:c=l.E_,onChange:u=(()=>{}),onFocus:d=(()=>{})}=e;const h=(0,r.useMemo)((()=>({count:Math.min(t.size,25),maxIndex:t.size,itemHeight:34,startIndex:n.value})),[t.size,n]),g=(0,r.useCallback)(((e,n)=>t.range(e,e+n).map(((t,n)=>[n+e,t]))),[t]),m=(0,r.useCallback)((e=>{let[n,r]=e;return(0,s.jsx)(j,{index:n,value:c(r),size:t.size,editable:o,justifyLeft:i,highlight:n===a,onChange:u,onFocus:d})}),[c,o,a,u]);return(0,s.jsx)(f,{settings:h,get:g,row:m,rowKey:e=>{let[t]=e;return t}})},j=e=>{let{index:t,value:n,size:r,highlight:o=!1,editable:i=!1,justifyLeft:c=!1,onChange:u=(()=>{}),onFocus:d=(()=>{})}=e;return(0,s.jsxs)("div",{style:{display:"flex",height:"100%"},children:[(0,s.jsx)("code",{style:{...(0,a.eP)("none"),...o?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:r?(0,l.E_)(t).padStart(Math.ceil(Math.log10(r))," "):(0,l.E_)(t)}),(0,s.jsx)("code",{style:{flex:"1",textAlign:c?"left":"right",...(0,a.eP)("none"),...o?{background:"var(--mark-background-color)"}:{}},children:i?(0,s.jsx)(m,{value:n,highlight:o,onChange:e=>u(t,e,Number(n)),onFocus:()=>d(t)}):(0,s.jsx)("span",{children:n})})]})},y=e=>{let{name:t="Memory",highlight:n=-1,editable:a=!0,memory:u,format:h="dec",onUpload:g}=e;const[m,p]=(0,r.useState)(h),[f,j]=(0,r.useState)(""),[y,C]=(0,r.useState)({value:0}),[k,w]=(0,d.i)(n),[N,S]=(0,r.useState)(0),F=()=>{const e=!isNaN(parseInt(f))&&isFinite(parseInt(f))?Number(f):0;w(e),C({value:e})},M=(0,r.useRef)(null),E=(0,r.useCallback)((()=>{M.current?.click()}),[M]),{setStatus:I}=(0,r.useContext)(v.r),H=(0,r.useCallback)((async e=>{if(!e.target.files?.length)return void I("No file selected");const t=e.target.files[0];g?.(t.name);const n=await t.text(),s=t.name.endsWith("hack")?c.$W:t.name.endsWith("asm")?c.eC:c.uC,a=await s(n);u.loadBytes(a),e.target.value="",F()}),[]),L=()=>{S(N+1)};return(0,x._W)((()=>{j(""),C({value:0})})),(0,s.jsxs)("article",{className:`panel memory ${t}`,children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{children:t}),(0,s.jsxs)("fieldset",{role:"group",children:[(0,s.jsx)("input",{type:"file",style:{display:"none"},ref:M,onChange:H}),(0,s.jsx)("button",{onClick:E,className:"flex-0","data-tooltip":"Load file","data-placement":"bottom",children:"\ud83d\udcc2"}),(0,s.jsx)("button",{onClick:()=>{u.reset(),L()},className:"flex-0","data-tooltip":"Clear","data-placement":"bottom",children:"\ud83c\udd91"}),(0,s.jsx)("input",{style:{width:"4em",height:"100%"},placeholder:"Addr",value:f,onKeyDown:e=>{let{key:t}=e;return"Enter"===t&&F()},onChange:e=>{let{target:{value:t}}=e;return j(t)}}),(0,s.jsx)("button",{onClick:F,className:"flex-0","data-tooltip":"Scroll to address","data-placement":"bottom",children:"\u2935\ufe0f"}),(0,s.jsx)("select",{value:m,onChange:e=>p(e.target.value),children:o.I2.map((e=>(0,s.jsx)("option",{children:e},e)))})]})]}),(0,s.jsx)(b,{jmp:y,memory:u,highlight:k,editable:a,justifyLeft:"asm"==m,format:e=>function(e,t){switch(e){case"bin":return(0,l.Ly)(t);case"hex":return(0,l.$v)(t);case"asm":return(0,i.a)(t);default:return(0,l.E_)(t)}}(m,e),onChange:(e,t)=>{u.update(e,t,m??"dec"),L()},onFocus:e=>w(e)},N)]})},C=y},6830:(e,t,n)=>{n.d(t,{y:()=>r});var s=n(7878),a=n(326);const r=e=>{let{name:t,bits:n}=e;return(0,s.jsxs)("div",{children:[t,": ",(0,a.E_)(n)]})}},9613:(e,t,n)=>{n.d(t,{l:()=>c});var s=n(7878),a=n(5541),r=n(6167),o=n(7030);const i="white";function l(e,t,n,s){const a=4*(512*n+t),r=s===i?255:0;e[a]=r,e[a+1]=r,e[a+2]=r,e[a+3]=255}const c=e=>{let{memory:t}=e;const n=(0,r.useRef)(),c=(0,r.useCallback)((()=>{const e=n.current?.getContext("2d")??void 0;e&&function(e,t){const n=(0,a.kP)(e.getImageData(0,0,512,256),"Failed to create Context2d");for(let a=0;a<512;a++)for(let e=0;e<256;e++){const o=(s=a,r=e,0===(t.get(32*r+(s/16|0))&1<<s%16)?i:"black");l(n.data,a,e,o)}var s,r;e.putImageData(n,0,0)}(e,t)}),[t]),u=(0,r.useCallback)((e=>{n.current=e??void 0,c()}),[n,c]);return(0,o.RC)(c),(0,o._W)((()=>{n.current?.getContext("2d")?.clearRect(0,0,n.current.width,n.current.height)})),(0,s.jsxs)("article",{className:"panel",children:[(0,s.jsx)("header",{children:"Screen"}),(0,s.jsx)("main",{style:{backgroundColor:"var(--code-background-color)"},children:(0,s.jsx)("figure",{style:{width:"100%",maxWidth:"512px",boxSizing:"content-box",marginInline:"auto",margin:"auto",borderTop:"2px solid gray",borderLeft:"2px solid gray",borderBottom:"2px solid lightgray",borderRight:"2px solid lightgray"},children:(0,s.jsx)("canvas",{ref:u,width:512,height:256})})})]})}},7030:(e,t,n)=>{n.d(t,{RC:()=>i,_W:()=>l,uY:()=>u});var s=n(7878),a=n(6167),r=n(4408),o=n(6531);function i(e){(0,a.useEffect)((()=>{const t=o.S.get().frame$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function l(e){(0,a.useEffect)((()=>{const t=o.S.get().reset$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function c(){return(0,r.j)(o.S.get())}const u=()=>{const e=function(){const[e,t]=(0,a.useState)(c());return(0,a.useEffect)((()=>{const e=o.S.get().$.subscribe((()=>{t(c())}));return()=>e.unsubscribe()}),[]),e}();return(0,s.jsx)("span",{style:{whiteSpace:"nowrap"},children:e})}},7559:(e,t,n)=>{n.d(t,{C:()=>r,i:()=>o});var s=n(1408),a=n(6167);function r(e,t){return(0,a.useReducer)(((t,n)=>(0,s.ZP)(t,(t=>{e[n.action](t,n.payload)}))),t)}function o(e){const[t,n]=(0,a.useState)(e);return(0,a.useEffect)((()=>{n(e)}),[e]),[t,n]}},258:(e,t,n)=>{n.d(t,{D:()=>o});var s=n(7878),a=n(7559),r=n(6167);const o=e=>{const t=function(e){const t=(0,r.useRef)((()=>{})),{initialState:n,reducers:s,actions:o}=(0,r.useMemo)((()=>((e,t)=>{const n={running:e.running,speed:e.speed,steps:e.steps},s=e.finishFrame.bind(e);return e.finishFrame=function(){s(),t.current({action:"update"})},{initialState:n,reducers:{update(t){t.running=e.running,t.speed=e.speed,t.steps=e.steps},setSteps(t,n){t.steps=n,e.steps=n},setSpeed(t,n){t.speed=n,e.speed=n}},actions:{frame(){e.frame()},start(){e.start(),t.current({action:"update"})},stop(){e.stop(),t.current({action:"update"})},reset(){e.reset(),t.current({action:"update"})}}}})(e,t)),[e,t]),[i,l]=(0,a.C)(s,n);return t.current=l,{state:i,dispatch:t.current,actions:o}}(e.runner);return(0,s.jsxs)("fieldset",{role:"group",children:[(0,s.jsx)("button",{className:"flex-0",onClick:()=>t.actions.frame(),"data-tooltip":"Step","data-placement":"bottom",children:"\u27a1\ufe0f"}),(0,s.jsx)("button",{className:"flex-0",onClick:()=>t.state.running?t.actions.stop():t.actions.start(),"data-tooltip":t.state.running?"Pause":"Run","data-placement":"bottom",children:t.state.running?"\u23f8":"\ufe0f\u23e9"}),(0,s.jsx)("button",{className:"flex-0",onClick:()=>t.actions.reset(),"data-tooltip":"Reset","data-placement":"bottom",children:"\u23ee"}),(0,s.jsx)("select",{className:"flex-1",name:"speed",value:t.state.speed,onChange:e=>{t.dispatch({action:"setSpeed",payload:Number(e.target?.value??t.state.speed)})},disabled:t.state.running,children:[[1e3,"Slow"],[500,"Fast"],[16,"Faster"]].map((e=>{let[t,n]=e;return(0,s.jsx)("option",{value:t,children:n},t)}))}),(0,s.jsx)("select",{className:"flex-1",name:"steps",value:t.state.steps,onChange:e=>{t.dispatch({action:"setSteps",payload:Number(e.target?.value??t.state.steps)})},disabled:t.state.running,children:[[1,"1 Step"],[500,"500"],[1e3,"1000"],[2e3,"2000"],[8e3,"8000"],...16===t.state.speed?[[16666,"1MHz"],[499980,"30MHz"]]:[]].map((e=>{let[t,n]=e;return(0,s.jsx)("option",{value:t,children:n},t)}))}),e.children]})}},8923:(e,t,n)=>{n.d(t,{B:()=>a});const s=n(6531).S.get();class a{frame(){this.tick(),this.finishFrame()}finishFrame(){s.frame()}steps=1;speed=1e3;get running(){return this.#e}#e=!1;#t=0;#n=0;#s=async()=>{if(!this.#e)return;const e=Date.now(),t=e-this.#n;if(this.#n=e,this.#t+=t,this.#t>this.speed){let e=!1,t=this.steps;const n=`Timing ${t} steps`;for(console.time(n);!e&&t--;)e=this.tick();console.timeEnd(n),this.finishFrame(),e&&this.stop(),this.#t-=this.speed}requestAnimationFrame(this.#s)};start(){this.#e=!0,this.#n=Date.now()-this.speed,this.#s(),this.toggle()}stop(){this.#e=!1,this.toggle()}}}}]);
//# sourceMappingURL=432.9b189800.chunk.js.map
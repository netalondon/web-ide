"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[2],{5002:function(e,r,t){t.r(r),t.d(r,{default:function(){return D}});var n=t(1092),a=t(189),s=t(9422),u=t(649),i=t(1026),c=t(7791),o=t(8061),p=t(8698),f=t(8582),l=t(7662),d=t(4625),m=t(8090),h=t(9647),x=t(691),Z=t(3389),v=function(e){var r=m.Gq.parse(e.hdl),t=h.qH.parse(e.tst);return(0,a.Z)((0,a.Z)({},e),{},{maybeParsedHDL:r,maybeParsedTST:t})},b=function(e,r){var t=function(e){return function(){var r=(0,c.Z)((0,n.Z)().mark((function r(t){var s,u,i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,d.dZ)(t.maybeChip)){r.next=2;break}return r.abrupt("return",(0,a.Z)((0,a.Z)({},t),{},{pass:!1,out:(0,d.UG)(t.maybeChip).message}));case 2:if(!(0,d.dZ)(t.maybeTest)){r.next=4;break}return r.abrupt("return",(0,a.Z)((0,a.Z)({},t),{},{pass:!1,out:(0,d.UG)(t.maybeTest).message}));case 4:return s=(0,d.Ok)(t.maybeTest).with((0,d.Ok)(t.maybeChip)).setFileSystem(e),r.next=7,s.run();case 7:return u=s.log(),i=u.trim()===t.cmp.trim(),r.abrupt("return",(0,a.Z)((0,a.Z)({},t),{},{out:u,pass:i}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e),s=function(e){return function(){var r=(0,c.Z)((0,n.Z)().mark((function r(t){var s,u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,d.IY)(t.maybeParsedHDL)){r.next=6;break}return r.next=3,(0,x.J_)((0,d.Ok)(t.maybeParsedHDL),e);case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0=(0,d.UG)(new Error("HDL Was not parsed"));case 7:return s=r.t0,u=(0,d.IY)(t.maybeParsedTST)?(0,d.Ok)(Z.l1.from((0,d.Ok)(t.maybeParsedTST))):(0,d.UG)(new Error("TST Was not parsed")),r.abrupt("return",(0,a.Z)((0,a.Z)({},t),{},{maybeChip:s,maybeTest:u}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e);return function(){var e=(0,c.Z)((0,n.Z)().mark((function e(u){var o,p,f,l,d,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=s,e.next=4,v(u);case 4:return e.t2=e.sent,e.next=7,(0,e.t1)(e.t2);case 7:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t3));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===r||void 0===r?void 0:r.hdl(u));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,Promise.all([o(),p()]);case 4:return f=e.sent,l=(0,i.Z)(f,2),d=l[0],m=l[1],e.abrupt("return",(0,a.Z)((0,a.Z)({},d),{},{shadow:m}));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};function w(e,r,t,n){return y.apply(this,arguments)}function y(){return y=(0,c.Z)((0,n.Z)().mark((function e(r,t,a,s){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=b(a,s),e.abrupt("return",Promise.all(r.map(t).map(function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,r;case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var k=t(6167),j=t(7878);function g(e){var r=e.name,t=e.ext;return void 0!==l.Assignments[r]&&".hdl"===t}var T=function(e){return(0,j.jsxs)("details",{children:[(0,j.jsxs)("summary",{children:[e.name," ",e.pass?(0,j.jsx)(o.cC,{id:"Passed"}):(0,j.jsx)(o.cC,{id:"Failed"})]}),(0,j.jsxs)("div",{className:"flex row",children:[(0,j.jsx)("pre",{children:(0,j.jsx)("code",{children:e.hdl})}),(0,j.jsx)("pre",{children:(0,j.jsx)("code",{children:e.tst})})]}),(0,j.jsx)(f.M,{cmp:e.cmp,out:e.out})]})};function P(e){return C.apply(this,arguments)}function C(){return C=(0,c.Z)((0,n.Z)().mark((function e(r){var t,s,u,i,c,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=l.Assignments[r.name],e.next=3,null===(s=r.file)||void 0===s?void 0:s.text();case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2="";case 12:return i=e.t2,c=u["".concat(r.name,".tst")],o=u["".concat(r.name,".cmp")],e.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{hdl:i,tst:c,cmp:o}));case 16:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var D=function(){var e=(0,k.useState)([]),r=(0,i.Z)(e,2),t=r[0],o=r[1],f=(0,p.Q)().fs,l=(0,k.useCallback)(function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var t,i,p,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.target,e.next=3,Promise.all((0,u.Z)(null!==(t=i.files)&&void 0!==t?t:[]).filter((function(e){return e.name.endsWith(".hdl")})).map((function(e){var r,t,n,a,u=null!==(r=null===(t=e.name.match((0,s.Z)(/^((.*)(\.[^.]*))?$/,{base:1,name:2,ext:3})))||void 0===t?void 0:t.groups)&&void 0!==r?r:{},i=u.name,c=u.base;return{name:i,base:c,ext:u.ext,dir:null!==(n="/"+(null===(a=e.webkitRelativePath)||void 0===a?void 0:a.replace(c,"")))&&void 0!==n?n:"",root:"/",file:e}})).filter(g).map(function(){var e=(0,c.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.file.text();case 2:return t=e.sent,e.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{hdl:t}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 3:return p=e.sent,e.next=6,w(p,P,f);case 6:l=e.sent,f.pushd("/samples"),o(l),f.popd();case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[o,f]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h1",{children:"NAND2Tetris Web IDE"}),(0,j.jsx)("form",{children:(0,j.jsxs)("fieldset",{children:[(0,j.jsx)("legend",{children:"Files for grading:"}),(0,j.jsx)("input",{type:"file",multiple:!0,directory:"",webkitdirectory:"",onChange:l})]})}),(0,j.jsx)("figure",{children:t.length>0?t.map((function(e,r){return(0,j.jsx)(T,(0,a.Z)({},e),e.name)})):(0,j.jsx)(j.Fragment,{})})]})}}}]);
//# sourceMappingURL=2.021e2975.chunk.js.map
{"version":3,"file":"static/js/506.35dc48bd.chunk.js","mappings":"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","sources":["pages/util.tsx","../../node_modules/@babel/runtime/helpers/esm/wrapRegExp.js","../../simulator/src/cpu/alu.ts","../../simulator/src/util/asm.ts","../../simulator/src/util/twos.ts"],"sourcesContent":["import { ChangeEvent, useCallback, useState } from \"react\";\nimport { asm, op } from \"@nand2tetris/simulator/util/asm.js\";\nimport {\n  bin,\n  dec,\n  hex,\n  int10,\n  int16,\n  int2,\n  uns,\n} from \"@nand2tetris/simulator/util/twos.js\";\n\nexport const Util = () => {\n  const [value, setValue] = useState(0);\n  const [asmValue, setAsmValue] = useState(\"@0\");\n\n  const binValue = useCallback(() => bin(value), [value]);\n  const decValue = useCallback(() => dec(value), [value]);\n  const unsValue = useCallback(() => uns(value), [value]);\n  const hexValue = useCallback(() => hex(value), [value]);\n  // const asmValue = useCallback(() => asm(value), [value]);\n\n  const setBin = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const ivalue = int2(value);\n      setValue(ivalue);\n      setAsmValue(asm(ivalue));\n    },\n    [setValue, setAsmValue]\n  );\n  const setInt = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const ivalue = int10(value);\n      setValue(ivalue);\n      setAsmValue(asm(ivalue));\n    },\n    [setValue, setAsmValue]\n  );\n  const setUns = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const ivalue = int10(value);\n      setValue(ivalue);\n      setAsmValue(asm(ivalue));\n    },\n    [setValue, setAsmValue]\n  );\n  const setHex = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      const ivalue = int16(value);\n      setValue(ivalue);\n      setAsmValue(asm(ivalue));\n    },\n    [setValue, setAsmValue]\n  );\n  const setAsm = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n      setAsmValue(value);\n      setValue(op(value));\n    },\n    [setValue, setAsmValue]\n  );\n\n  return (\n    <form>\n      <div className=\"grid\">\n        <label>\n          Binary <input type=\"text\" value={binValue()} onChange={setBin} />\n        </label>\n        <label>\n          Decimal <input type=\"text\" value={decValue()} onChange={setInt} />\n        </label>\n        <label>\n          Unsigned\n          <input type=\"text\" value={unsValue()} onChange={setUns} />\n        </label>\n        <label>\n          Hex <input type=\"text\" value={hexValue()} onChange={setHex} />\n        </label>\n        <label>\n          HACK ASM\n          <input type=\"text\" value={asmValue} onChange={setAsm} />\n        </label>\n      </div>\n    </form>\n  );\n};\n\nexport default Util;\n","import _typeof from \"./typeof.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport inherits from \"./inherits.js\";\nexport default function _wrapRegExp() {\n  _wrapRegExp = function _wrapRegExp(re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n  var _super = RegExp.prototype,\n    _groups = new WeakMap();\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n    return _groups.set(_this, groups || _groups.get(re)), setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n    return Object.keys(g).reduce(function (groups, name) {\n      var i = g[name];\n      if (\"number\" == typeof i) groups[name] = result[i];else {\n        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length;) k++;\n        groups[name] = result[i[k]];\n      }\n      return groups;\n    }, Object.create(null));\n  }\n  return inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n    if (result) {\n      result.groups = buildGroups(result, this);\n      var indices = result.indices;\n      indices && (indices.groups = buildGroups(indices, this));\n    }\n    return result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        var group = groups[name];\n        return \"$\" + (Array.isArray(group) ? group.join(\"$\") : group);\n      }));\n    }\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != _typeof(args[args.length - 1]) && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}","export type COMMANDS_ASM =\n  | \"0\"\n  | \"1\"\n  | \"-1\"\n  | \"D\"\n  | \"A\"\n  | \"M\"\n  | \"!D\"\n  | \"!A\"\n  | \"-D\"\n  | \"-A\"\n  | \"D+1\"\n  | \"A+1\"\n  | \"D-1\"\n  | \"A-1\"\n  | \"D+A\"\n  | \"D-A\"\n  | \"D-M\"\n  | \"A-D\"\n  | \"D&A\"\n  | \"D&M\"\n  | \"D|A\"\n  | \"D|M\";\n\nexport type COMMANDS_OP =\n  | 0b101010\n  | 0b111111\n  | 0b111010\n  | 0b001100\n  | 0b110000\n  | 0b110000\n  | 0b001101\n  | 0b110001\n  | 0b001111\n  | 0b110011\n  | 0b011111\n  | 0b110111\n  | 0b001110\n  | 0b110010\n  | 0b000010\n  | 0b010011\n  | 0b010011\n  | 0b000111\n  | 0b000000\n  | 0b000000\n  | 0b010101\n  | 0b010101;\n\n//Usefull for the visualization of the ALU\nexport type COMMANDS_ALU =\n  | \"0\"\n  | \"1\"\n  | \"-1\"\n  | \"x\"\n  | \"y\"\n  | \"!x\"\n  | \"!y\"\n  | \"-x\"\n  | \"-y\"\n  | \"x+1\"\n  | \"y+1\"\n  | \"x-1\"\n  | \"y-1\"\n  | \"x+y\"\n  | \"x-y\"\n  | \"y-x\"\n  | \"x&y\"\n  | \"x|y\";\n\nexport const COMMANDS_ALU: {\n  op: Record<COMMANDS_OP, COMMANDS_ALU>;\n} = {\n  op: {\n    0x2a: \"0\",\n    0x3f: \"1\",\n    0x3a: \"-1\",\n    0x0c: \"x\",\n    0x30: \"y\",\n    0x0d: \"!x\",\n    0x31: \"!y\",\n    0x0f: \"-x\",\n    0x33: \"-y\",\n    0x1f: \"x+1\",\n    0x37: \"y+1\",\n    0x0e: \"x-1\",\n    0x32: \"y-1\",\n    0x02: \"x+y\",\n    0x13: \"x-y\",\n    0x07: \"y-x\",\n    0x00: \"x&y\",\n    0x15: \"x|y\",\n  },\n};\n\nexport const COMMANDS: {\n  asm: Record<COMMANDS_ASM, COMMANDS_OP>;\n  op: Record<COMMANDS_OP, COMMANDS_ASM>;\n} = {\n  asm: {\n    \"0\": 0b101010, // 42 0x2A\n    \"1\": 0b111111, // 63 0x3F\n    \"-1\": 0b111010, // 58 0x3A\n    D: 0b001100, // 12 0x0C\n    A: 0b110000, // 48 0x30\n    M: 0b110000, // 48 0x30\n    \"!D\": 0b001101, // 13 0x0D\n    \"!A\": 0b110001, // 49 0x31\n    \"-D\": 0b001111, // 15 0x0F\n    \"-A\": 0b110011, // 51 0x33\n    \"D+1\": 0b011111, // 31 0x1F\n    \"A+1\": 0b110111, // 55 0x37\n    \"D-1\": 0b001110, // 14 0x0E\n    \"A-1\": 0b110010, // 50 0x32\n    \"D+A\": 0b000010, //  2 0x02\n    \"D-A\": 0b010011, // 19 0x13\n    \"D-M\": 0b010011, // 19 0x13\n    \"A-D\": 0b000111, //  7 0x07\n    \"D&A\": 0b000000, //  0 0x00\n    \"D&M\": 0b000000, //  0 0x00\n    \"D|A\": 0b010101, // 21 0x15\n    \"D|M\": 0b010101, // 21 0x15\n  },\n  op: {\n    0x2a: \"0\",\n    0x3f: \"1\",\n    0x3a: \"-1\",\n    0x0c: \"D\",\n    0x30: \"A\",\n    0x0d: \"!D\",\n    0x31: \"!A\",\n    0x0f: \"-D\",\n    0x33: \"-A\",\n    0x1f: \"D+1\",\n    0x37: \"A+1\",\n    0x0e: \"D-1\",\n    0x32: \"A-1\",\n    0x02: \"D+A\",\n    0x13: \"D-A\",\n    0x07: \"A-D\",\n    0x00: \"D&A\",\n    0x15: \"D|A\",\n  },\n};\n\nexport type ASSIGN_ASM = \"\" | \"M\" | \"D\" | \"MD\" | \"A\" | \"AM\" | \"AD\" | \"AMD\";\nexport type ASSIGN_OP = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\n\nexport const ASSIGN: {\n  asm: Record<ASSIGN_ASM, ASSIGN_OP>;\n  op: Record<ASSIGN_OP, ASSIGN_ASM>;\n} = {\n  asm: {\n    \"\": 0x0,\n    M: 0b001,\n    D: 0b010,\n    MD: 0b011,\n    A: 0b100,\n    AM: 0b101,\n    AD: 0b110,\n    AMD: 0b111,\n  },\n  op: {\n    0x0: \"\",\n    0x1: \"M\",\n    0x2: \"D\",\n    0x3: \"MD\",\n    0x4: \"A\",\n    0x5: \"AM\",\n    0x6: \"AD\",\n    0x7: \"AMD\",\n  },\n};\n\nexport type JUMP_ASM =\n  | \"\"\n  | \"JGT\"\n  | \"JEQ\"\n  | \"JGE\"\n  | \"JLT\"\n  | \"JNE\"\n  | \"JLE\"\n  | \"JMP\";\nexport type JUMP_OP = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\nexport const JUMP: {\n  asm: Record<JUMP_ASM, JUMP_OP>;\n  op: Record<JUMP_OP, JUMP_ASM>;\n} = {\n  asm: {\n    \"\": 0b0,\n    JGT: 0b001,\n    JEQ: 0b010,\n    JGE: 0b011,\n    JLT: 0b100,\n    JNE: 0b101,\n    JLE: 0b110,\n    JMP: 0b111,\n  },\n  op: {\n    0x0: \"\",\n    0x1: \"JGT\",\n    0x2: \"JEQ\",\n    0x3: \"JGE\",\n    0x4: \"JLT\",\n    0x5: \"JNE\",\n    0x6: \"JLE\",\n    0x7: \"JMP\",\n  },\n};\n\nexport const Flags = {\n  0x01: \"Positive\",\n  0x00: \"Zero\",\n  0x0f: \"Negative\",\n  Positive: 0x01,\n  Zero: 0x00,\n  Negative: 0x0f,\n};\n\nexport function alu(op: number, d: number, a: number): [number, number] {\n  let o = 0;\n  switch (op) {\n    case 0x2a:\n      o = 0;\n      break;\n    case 0x3f:\n      o = 1;\n      break;\n    case 0x3a:\n      o = -1;\n      break;\n    case 0x0c:\n      o = d;\n      break;\n    case 0x30:\n      o = a;\n      break;\n    case 0x0d:\n      o = ~d;\n      break;\n    case 0x31:\n      o = ~a;\n      break;\n    case 0x0f:\n      o = -d;\n      break;\n    case 0x33:\n      o = -a;\n      break;\n    case 0x1f:\n      o = d + 1;\n      break;\n    case 0x37:\n      o = a + 1;\n      break;\n    case 0x0e:\n      o = d - 1;\n      break;\n    case 0x32:\n      o = a - 1;\n      break;\n    case 0x02:\n      o = d + a;\n      break;\n    case 0x13:\n      o = d - a;\n      break;\n    case 0x07:\n      o = a - d;\n      break;\n    case 0x00:\n      o = d & a;\n      break;\n    case 0x15:\n      o = d | a;\n      break;\n  }\n\n  o = o & 0xffff;\n  const flags =\n    o === 0 ? Flags.Zero : o & 0x8000 ? Flags.Negative : Flags.Positive;\n  return [o, flags];\n}\n\nexport function alua(op: number, d: number, a: number): [number, number] {\n  if (op & 0b100000) d = 0;\n  if (op & 0b010000) d = ~d & 0xffff;\n  if (op & 0b001000) a = 0;\n  if (op & 0b000100) a = ~a & 0xffff;\n\n  let o = (op & 0b000010 ? d + a : d & a) & 0xffff;\n  if (op & 0b000001) o = ~o & 0xffff;\n\n  const flags =\n    o === 0 ? Flags.Zero : o & 0x8000 ? Flags.Negative : Flags.Positive;\n  return [o, flags];\n}\n","import {\n  ASSIGN,\n  ASSIGN_ASM,\n  ASSIGN_OP,\n  COMMANDS,\n  COMMANDS_ASM,\n  COMMANDS_OP,\n  JUMP,\n  JUMP_ASM,\n  JUMP_OP,\n} from \"../cpu/alu.js\";\n\nexport type CommandOps = keyof typeof COMMANDS.op;\nexport type JumpOps = keyof typeof JUMP.op;\nexport type StoreOps = keyof typeof ASSIGN.op;\n\nexport function asm(op: number): string {\n  if (op & 0x8000) {\n    return cInstruction(op);\n  }\n  return aInstruction(op);\n}\n\nfunction cInstruction(op: number): string {\n  op = op & 0xffff; // Clear high order bits\n  const mop = (op & 0x1000) >> 12;\n  const cop: CommandOps = ((op & 0b0000111111000000) >> 6) as CommandOps;\n  const sop: StoreOps = ((op & 0b0000000000111000) >> 3) as StoreOps;\n  const jop: JumpOps = (op & 0b0000000000000111) as JumpOps;\n\n  if (COMMANDS.op[cop] === undefined) {\n    // Invalid commend\n    return \"#ERR\";\n  }\n\n  let command = COMMANDS.op[cop];\n  if (mop) {\n    command = command.replace(/A/g, \"M\") as COMMANDS_ASM;\n  }\n\n  const store = ASSIGN.op[sop];\n  const jump = JUMP.op[jop];\n\n  let instruction: string = command;\n  if (store) {\n    instruction = `${store}=${instruction}`;\n  }\n  if (jump) {\n    instruction = `${instruction};${jump}`;\n  }\n\n  return instruction;\n}\n\nfunction aInstruction(op: number): string {\n  return \"@\" + (op & 0x7fff).toString(10);\n}\n\nexport function op(asm: string): number {\n  if (asm[0] === \"@\") {\n    return aop(asm);\n  } else {\n    return cop(asm);\n  }\n}\n\nfunction aop(asm: string): number {\n  return parseInt(asm.substring(1), 10);\n}\n\nfunction cop(asm: string): number {\n  const parts = asm.match(\n    /(?:(?<assign>[AMD]{1,3})=)?(?<operation>[-!01ADM&|]{1,3})(?:;(?<jump>JGT|JLT|JGE|JLE|JEQ|JMP))?/\n  );\n  const { assign, operation, jump } = parts?.groups ?? {};\n  const mode = operation.includes(\"M\") || assign.includes(\"M\");\n  const aop = ASSIGN.asm[(assign as ASSIGN_ASM) ?? \"\"];\n  const jop = JUMP.asm[(jump as JUMP_ASM) ?? \"\"];\n  const cop = COMMANDS.asm[(operation as COMMANDS_ASM) ?? \"\"];\n\n  return makeC(mode, cop, aop, jop);\n}\n\nexport function makeC(\n  isM: boolean,\n  op: COMMANDS_OP,\n  assign: ASSIGN_OP = 0,\n  jmp: JUMP_OP = 0\n): number {\n  const C = 0xe000;\n  const A = isM ? 0x1000 : 0;\n  const O = op << 6;\n  const D = (assign ?? 0) << 3;\n  const J = jmp ?? 0;\n  return C + A + O + D + J;\n}\n","const Hex = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  \"E\",\n  \"F\",\n];\n\nexport function chars(i: number): string {\n  return Hex[i] ?? \"X\";\n}\n\nexport function bits(i: number): string {\n  switch (i) {\n    case 0x0:\n      return \"0000\";\n    case 0x1:\n      return \"0001\";\n    case 0x2:\n      return \"0010\";\n    case 0x3:\n      return \"0011\";\n    case 0x4:\n      return \"0100\";\n    case 0x5:\n      return \"0101\";\n    case 0x6:\n      return \"0110\";\n    case 0x7:\n      return \"0111\";\n    case 0x8:\n      return \"1000\";\n    case 0x9:\n      return \"1001\";\n    case 0xa:\n      return \"1010\";\n    case 0xb:\n      return \"1011\";\n    case 0xc:\n      return \"1100\";\n    case 0xd:\n      return \"1101\";\n    case 0xe:\n      return \"1110\";\n    case 0xf:\n      return \"1111\";\n    default:\n      return \"erro\";\n  }\n}\n\nexport function int(n: string, radix: number): number {\n  const i = parseInt(n.replace(/[^\\d+-.xa-fA-F]/g, \"\"), radix);\n  return i & 0xffff;\n}\n\nexport function int16(i: string): number {\n  return int(i, 16);\n}\n\nexport function int10(i: string): number {\n  return int(i, 10);\n}\n\nexport function int2(i: string): number {\n  return int(i, 2);\n}\n\nexport function hex(i: number): string {\n  const hu = chars((i & 0xf000) >> 12);\n  const hl = chars((i & 0x0f00) >> 8);\n  const lu = chars((i & 0x00f0) >> 4);\n  const ll = chars(i & 0x000f);\n\n  return `0x${hu}${hl}${lu}${ll}`;\n}\n\nexport function bin(i: number, precision = 16): string {\n  const hu = bits((i & 0xf000) >> 12);\n  const hl = bits((i & 0x0f00) >> 8);\n  const lu = bits((i & 0x00f0) >> 4);\n  const ll = bits(i & 0x000f);\n\n  // return `${hu} ${hl} ${lu} ${ll}`;\n  return `${hu}${hl}${lu}${ll}`.substring(16 - precision); // Match the book's formatting\n}\n\nexport function dec(i: number): string {\n  i = i & 0xffff;\n  if (i === 0x8000) {\n    return \"-32768\";\n  }\n  if (i & 0x8000) {\n    i = (~i + 1) & 0x7fff;\n    return `-${i}`;\n  }\n  return `${i}`;\n}\n\nexport function uns(i: number): string {\n  i = i & 0xffff;\n  return `${i}`;\n}\n\nexport function nand16(a: number, b: number): number {\n  a = a & 0xffff;\n  b = b & 0xffff;\n  let c = ~(a & b);\n  c = c & 0xffff;\n  return c;\n}\n"],"names":["Util","useState","value","setValue","asmValue","setAsmValue","binValue","useCallback","bin","decValue","dec","unsValue","uns","hexValue","hex","setBin","target","ivalue","int2","asm","setInt","int10","setUns","setHex","int16","setAsm","op","className","type","onChange","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","prototype","_groups","WeakMap","flags","_this","set","get","buildGroups","result","g","Object","keys","reduce","name","i","k","length","create","exec","str","call","this","indices","Symbol","replace","substitution","_","group","Array","isArray","join","args","arguments","slice","push","apply","COMMANDS_ALU","COMMANDS","D","A","M","ASSIGN","MD","AM","AD","AMD","JUMP","JGT","JEQ","JGE","JLT","JNE","JLE","JMP","Flags","Positive","Zero","Negative","alu","d","a","o","mop","cop","sop","jop","undefined","command","store","jump","instruction","cInstruction","toString","aInstruction","parseInt","substring","aop","parts","match","assign","operation","mode","includes","makeC","isM","jmp","C","O","J","Hex","chars","bits","int","n","radix","hu","hl","lu","ll","precision","nand16","b","c"],"sourceRoot":""}
"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[2],{5002:function(e,r,t){t.r(r),t.d(r,{default:function(){return k}});var n=t(1092),a=t(189),s=t(9422),u=t(649),c=t(1026),i=t(7791),l=t(8061),o=t(8698),p=t(8582),f=t(7662),d=t(4625),m=t(8090),h=t(9647),x=t(691),Z=t(3389),v=function maybeParse(e){var r=m.Gq.parse(e.hdl),t=h.qH.parse(e.tst);return(0,a.Z)((0,a.Z)({},e),{},{maybeParsedHDL:r,maybeParsedTST:t})},b=function runner(e,r){var t=function tryRun(e){return function(){var r=(0,i.Z)((0,n.Z)().mark((function _callee2(r){var t,s,u;return(0,n.Z)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,d.dZ)(r.maybeChip)){n.next=2;break}return n.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{pass:!1,out:(0,d.UG)(r.maybeChip).message}));case 2:if(!(0,d.dZ)(r.maybeTest)){n.next=4;break}return n.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{pass:!1,out:(0,d.UG)(r.maybeTest).message}));case 4:return t=(0,d.Ok)(r.maybeTest).with((0,d.Ok)(r.maybeChip)).setFileSystem(e),n.next=7,t.run();case 7:return s=t.log(),u=s.trim()===r.cmp.trim(),n.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{out:s,pass:u}));case 10:case"end":return n.stop()}}),_callee2)})));return function(e){return r.apply(this,arguments)}}()}(e),s=function maybeBuild(e){return function(){var r=(0,i.Z)((0,n.Z)().mark((function _callee(r){var t,s;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,d.IY)(r.maybeParsedHDL)){n.next=6;break}return n.next=3,(0,x.J_)((0,d.Ok)(r.maybeParsedHDL),e);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=(0,d.UG)(new Error("HDL Was not parsed"));case 7:return t=n.t0,s=(0,d.IY)(r.maybeParsedTST)?(0,d.Ok)(Z.l1.from((0,d.Ok)(r.maybeParsedTST))):(0,d.UG)(new Error("TST Was not parsed")),n.abrupt("return",(0,a.Z)((0,a.Z)({},r),{},{maybeChip:t,maybeTest:s}));case 10:case"end":return n.stop()}}),_callee)})));return function(e){return r.apply(this,arguments)}}()}(e);return function(){var e=(0,i.Z)((0,n.Z)().mark((function _callee5(e){var u,l,o,p,f,d;return(0,n.Z)().wrap((function _callee5$(m){for(;;)switch(m.prev=m.next){case 0:return u=function(){var r=(0,i.Z)((0,n.Z)().mark((function _callee3(){return(0,n.Z)().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=s,r.next=4,v(e);case 4:return r.t2=r.sent,r.next=7,(0,r.t1)(r.t2);case 7:return r.t3=r.sent,r.abrupt("return",(0,r.t0)(r.t3));case 9:case"end":return r.stop()}}),_callee3)})));return function jsRunner(){return r.apply(this,arguments)}}(),l=function(){var t=(0,i.Z)((0,n.Z)().mark((function _callee4(){return(0,n.Z)().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===r||void 0===r?void 0:r.hdl(e));case 1:case"end":return t.stop()}}),_callee4)})));return function javaRunner(){return t.apply(this,arguments)}}(),m.next=4,Promise.all([u(),l()]);case 4:return o=m.sent,p=(0,c.Z)(o,2),f=p[0],d=p[1],m.abrupt("return",(0,a.Z)((0,a.Z)({},f),{},{shadow:d}));case 9:case"end":return m.stop()}}),_callee5)})));return function(r){return e.apply(this,arguments)}}()};function runTests(e,r,t,n){return _runTests.apply(this,arguments)}function _runTests(){return _runTests=(0,i.Z)((0,n.Z)().mark((function _callee7(e,r,t,a){var s;return(0,n.Z)().wrap((function _callee7$(u){for(;;)switch(u.prev=u.next){case 0:return s=b(t,a),u.abrupt("return",Promise.all(e.map(r).map(function(){var e=(0,i.Z)((0,n.Z)().mark((function _callee6(e){return(0,n.Z)().wrap((function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=s,r.next=3,e;case 3:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 5:case"end":return r.stop()}}),_callee6)})));return function(r){return e.apply(this,arguments)}}())));case 2:case"end":return u.stop()}}),_callee7)}))),_runTests.apply(this,arguments)}var _=t(6167),y=t(7878);function home_hasTest(e){var r=e.name,t=e.ext;return void 0!==f.Assignments[r]&&".hdl"===t}var w=function TestResult(e){return(0,y.jsxs)("details",{children:[(0,y.jsxs)("summary",{children:[e.name," ",e.pass?(0,y.jsx)(l.cC,{id:"Passed"}):(0,y.jsx)(l.cC,{id:"Failed"})]}),(0,y.jsxs)("div",{className:"flex row",children:[(0,y.jsx)("pre",{children:(0,y.jsx)("code",{children:e.hdl})}),(0,y.jsx)("pre",{children:(0,y.jsx)("code",{children:e.tst})})]}),(0,y.jsx)(p.M,{cmp:e.cmp,out:e.out})]})};function loadAssignment(e){return _loadAssignment.apply(this,arguments)}function _loadAssignment(){return _loadAssignment=(0,i.Z)((0,n.Z)().mark((function _callee3(e){var r,t,s,u,c,i;return(0,n.Z)().wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return s=f.Assignments[e.name],n.next=3,null===(t=e.file)||void 0===t?void 0:t.text();case 3:if(n.t1=r=n.sent,n.t0=null!==n.t1,!n.t0){n.next=7;break}n.t0=void 0!==r;case 7:if(!n.t0){n.next=11;break}n.t2=r,n.next=12;break;case 11:n.t2="";case 12:return u=n.t2,c=s["".concat(e.name,".tst")],i=s["".concat(e.name,".cmp")],n.abrupt("return",(0,a.Z)((0,a.Z)({},e),{},{hdl:u,tst:c,cmp:i}));case 16:case"end":return n.stop()}}),_callee3)}))),_loadAssignment.apply(this,arguments)}var k=function Home(){var e=(0,_.useState)([]),r=(0,c.Z)(e,2),t=r[0],l=r[1],p=(0,o.Q)().fs,f=(0,_.useCallback)(function(){var e=(0,i.Z)((0,n.Z)().mark((function _callee2(e){var r,t,c,o;return(0,n.Z)().wrap((function _callee2$(f){for(;;)switch(f.prev=f.next){case 0:return t=e.target,f.next=3,Promise.all((0,u.Z)(null!==(r=t.files)&&void 0!==r?r:[]).filter((function(e){return e.name.endsWith(".hdl")})).map((function(e){var r,t,n,a,u=null!==(r=null===(t=e.name.match((0,s.Z)(/^((.*)(\.[^.]*))?$/,{base:1,name:2,ext:3})))||void 0===t?void 0:t.groups)&&void 0!==r?r:{},c=u.name,i=u.base;return{name:c,base:i,ext:u.ext,dir:null!==(n="/"+(null===(a=e.webkitRelativePath)||void 0===a?void 0:a.replace(i,"")))&&void 0!==n?n:"",root:"/",file:e}})).filter(home_hasTest).map(function(){var e=(0,i.Z)((0,n.Z)().mark((function _callee(e){var r;return(0,n.Z)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.file.text();case 2:return r=t.sent,t.abrupt("return",(0,a.Z)((0,a.Z)({},e),{},{hdl:r}));case 4:case"end":return t.stop()}}),_callee)})));return function(r){return e.apply(this,arguments)}}()));case 3:return c=f.sent,f.next=6,runTests(c,loadAssignment,p);case 6:o=f.sent,p.pushd("/samples"),l(o),p.popd();case 10:case"end":return f.stop()}}),_callee2)})));return function(r){return e.apply(this,arguments)}}(),[l,p]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h1",{children:"NAND2Tetris Web IDE"}),(0,y.jsx)("form",{children:(0,y.jsxs)("fieldset",{children:[(0,y.jsx)("legend",{children:"Files for grading:"}),(0,y.jsx)("input",{type:"file",multiple:!0,directory:"",webkitdirectory:"",onChange:f})]})}),(0,y.jsx)("figure",{children:t.length>0?t.map((function(e,r){return(0,y.jsx)(w,(0,a.Z)({},e),e.name)})):(0,y.jsx)(y.Fragment,{})})]})}}}]);
//# sourceMappingURL=2.9ab16c5b.chunk.js.map
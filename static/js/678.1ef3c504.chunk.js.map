{"version":3,"file":"static/js/678.1ef3c504.chunk.js","mappings":"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","sources":["shell/editor.tsx","shell/panel.tsx","../../components/src/chips/keyboard.tsx","../../components/src/inline_edit.tsx","../../node_modules/@davidsouther/jiffies/lib/esm/dom/css/sizing.js","../../components/src/virtual_scroll.tsx","../../components/src/chips/memory.tsx","../../components/src/chips/register.tsx","../../components/src/chips/screen.tsx","../../components/src/clockface.tsx","../../components/src/compare.ts","../../components/src/react.ts","../../components/src/runbar.tsx","../../components/src/timer.tsx","../../simulator/src/timer.ts"],"sourcesContent":["import { debounce } from \"@davidsouther/jiffies/lib/esm/debounce\";\nimport { Trans } from \"@lingui/macro\";\nimport MonacoEditor, { OnMount, useMonaco } from \"@monaco-editor/react\";\nimport type * as monacoT from \"monaco-editor/esm/vs/editor/editor.api\";\nimport ohm from \"ohm-js\";\nimport {\n  CSSProperties,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { AppContext } from \"../App.context\";\n\nimport {\n  Span,\n  UNKNOWN_PARSE_ERROR,\n} from \"@nand2tetris/simulator/languages/base.js\";\n\nimport \"./editor.scss\";\n\nexport const ErrorPanel = ({ error }: { error?: ohm.MatchResult }) => {\n  return error?.failed() ? (\n    <details className=\"ErrorPanel\" open>\n      <summary role=\"button\" className=\"secondary\">\n        <Trans>Parse Error</Trans>\n      </summary>\n      <pre>\n        <code>\n          {error?.message ?? error?.shortMessage ?? UNKNOWN_PARSE_ERROR}\n        </code>\n      </pre>\n    </details>\n  ) : (\n    <></>\n  );\n};\n\nconst Textarea = ({\n  value,\n  onChange,\n  language,\n  disabled = false,\n}: {\n  value: string;\n  onChange: (value: string) => void;\n  language: string;\n  disabled?: boolean;\n}) => {\n  const [text, setText] = useState(value);\n  return (\n    <textarea\n      data-testid={`editor-${language}`}\n      disabled={disabled}\n      value={text}\n      onChange={(e) => {\n        const value = e.target?.value;\n        setText(value);\n        onChange(value);\n      }}\n    />\n  );\n};\n\nconst MONACO_LIGHT_THEME = \"vs\";\nconst MONACO_DARK_THEME = \"vs-dark\";\n\nconst makeHighlight = (\n  monaco: typeof monacoT | null,\n  editor: monacoT.editor.IStandaloneCodeEditor | undefined,\n  highlight: Span | undefined,\n  decorations: string[]\n): string[] => {\n  if (!(editor && highlight)) return decorations;\n  const model = editor.getModel();\n  if (!model) return decorations;\n  const start = model.getPositionAt(highlight.start);\n  const end = model.getPositionAt(highlight.end);\n  const range = monaco?.Range.fromPositions(start, end);\n  const nextDecoration: monacoT.editor.IModelDeltaDecoration[] = [];\n  if (range) {\n    nextDecoration.push({\n      range,\n      options: { inlineClassName: \"highlight\" },\n    });\n    editor.revealRangeInCenter(range);\n  }\n  return editor.deltaDecorations(decorations, nextDecoration);\n};\n\nconst Monaco = ({\n  value,\n  onChange,\n  onCursorPositionChange,\n  language,\n  error,\n  disabled = false,\n  highlight: currentHighlight,\n  dynamicHeight = false,\n  lineNumberTransform,\n}: {\n  value: string;\n  onChange: (value: string) => void;\n  onCursorPositionChange?: (index: number) => void;\n  language: string;\n  error?: ohm.MatchResult | undefined;\n  disabled?: boolean;\n  highlight?: Span;\n  dynamicHeight?: boolean;\n  lineNumberTransform?: (n: number) => string;\n}) => {\n  const { theme } = useContext(AppContext);\n  const monaco = useMonaco();\n  const [height, setHeight] = useState(0);\n\n  const editor = useRef<monacoT.editor.IStandaloneCodeEditor>();\n  const decorations = useRef<string[]>([]);\n  const highlight = useRef<Span | undefined>(undefined);\n\n  const codeTheme = useCallback(() => {\n    const isDark =\n      theme === \"system\"\n        ? window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n        : theme === \"dark\";\n    return isDark ? MONACO_DARK_THEME : MONACO_LIGHT_THEME;\n  }, [theme]);\n\n  const doHighlight = useCallback(() => {\n    decorations.current = makeHighlight(\n      monaco,\n      editor.current,\n      // I'm not sure why this makes things work, but it is load bearing.\n      // Removing the empty span will cause the initial first-statement\n      // highlight in the test view to not show. Setting it to [0, 1] will\n      // cause a 1-character highlight in the editor view, so don't do that\n      // either.\n      highlight.current ?? { start: 0, end: 0 },\n      decorations.current\n    );\n  }, [decorations, monaco, editor, highlight]);\n\n  const calculateHeight = () => {\n    if (dynamicHeight) {\n      const contentHeight = editor.current?.getContentHeight();\n      if (contentHeight) {\n        setHeight(contentHeight);\n      }\n    }\n  };\n\n  // Mark and center highlighted spans\n  useEffect(() => {\n    highlight.current = currentHighlight;\n    doHighlight();\n  }, [currentHighlight]);\n\n  // Set options when mounting\n  const onMount: OnMount = useCallback(\n    (ed) => {\n      editor.current = ed;\n      editor.current?.updateOptions({\n        fontFamily: `\"JetBrains Mono\", source-code-pro, Menlo, Monaco,\n      Consolas, \"Roboto Mono\", \"Ubuntu Monospace\", \"Noto Mono\", \"Oxygen Mono\",\n      \"Liberation Mono\", monospace, \"Apple Color Emoji\", \"Segoe UI Emoji\",\n      \"Segoe UI Symbol\", \"Noto Color Emoji\"`,\n        fontSize: 16,\n        minimap: {\n          enabled: false,\n        },\n        theme: codeTheme(),\n        scrollBeyondLastLine: false,\n        readOnly: disabled,\n        lineNumbers: lineNumberTransform ?? \"on\",\n        folding: false,\n      });\n      doHighlight();\n      calculateHeight();\n      editor.current?.onDidChangeCursorPosition((e) => {\n        const index = editor.current?.getModel()?.getOffsetAt(e.position);\n        if (index !== undefined) {\n          onCursorPositionChange?.(index);\n        }\n      });\n    },\n    [codeTheme]\n  );\n\n  useEffect(() => {\n    if (editor.current === undefined) return;\n    editor.current.updateOptions({ lineNumbers: lineNumberTransform ?? \"on\" });\n  }, [lineNumberTransform]);\n\n  // Set themes\n  useEffect(() => {\n    if (editor.current === undefined) return;\n    editor.current.updateOptions({ theme: codeTheme() });\n  }, [editor, codeTheme]);\n\n  // Prevent editing disabled editors\n  useEffect(() => {\n    if (editor.current === undefined) return;\n    editor.current.updateOptions({ readOnly: disabled });\n  }, [editor, disabled]);\n\n  // Add error markers on parse failure\n  useEffect(() => {\n    if (editor.current === undefined) return;\n    if (monaco === null) return;\n    const model = editor.current.getModel();\n    if (model === null) return;\n    if (error === undefined || error.succeeded()) {\n      monaco.editor.setModelMarkers(model, language, []);\n      return;\n    }\n    // Line 7, col 5:\n    const { line, column, message } =\n      /Line (?<line>\\d+), col (?<column>\\d+): (?<message>.*)/.exec(\n        error.shortMessage ?? \"\"\n      )?.groups ?? { line: 1, column: 1, message: \"could not parse error\" };\n    const startLineNumber = Number(line);\n    const endLineNumber = startLineNumber;\n    const startColumn = Number(column);\n    const restOfLine = model\n      .getLineContent(startLineNumber)\n      .substring(startColumn - 1);\n    let endColumn =\n      startColumn + (restOfLine.match(/([^\\s]+)/)?.[0].length ?? 1);\n    if (endColumn <= startColumn) {\n      endColumn = startColumn + 1;\n    }\n\n    monaco.editor.setModelMarkers(model, language, [\n      {\n        message,\n        startColumn,\n        startLineNumber,\n        endColumn,\n        endLineNumber,\n        severity: 8, // monacoT.MarkerSeverity.Error,\n      },\n    ]);\n  }, [error, editor, monaco, language]);\n\n  const onValueChange = (v = \"\") => {\n    calculateHeight();\n    onChange(v);\n  };\n\n  return (\n    <>\n      <MonacoEditor\n        value={value}\n        onChange={onValueChange}\n        language={language}\n        onMount={onMount}\n        height={dynamicHeight ? height : undefined}\n      />\n    </>\n  );\n};\n\nexport const Editor = ({\n  className = \"\",\n  style = {},\n  disabled = false,\n  value,\n  onChange,\n  onCursorPositionChange,\n  grammar,\n  language,\n  highlight,\n  dynamicHeight = false,\n  lineNumberTransform,\n}: {\n  className?: string;\n  style?: CSSProperties;\n  disabled?: boolean;\n  value: string;\n  onChange: (source: string) => void;\n  onCursorPositionChange?: (index: number) => void;\n  grammar?: ohm.Grammar;\n  language: string;\n  highlight?: Span;\n  dynamicHeight?: boolean;\n  lineNumberTransform?: (n: number) => string;\n}) => {\n  const [error, setError] = useState<ohm.MatchResult>();\n  const { monaco } = useContext(AppContext);\n\n  const parse = useCallback(\n    (text = \"\") => {\n      if (grammar) {\n        const parsed = grammar.match(text);\n        setError(parsed.failed() ? parsed : undefined);\n      }\n    },\n    [setError, grammar]\n  );\n\n  useEffect(() => parse(value), [parse, value]);\n  const doParse = useMemo(() => debounce(parse, 500), [parse]);\n\n  const onChangeCB = useCallback(\n    (text = \"\") => {\n      onChange(text);\n      doParse(text);\n    },\n    [doParse, onChange]\n  );\n\n  return (\n    <div\n      className={`Editor ${dynamicHeight ? \"dynamic-height\" : \"\"} ${className}`}\n      style={style}\n    >\n      {monaco.canUse && monaco.wants ? (\n        <Monaco\n          value={value}\n          onChange={onChangeCB}\n          onCursorPositionChange={onCursorPositionChange}\n          language={language}\n          error={error}\n          disabled={disabled}\n          highlight={highlight}\n          dynamicHeight={dynamicHeight}\n          lineNumberTransform={lineNumberTransform}\n        />\n      ) : (\n        <>\n          <Textarea\n            value={value}\n            onChange={onChangeCB}\n            language={language}\n            disabled={disabled}\n          />\n          <ErrorPanel error={error} />\n        </>\n      )}\n    </div>\n  );\n};\n","import { CSSProperties, ReactNode } from \"react\";\n\nexport const Panel = (props: {\n  children: ReactNode;\n  header?: ReactNode;\n  footer?: ReactNode;\n  className?: string;\n  style?: CSSProperties;\n}) => {\n  return (\n    <article className={[\"panel\", props.className ?? \"\"].join(\" \")}>\n      {props.header && <header>{props.header}</header>}\n      <main>{props.children}</main>\n      {props.footer && <footer>{props.footer}</footer>}\n    </article>\n  );\n};\n\nexport const Accordian = (props: {\n  children: ReactNode;\n  summary: ReactNode;\n  className?: string;\n  style?: CSSProperties;\n  open?: boolean;\n}) => {\n  return (\n    <details\n      className={props.className ?? \"\"}\n      open={props.open}\n      style={props.style}\n    >\n      <summary>\n        <div className=\"flex row align-baseline\">{props.summary}</div>\n      </summary>\n      {props.children}\n    </details>\n  );\n};\n","import { KeyboardAdapter } from \"@nand2tetris/simulator/cpu/memory.js\";\nimport { useEffect, useState } from \"react\";\nimport { RegisterComponent } from \"./register.js\";\n\nconst KeyMap: Record<string, number | undefined> = {\n  // Delete: 127,\n  Enter: 128,\n  Backspace: 129,\n  ArrowLeft: 130,\n  ArrowUp: 131,\n  ArrowRight: 132,\n  ArrowDown: 133,\n  Home: 134,\n  End: 135,\n  PageUp: 136,\n  PageDown: 137,\n  Insert: 138,\n  Delete: 139,\n  Escape: 140,\n  F1: 141,\n  F2: 142,\n  F3: 143,\n  F4: 144,\n  F5: 145,\n  F6: 146,\n  F7: 147,\n  F8: 148,\n  F9: 149,\n  F10: 150,\n  F11: 151,\n  F12: 152,\n};\n\nconst keyDisplays: Record<string, string> = {\n  ArrowLeft: \"L-arrow\",\n  ArrowUp: \"U-arrow\",\n  ArrowRight: \"R-arrow\",\n  ArrowDown: \"D-arrow\",\n};\n\nfunction getKeyDisplay(key: string) {\n  return keyDisplays[key] || key;\n}\n\nfunction keyPressToHackCharacter(keypress: KeyboardEvent): number {\n  const mapping = KeyMap[keypress.key];\n  if (mapping !== undefined) {\n    return mapping;\n  }\n  if (keypress.key.length === 1) {\n    const code = keypress.key.charCodeAt(0);\n    if (code >= 32 && code <= 126) {\n      return code;\n    }\n  }\n\n  return 0;\n}\n\nexport const Keyboard = ({\n  keyboard,\n  update,\n}: {\n  keyboard: KeyboardAdapter;\n  update?: () => void;\n}) => {\n  // const [showPicker, setShowPicker] = useState(false);\n  const [enabled, setEnabled] = useState(false);\n  const [character, setCharacter] = useState(\"\");\n  const [bits, setBits] = useState(keyboard.getKey());\n  let currentKey = 0;\n\n  const toggleEnabled = () => {\n    setEnabled(!enabled);\n  };\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (!enabled) {\n      return;\n    }\n\n    setCharacter(getKeyDisplay(event.key));\n    const key = keyPressToHackCharacter(event);\n    if (key === currentKey) {\n      return;\n    }\n    setKey(key);\n    update?.();\n  };\n\n  const onKeyUp = (event: KeyboardEvent) => {\n    if (!enabled) {\n      return;\n    }\n\n    currentKey = 0;\n    keyboard.clearKey();\n    update?.();\n    setBits(keyboard.getKey());\n    setCharacter(\"\");\n  };\n\n  const setKey = (key: number) => {\n    if (key === 0) {\n      return;\n    }\n    keyboard.setKey(key);\n    setBits(keyboard.getKey());\n    currentKey = key;\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", onKeyDown);\n    window.addEventListener(\"keyup\", onKeyUp);\n\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n      window.removeEventListener(\"keyup\", onKeyUp);\n    };\n  });\n\n  return (\n    <div className=\"flex row align-baseline\">\n      <div className=\"flex-2\">\n        <RegisterComponent name=\"Key\" bits={bits} />\n      </div>\n      <div className=\"flex-2\">{`Char: ${character}`}</div>\n      <div className=\"flex-3\">\n        <button onClick={toggleEnabled}>\n          {/* <Icon name=\"keyboard\" /> */}\n          {`${enabled ? \"Disable\" : \"Enable\"} Keyboard`}\n        </button>\n      </div>\n    </div>\n  );\n};\n","import { width } from \"@davidsouther/jiffies/lib/esm/dom/css/sizing.js\";\nimport { useCallback, useState } from \"react\";\nimport { useStateInitializer } from \"./react.js\";\n\nconst Mode = { VIEW: 0, EDIT: 1 };\n\nexport const InlineEdit = (props: {\n  mode?: keyof typeof Mode;\n  value: string;\n  highlight: boolean;\n  onChange: (value: string) => void;\n  onFocus?: () => void;\n}) => {\n  const [mode, setMode] = useState(props.mode ?? Mode.VIEW);\n  const [value, setValue] = useStateInitializer(props.value);\n\n  const render = () => {\n    switch (mode) {\n      case Mode.EDIT:\n        return edit();\n      case Mode.VIEW:\n        return view();\n      default:\n        return <span />;\n    }\n  };\n\n  const view = () => (\n    <span\n      style={{ cursor: \"text\", ...width(\"full\", \"inline\") }}\n      onClick={() => {\n        setMode(Mode.EDIT);\n      }}\n    >\n      {value}\n    </span>\n  );\n\n  const doSelect = useCallback(\n    (ref: HTMLInputElement | null) => ref?.select(),\n    []\n  );\n  const doChange = useCallback(\n    (target: HTMLInputElement) => {\n      setMode(Mode.VIEW);\n      setValue(target.value ?? \"\");\n      props.onChange(target.value ?? \"\");\n    },\n    [props, setMode, setValue]\n  );\n  const edit = () => {\n    const edit = (\n      <span style={{ display: \"block\", position: \"relative\" }}>\n        <input\n          ref={doSelect}\n          style={{\n            zIndex: \"10\",\n            position: \"absolute\",\n            left: \"0\",\n            marginTop: \"-0.375rem\",\n            color: \"black\",\n          }}\n          onFocus={props.onFocus}\n          onBlur={({ target }) => doChange(target)}\n          onKeyPress={({ key, target }) => {\n            if (key === \"Enter\") {\n              doChange(target as HTMLInputElement);\n            }\n          }}\n          type=\"text\"\n          defaultValue={value}\n        />\n      </span>\n    );\n    return edit;\n  };\n\n  return render();\n};\n\nexport default InlineEdit;\n","import { Widths } from \"./constants.js\";\nexport function width(amount, block) {\n    if (amount === undefined && Widths[block] !== undefined) {\n        amount = block;\n    }\n    return {\n        ...(block === \"inline\" ? { display: \"inline-block\" } : {}),\n        width: Widths[amount] ?? \"0\",\n    };\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport {\n  Key,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n} from \"react\";\n\nexport interface VirtualScrollSettings {\n  /**Minimum offset into the adapter. Default is 0.  */\n  minIndex: number;\n  /** Maximum offset into the adapter. Default is Number.MAX_SAFE_INTEGER.  */\n  maxIndex: number;\n  /** Initial index to start rendering from. Default is minIndex.  */\n  startIndex: number;\n  /**\n   * Number of items to render in visible area. Default is entire range from\n   * minIndex to maxIndex.\n   */\n  count: number;\n  /**\n   * Maximum number of items to render on either side of the visible area.\n   * Default is `count`.\n   */\n  tolerance: number;\n  /** Height of each item, in pixels. Default is 20px. */\n  itemHeight: number;\n}\n\nexport interface VirtualScrollDataAdapter<T> {\n  (offset: number, limit: number): Iterable<T>;\n}\n\nexport function arrayAdapter<T>(data: T[]): VirtualScrollDataAdapter<T> {\n  return (offset, limit) => data.slice(offset, offset + limit);\n}\n\nexport interface VirtualScrollProps<T, U extends ReactNode> {\n  settings?: Partial<VirtualScrollSettings>;\n  get: VirtualScrollDataAdapter<T>;\n  row: (t: T) => U;\n  rowKey: (t: T) => Key;\n}\n\nexport function fillVirtualScrollSettings(\n  settings: Partial<VirtualScrollSettings>\n): VirtualScrollSettings {\n  const {\n    minIndex = 0,\n    maxIndex = Number.MAX_SAFE_INTEGER,\n    startIndex = 0,\n    itemHeight = 20,\n    count = Math.max(maxIndex - minIndex, 1),\n    tolerance = count,\n  } = settings;\n\n  return { minIndex, maxIndex, startIndex, itemHeight, count, tolerance };\n}\n\nexport function initialState<T>(\n  settings: VirtualScrollSettings,\n  adapter: VirtualScrollDataAdapter<T>\n): VirtualScrollState<T> {\n  // From Denis Hilt, https://blog.logrocket.com/virtual-scrolling-core-principles-and-basic-implementation-in-react/\n  const { minIndex, maxIndex, startIndex, itemHeight, count, tolerance } =\n    settings;\n  const bufferedItems = count + 2 * tolerance;\n  const itemsAbove = Math.max(0, startIndex - tolerance - minIndex);\n\n  const viewportHeight = count * itemHeight;\n  const totalHeight = Math.max(maxIndex - minIndex, 1) * itemHeight;\n  const toleranceHeight = tolerance * itemHeight;\n  const bufferHeight = viewportHeight + 2 * toleranceHeight;\n  const topPaddingHeight = itemsAbove * itemHeight;\n  const bottomPaddingHeight = totalHeight - (topPaddingHeight + bufferHeight);\n\n  const state: VirtualScrollState<T> = {\n    scrollTop: 0,\n    settings,\n    viewportHeight,\n    totalHeight,\n    toleranceHeight,\n    bufferedItems,\n    topPaddingHeight,\n    bottomPaddingHeight,\n    data: [],\n  };\n\n  return {\n    ...state,\n    ...doScroll(topPaddingHeight + toleranceHeight, state, adapter),\n  };\n}\n\nexport function getData<T>(\n  minIndex: number,\n  maxIndex: number,\n  offset: number,\n  limit: number,\n  get: VirtualScrollDataAdapter<T>\n): T[] {\n  const start = Math.max(0, minIndex, offset);\n  const end = Math.min(maxIndex, offset + limit - 1);\n  const data = get(start, end - start);\n  return [...data];\n}\n\ninterface ScrollUpdate<T> {\n  scrollTop: number;\n  topPaddingHeight: number;\n  bottomPaddingHeight: number;\n  data: T[];\n}\n\nexport function doScroll<T>(\n  scrollTop: number,\n  state: VirtualScrollState<T>,\n  get: VirtualScrollDataAdapter<T>\n): ScrollUpdate<T> {\n  const {\n    totalHeight,\n    toleranceHeight,\n    bufferedItems,\n    settings: { itemHeight, minIndex, maxIndex },\n  } = state;\n  const index =\n    minIndex + Math.floor((scrollTop - toleranceHeight) / itemHeight);\n  const data = getData(minIndex, maxIndex, index, bufferedItems, get);\n  const topPaddingHeight = Math.max((index - minIndex) * itemHeight, 0);\n  const bottomPaddingHeight = Math.max(\n    totalHeight - (topPaddingHeight + data.length * itemHeight),\n    0\n  );\n\n  return { scrollTop, topPaddingHeight, bottomPaddingHeight, data };\n}\n\ninterface VirtualScrollState<T> {\n  settings: VirtualScrollSettings;\n  scrollTop: number; // px\n  bufferedItems: number; // count\n  totalHeight: number; // px\n  viewportHeight: number; // px\n  topPaddingHeight: number; // px\n  bottomPaddingHeight: number; // px\n  toleranceHeight: number; // px\n  data: T[];\n}\n\nconst scrollReducer =\n  <T extends {}>(get: VirtualScrollDataAdapter<T>) =>\n  (state: VirtualScrollState<T>, scrollTop: number) => ({\n    ...state,\n    ...doScroll(scrollTop, state, get),\n  });\n\nexport const VirtualScroll = <T extends {}, U extends ReactNode = ReactNode>(\n  props: VirtualScrollProps<T, U> & { className?: string }\n) => {\n  const viewportRef = useRef<HTMLDivElement | null>(null);\n\n  const { settings, startState, reducer } = useMemo(() => {\n    const settings = fillVirtualScrollSettings(props.settings ?? {});\n    const startState = initialState<T>(settings, props.get);\n    const reducer = scrollReducer(props.get);\n    return { settings, reducer, startState };\n  }, [props.settings, props.get]);\n\n  const [state, dispatchScroll] = useReducer(reducer, startState);\n\n  useEffect(() => {\n    if (viewportRef.current !== null) {\n      dispatchScroll(viewportRef.current.scrollTop);\n    }\n  }, [settings, props.row]);\n\n  const initialScroll = useCallback(\n    (div: HTMLDivElement | null) => {\n      if (div) {\n        div.scrollTop = viewportRef.current\n          ? viewportRef.current.scrollTop\n          : settings.startIndex * settings.itemHeight;\n      }\n      viewportRef.current = div;\n    },\n    [viewportRef, settings.startIndex, settings.itemHeight]\n  );\n\n  const rows = state.data.map((d) => (\n    <div key={props.rowKey(d)} style={{ height: `${settings.itemHeight}px` }}>\n      {props.row(d)}\n    </div>\n  ));\n\n  return (\n    <div\n      ref={initialScroll}\n      style={{\n        height: `${state.viewportHeight}px`,\n        overflowY: \"scroll\",\n        overflowAnchor: \"none\",\n      }}\n      className={props.className ?? \"\"}\n      onScroll={(e) => dispatchScroll((e.target as HTMLDivElement).scrollTop)}\n    >\n      <div style={{ height: `${state.topPaddingHeight}px` }} />\n      {rows}\n      <div style={{ height: `${state.bottomPaddingHeight}px` }} />\n    </div>\n  );\n};\n\nexport default VirtualScroll;\n","import { rounded } from \"@davidsouther/jiffies/lib/esm/dom/css/border.js\";\nimport {\n  ChangeEvent,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n\nimport {\n  Format,\n  FORMATS,\n  MemoryAdapter,\n} from \"@nand2tetris/simulator/cpu/memory.js\";\nimport { loadAsm, loadBlob, loadHack } from \"@nand2tetris/simulator/loader.js\";\nimport { asm } from \"@nand2tetris/simulator/util/asm.js\";\nimport { bin, dec, hex } from \"@nand2tetris/simulator/util/twos.js\";\n\nimport { useClockReset } from \"../clockface.js\";\nimport InlineEdit from \"../inline_edit.js\";\nimport { useStateInitializer } from \"../react.js\";\nimport { BaseContext } from \"../stores/base.context.js\";\nimport VirtualScroll, { VirtualScrollSettings } from \"../virtual_scroll.js\";\n\nconst ITEM_HEIGHT = 34;\n\nexport const MemoryBlock = ({\n  memory,\n  jmp = { value: 0 },\n  highlight = -1,\n  editable = false,\n  justifyLeft = false,\n  format = dec,\n  onChange = () => undefined,\n  onFocus = () => undefined,\n}: {\n  jmp?: { value: number };\n  memory: MemoryAdapter;\n  highlight?: number;\n  editable?: boolean;\n  justifyLeft?: boolean;\n  format?: (v: number) => string;\n  onChange?: (i: number, value: string, previous: number) => void;\n  onFocus?: (i: number) => void;\n}) => {\n  const settings = useMemo<Partial<VirtualScrollSettings>>(\n    () => ({\n      count: Math.min(memory.size, 25),\n      maxIndex: memory.size,\n      itemHeight: ITEM_HEIGHT,\n      startIndex: jmp.value,\n    }),\n    [memory.size, jmp]\n  );\n  const get = useCallback(\n    (offset: number, count: number) =>\n      memory\n        .range(offset, offset + count)\n        .map((v, i) => [i + offset, v] as [number, number]),\n    [memory]\n  );\n  const row = useCallback(\n    ([i, v]: [number, number]) => (\n      <MemoryCell\n        index={i}\n        value={format(v)}\n        size={memory.size}\n        editable={editable}\n        justifyLeft={justifyLeft}\n        highlight={i === highlight}\n        onChange={onChange}\n        onFocus={onFocus}\n      />\n    ),\n    [format, editable, highlight, onChange]\n  );\n\n  return (\n    <VirtualScroll<[number, number], ReactNode>\n      settings={settings}\n      get={get}\n      row={row}\n      rowKey={([i]) => i}\n    />\n  );\n};\n\nexport const MemoryCell = ({\n  index,\n  value,\n  size,\n  highlight = false,\n  editable = false,\n  justifyLeft = false,\n  onChange = () => undefined,\n  onFocus = () => undefined,\n}: {\n  index: number;\n  value: string;\n  size?: number;\n  highlight?: boolean;\n  editable?: boolean;\n  justifyLeft?: boolean;\n  onChange?: (i: number, value: string, previous: number) => void;\n  onFocus?: (i: number) => void;\n}) => (\n  <div style={{ display: \"flex\", height: \"100%\" }}>\n    <code\n      style={{\n        ...rounded(\"none\"),\n        ...(highlight ? { background: \"var(--mark-background-color)\" } : {}),\n        whiteSpace: \"pre\",\n      }}\n    >\n      {size\n        ? dec(index).padStart(Math.ceil(Math.log10(size)), \" \")\n        : dec(index)}\n    </code>\n    <code\n      style={{\n        flex: \"1\",\n        textAlign: justifyLeft ? \"left\" : \"right\",\n        color: \"black\",\n        ...rounded(\"none\"),\n        ...(highlight ? { background: \"var(--mark-background-color)\" } : {}),\n      }}\n    >\n      {editable ? (\n        <InlineEdit\n          value={value}\n          highlight={highlight}\n          onChange={(newValue: string) =>\n            onChange(index, newValue, Number(value))\n          }\n          onFocus={() => onFocus(index)}\n        />\n      ) : (\n        <span style={{ color: \"black\" }}>{value}</span>\n      )}\n    </code>\n  </div>\n);\n\nexport const Memory = ({\n  name = \"Memory\",\n  displayEnabled = true,\n  highlight = -1,\n  editable = true,\n  memory,\n  format = \"dec\",\n  onUpload = undefined,\n  onChange = undefined,\n}: {\n  name?: string;\n  displayEnabled?: boolean;\n  editable?: boolean;\n  highlight?: number;\n  memory: MemoryAdapter;\n  format: Format;\n  onUpload?: (fileName: string) => void;\n  onChange?: () => void;\n}) => {\n  const [fmt, setFormat] = useState(format);\n  const [jmp, setJmp] = useState(\"\");\n  const [goto, setGoto] = useState({ value: 0 });\n  const [highlighted, setHighlighted] = useStateInitializer(highlight);\n  const [renderKey, setRenderKey] = useState(0);\n\n  const jumpTo = () => {\n    const value =\n      !isNaN(parseInt(jmp)) && isFinite(parseInt(jmp)) ? Number(jmp) : 0;\n    setHighlighted(value);\n    setGoto({\n      value: value,\n    });\n  };\n\n  const fileUploadRef = useRef<HTMLInputElement>(null);\n  const doLoad = useCallback(() => {\n    onChange?.();\n    fileUploadRef.current?.click();\n  }, [fileUploadRef]);\n\n  const { setStatus } = useContext(BaseContext);\n  const upload = useCallback(async (event: ChangeEvent<HTMLInputElement>) => {\n    if (!event.target.files?.length) {\n      setStatus(\"No file selected\");\n      return;\n    }\n    const file = event.target.files[0];\n    onUpload?.(file.name);\n    const source = await file.text();\n    const loader = file.name.endsWith(\"hack\")\n      ? loadHack\n      : file.name.endsWith(\"asm\")\n      ? loadAsm\n      : loadBlob;\n    const bytes = await loader(source);\n    memory.loadBytes(bytes);\n    event.target.value = \"\"; // Clear the input out\n    jumpTo();\n  }, []);\n\n  const rerenderMemoryBlock = () => {\n    setRenderKey(renderKey + 1);\n  };\n\n  const clear = () => {\n    memory.reset();\n    onChange?.();\n    rerenderMemoryBlock();\n  };\n\n  const doUpdate = (i: number, v: string) => {\n    memory.update(i, v, fmt ?? \"dec\");\n    onChange?.();\n    rerenderMemoryBlock();\n  };\n\n  useClockReset(() => {\n    setJmp(\"\");\n    setGoto({ value: 0 });\n  });\n\n  return (\n    <article className={`panel memory ${name}`}>\n      <header>\n        <div>{name}</div>\n        <fieldset role=\"group\">\n          <input\n            type=\"file\"\n            style={{ display: \"none\" }}\n            ref={fileUploadRef}\n            onChange={upload}\n          />\n          <button\n            onClick={doLoad}\n            className=\"flex-0\"\n            data-tooltip={\"Load file\"}\n            data-placement=\"bottom\"\n          >\n            {/* <Icon name=\"upload_file\" /> */}\n            📂\n          </button>\n          <button\n            onClick={clear}\n            className=\"flex-0\"\n            data-tooltip={\"Clear\"}\n            data-placement=\"bottom\"\n          >\n            {/* <Icon name=\"upload_file\" /> */}\n            🆑\n          </button>\n          <input\n            style={{ width: \"4em\", height: \"100%\" }}\n            placeholder=\"Addr\"\n            value={jmp}\n            onKeyDown={({ key }) => key === \"Enter\" && jumpTo()}\n            onChange={({ target: { value } }) => setJmp(value)}\n          />\n          <button\n            onClick={jumpTo}\n            className=\"flex-0\"\n            data-tooltip={\"Scroll to address\"}\n            data-placement=\"bottom\"\n          >\n            {/* <Icon name=\"move_down\" /> */}\n            ⤵️\n          </button>\n          <select value={fmt} onChange={(e) => setFormat(e.target.value)}>\n            {FORMATS.map((option) => (\n              <option key={option}>{option}</option>\n            ))}\n          </select>\n        </fieldset>\n      </header>\n      {displayEnabled ? (\n        <MemoryBlock\n          key={renderKey}\n          jmp={goto}\n          memory={memory}\n          highlight={highlighted}\n          editable={editable}\n          justifyLeft={fmt == \"asm\"}\n          format={(v: number) => doFormat(fmt, v)}\n          onChange={doUpdate}\n          onFocus={(i) => setHighlighted(i)}\n        />\n      ) : (\n        \"Memory display is disabled\"\n      )}\n    </article>\n  );\n};\n\nexport default Memory;\n\nfunction doFormat(format: Format, v: number): string {\n  switch (format) {\n    case \"bin\":\n      return bin(v);\n    case \"hex\":\n      return hex(v);\n    case \"asm\":\n      return asm(v);\n    case \"dec\":\n    default:\n      return dec(v);\n  }\n}\n","import { dec } from \"@nand2tetris/simulator/util/twos.js\";\n\nexport const RegisterComponent = ({\n  name,\n  bits,\n}: {\n  name: string;\n  bits: number;\n}) => (\n  <div>\n    {name}: {dec(bits)}\n  </div>\n);\n","import { Memory } from \"@nand2tetris/simulator/cpu/memory.js\";\nimport { assertExists } from \"@davidsouther/jiffies/lib/esm/assert.js\";\nimport { useCallback, useRef } from \"react\";\nimport { useClockFrame, useClockReset } from \"../clockface.js\";\n\nconst WHITE = \"white\";\nconst BLACK = \"black\";\ntype COLOR = typeof WHITE | typeof BLACK;\n\nexport interface ScreenMemory {\n  get(idx: number): number;\n}\n\nexport function reduceScreen(memory: Memory, offset = 0): ScreenMemory {\n  return {\n    get(idx: number): number {\n      return memory.get(offset + idx);\n    },\n  };\n}\n\nfunction get(mem: ScreenMemory, x: number, y: number): COLOR {\n  const byte = mem.get(32 * y + ((x / 16) | 0));\n  const bit = byte & (1 << x % 16);\n  return bit === 0 ? WHITE : BLACK;\n}\n\nfunction set(data: Uint8ClampedArray, x: number, y: number, value: COLOR) {\n  const pixel = (y * 512 + x) * 4;\n  const color = value === WHITE ? 255 : 0;\n  data[pixel] = color;\n  data[pixel + 1] = color;\n  data[pixel + 2] = color;\n  data[pixel + 3] = 255;\n}\n\nfunction drawImage(ctx: CanvasRenderingContext2D, memory: ScreenMemory) {\n  const image = assertExists(\n    ctx.getImageData(0, 0, 512, 256),\n    \"Failed to create Context2d\"\n  );\n  for (let col = 0; col < 512; col++) {\n    for (let row = 0; row < 256; row++) {\n      const color = get(memory, col, row);\n      set(image.data, col, row, color);\n    }\n  }\n  ctx.putImageData(image, 0, 0);\n}\n\nexport const Screen = ({ memory }: { memory: ScreenMemory }) => {\n  const canvas = useRef<HTMLCanvasElement>();\n\n  const draw = useCallback(() => {\n    const ctx = canvas.current?.getContext(\"2d\") ?? undefined;\n\n    if (ctx) {\n      drawImage(ctx, memory);\n    }\n  }, [memory]);\n\n  const ctxRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      canvas.current = ref ?? undefined;\n      draw();\n    },\n    [canvas, draw]\n  );\n\n  useClockFrame(draw);\n  useClockReset(() => {\n    canvas.current\n      ?.getContext(\"2d\")\n      ?.clearRect(0, 0, canvas.current.width, canvas.current.height);\n  });\n\n  return (\n    <article className=\"panel\">\n      <header>Screen</header>\n      <main style={{ backgroundColor: \"var(--code-background-color)\" }}>\n        <figure\n          style={{\n            width: \"100%\",\n            maxWidth: \"512px\",\n            boxSizing: \"content-box\",\n            marginInline: \"auto\",\n            margin: \"auto\",\n            borderTop: \"2px solid gray\",\n            borderLeft: \"2px solid gray\",\n            borderBottom: \"2px solid lightgray\",\n            borderRight: \"2px solid lightgray\",\n          }}\n        >\n          <canvas ref={ctxRef} width={512} height={256}></canvas>\n        </figure>\n      </main>\n    </article>\n  );\n};\n","import { useEffect, useMemo, useState } from \"react\";\n\nimport { display } from \"@davidsouther/jiffies/lib/esm/display.js\";\nimport { Clock } from \"@nand2tetris/simulator/chip/clock.js\";\n\nexport function useClock(actions: {\n  tick?: () => void;\n  toggle?: () => void;\n  reset?: () => void;\n}) {\n  const clock = useMemo(() => Clock.get(), []);\n\n  useEffect(() => {\n    const subscription = clock.$.subscribe(() => {\n      actions.tick?.();\n    });\n    return () => subscription.unsubscribe();\n  }, [actions, clock.$]);\n\n  return {\n    toggle() {\n      clock.tick();\n      actions.toggle?.();\n    },\n\n    reset() {\n      clock.reset();\n      actions.reset?.();\n    },\n  };\n}\n\nexport function useClockFrame(frameFinished: () => void) {\n  useEffect(() => {\n    const subscription = Clock.get().frame$.subscribe(() => {\n      frameFinished();\n    });\n    return () => subscription.unsubscribe();\n  }, [frameFinished]);\n}\n\nexport function useClockReset(reset: () => void) {\n  useEffect(() => {\n    const subscription = Clock.get().reset$.subscribe(() => {\n      reset();\n    });\n    return () => subscription.unsubscribe();\n  }, [reset]);\n}\n\nexport function displayClock() {\n  return display(Clock.get());\n}\n\nexport function useClockface() {\n  const [clockface, setClockface] = useState(displayClock());\n\n  useEffect(() => {\n    const subscription = Clock.get().$.subscribe(() => {\n      setClockface(displayClock());\n    });\n    return () => subscription.unsubscribe();\n  }, []);\n\n  return clockface;\n}\n\nexport const Clockface = () => {\n  const clockface = useClockface();\n  return <span style={{ whiteSpace: \"nowrap\" }}>{clockface}</span>;\n};\n","import { isErr, Ok } from \"@davidsouther/jiffies/lib/esm/result.js\";\nimport { CMP } from \"@nand2tetris/simulator/languages/cmp.js\";\n\nexport const compare = (cmp: string, out: string) => {\n  const cmpResult = CMP.parse(cmp);\n  const outResult = CMP.parse(out);\n\n  if (isErr(cmpResult) || isErr(outResult)) {\n    return false;\n  }\n\n  const cmpData = Ok(cmpResult);\n  const outData = Ok(outResult);\n\n  for (let i = 0; i < Math.min(cmpData.length, outData.length); i++) {\n    const cmpI = cmpData[i] ?? [];\n    const outI = outData[i] ?? [];\n\n    for (let j = 0; j < Math.max(cmpI.length, outI.length); j++) {\n      const cmpJ = cmpI[j] ?? \"\";\n      const outJ = outI[j] ?? \"\";\n      if (\n        !(cmpJ?.trim().match(/^\\*+$/) !== null || outJ?.trim() === cmpJ?.trim())\n      ) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n","import produce from \"immer\";\nimport { Dispatch, useEffect, useReducer, useState } from \"react\";\n\nexport function useImmerReducer<\n  T,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Reducers extends Record<string, (state: T, action?: any) => T | void>\n>(reducers: Reducers, initialState: T) {\n  return useReducer(\n    (\n      state: T,\n      command: {\n        action: keyof Reducers;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        payload?: any;\n      }\n    ): T =>\n      produce(state, (draft: T) => {\n        reducers[command.action](draft, command.payload);\n      }),\n    initialState\n  );\n}\n\nexport function useStateInitializer<T>(init: T): [T, Dispatch<T>] {\n  const [state, setState] = useState<T>(init);\n  useEffect(() => {\n    setState(init);\n  }, [init]);\n  return [state, setState];\n}\n","import { Timer } from \"@nand2tetris/simulator/timer.js\";\nimport { ChangeEvent, ReactNode, useEffect, useState } from \"react\";\nimport { useTimer } from \"./timer.js\";\n\nexport const Runbar = (props: {\n  runner: Timer;\n  prefix?: ReactNode;\n  children?: ReactNode;\n  overrideTooltips?: (string | undefined)[];\n  onSpeedChange?: (speed: number) => void;\n}) => {\n  const runner = useTimer(props.runner);\n  const [speedValue, setSpeed] = useState(0);\n\n  const speedValues: Record<number, [number, number]> = {\n    0: [1000, 1],\n    1: [500, 1],\n    2: [16, 1],\n    3: [16, 16666],\n    4: [16, 16666 * 30],\n  };\n\n  useEffect(() => {\n    updateSpeed();\n  }, [speedValue]);\n\n  const updateSpeed = () => {\n    const [speed, steps] = speedValues[speedValue];\n    runner.dispatch({ action: \"setSpeed\", payload: speed });\n    runner.dispatch({ action: \"setSteps\", payload: steps });\n  };\n\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setSpeed(Number(e.target.value));\n    props.onSpeedChange?.(Number(e.target.value));\n  };\n\n  return (\n    <fieldset role=\"group\">\n      {props.prefix}\n      <button\n        className=\"flex-0\"\n        onClick={() => runner.actions.frame()}\n        data-tooltip={props.overrideTooltips?.[0] ?? `Step`}\n        data-placement=\"bottom\"\n      >\n        {/* <Icon name=\"play_arrow\" /> */}\n        ➡️\n      </button>\n      <button\n        className=\"flex-0\"\n        onClick={() =>\n          runner.state.running ? runner.actions.stop() : runner.actions.start()\n        }\n        data-tooltip={\n          runner.state.running\n            ? props.overrideTooltips?.[2] ?? `Pause`\n            : props.overrideTooltips?.[1] ?? `Run`\n        }\n        data-placement=\"bottom\"\n      >\n        {/* <Icon name={runner.state.running ? \"pause\" : \"fast_forward\"} /> */}\n        {runner.state.running ? \"⏸\" : \"️⏩\"}\n      </button>\n      <button\n        className=\"flex-0\"\n        onClick={() => runner.actions.reset()}\n        data-tooltip={props.overrideTooltips?.[3] ?? `Reset`}\n        data-placement=\"bottom\"\n      >\n        {/* <Icon name=\"fast_rewind\" /> */}⏮\n      </button>\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          fontSize: 16,\n          fontWeight: \"normal\",\n        }}\n      >\n        <span style={{ padding: \"0.2rem\" }}>Slow</span>\n        <input\n          type=\"range\"\n          min={0}\n          max={4}\n          step={1}\n          value={speedValue}\n          disabled={runner.state.running}\n          onChange={onChange}\n          style={{ width: \"150px\", padding: \"0.2rem\" }}\n          data-tooltip={\"Execution speed\"}\n          data-placement={\"bottom\"}\n        />\n        <span style={{ padding: \"0.2rem\" }}>Fast</span>\n      </div>\n      {props.children}\n    </fieldset>\n  );\n};\n","import { Timer } from \"@nand2tetris/simulator/timer.js\";\nimport { useImmerReducer } from \"./react.js\";\n\nexport interface TimerStoreState {\n  steps: number;\n  speed: number;\n  running: boolean;\n}\n\nimport { Dispatch, MutableRefObject, useMemo, useRef } from \"react\";\nexport type TimerStoreDispatch = Dispatch<{\n  action: keyof ReturnType<typeof makeTimerStore>[\"reducers\"];\n  payload?: unknown;\n}>;\n\nconst makeTimerStore = (\n  timer: Timer,\n  dispatch: MutableRefObject<TimerStoreDispatch>\n) => {\n  const initialState: TimerStoreState = {\n    running: timer.running,\n    speed: timer.speed,\n    steps: timer.steps,\n  };\n\n  const finishFrame = timer.finishFrame.bind(timer);\n  timer.finishFrame = function () {\n    finishFrame();\n    dispatch.current({ action: \"update\" });\n  };\n\n  const reducers = {\n    update(state: TimerStoreState) {\n      state.running = timer.running;\n      state.speed = timer.speed;\n      state.steps = timer.steps;\n    },\n    setSteps(state: TimerStoreState, steps: number) {\n      state.steps = steps;\n      timer.steps = steps;\n    },\n    setSpeed(state: TimerStoreState, speed: number) {\n      state.speed = speed;\n      timer.speed = speed;\n    },\n  };\n\n  const actions = {\n    frame() {\n      timer.frame();\n    },\n    start() {\n      timer.start();\n      dispatch.current({ action: \"update\" });\n    },\n    stop() {\n      timer.stop();\n      dispatch.current({ action: \"update\" });\n    },\n    reset() {\n      timer.reset();\n      dispatch.current({ action: \"update\" });\n    },\n  };\n\n  return { initialState, reducers, actions };\n};\n\nexport function useTimer(timer: Timer) {\n  const dispatch = useRef<TimerStoreDispatch>(() => undefined);\n\n  const { initialState, reducers, actions } = useMemo(\n    () => makeTimerStore(timer, dispatch),\n    [timer, dispatch]\n  );\n\n  const [state, dispatcher] = useImmerReducer(reducers, initialState);\n\n  dispatch.current = dispatcher;\n\n  return { state, dispatch: dispatch.current, actions };\n}\n","import { Clock } from \"./chip/clock.js\";\n\nexport const MAX_STEPS = 1000;\n\nconst clock = Clock.get();\n\nexport abstract class Timer {\n  frame() {\n    this.tick();\n    this.finishFrame();\n  }\n\n  /// Update the simulation state, but DO NOT perform any UI changes.\n  abstract tick(): boolean;\n\n  /// UI Updates are allowed in finishFrame.\n  finishFrame() {\n    clock.frame();\n  }\n\n  abstract reset(): void;\n\n  abstract toggle(): void;\n\n  steps = 1; // How many steps to take per update\n  speed = 1000; // how often to update, in ms\n  get running() {\n    return this.#running;\n  }\n\n  #running = false;\n  #sinceLastFrame = 0;\n  #lastUpdate = 0;\n  #run = async () => {\n    if (!this.#running) {\n      return;\n    }\n    const now = Date.now();\n    const delta = now - this.#lastUpdate;\n    this.#lastUpdate = now;\n    this.#sinceLastFrame += delta;\n    if (this.#sinceLastFrame > this.speed) {\n      let done = false;\n      // let steps = Math.min(this.steps, MAX_STEPS);\n      let steps = this.steps;\n      const timingLabel = `Timing ${steps} steps`;\n      console.time(timingLabel);\n      while (!done && steps--) {\n        // done = await this.tick();\n        done = this.tick();\n      }\n      console.timeEnd(timingLabel);\n      this.finishFrame();\n      if (done) {\n        this.stop();\n      }\n      this.#sinceLastFrame -= this.speed;\n    }\n    requestAnimationFrame(this.#run);\n  };\n\n  start() {\n    this.#running = true;\n    this.#lastUpdate = Date.now() - this.speed;\n    this.#run();\n    this.toggle();\n  }\n\n  stop() {\n    this.#running = false;\n    this.toggle();\n  }\n}\n"],"names":["ErrorPanel","error","failed","className","open","role","message","shortMessage","UNKNOWN_PARSE_ERROR","Textarea","value","onChange","language","disabled","text","setText","useState","e","target","Monaco","onCursorPositionChange","highlight","currentHighlight","dynamicHeight","lineNumberTransform","theme","useContext","AppContext","monaco","useMonaco","height","setHeight","editor","useRef","decorations","undefined","codeTheme","useCallback","window","matchMedia","matches","doHighlight","current","model","getModel","start","getPositionAt","end","range","Range","fromPositions","nextDecoration","push","options","inlineClassName","revealRangeInCenter","deltaDecorations","makeHighlight","calculateHeight","contentHeight","getContentHeight","useEffect","onMount","ed","updateOptions","fontFamily","fontSize","minimap","enabled","scrollBeyondLastLine","readOnly","lineNumbers","folding","onDidChangeCursorPosition","index","getOffsetAt","position","succeeded","setModelMarkers","line","column","exec","groups","startLineNumber","Number","endLineNumber","startColumn","endColumn","getLineContent","substring","match","length","severity","v","Editor","style","grammar","setError","parse","parsed","doParse","useMemo","debounce","onChangeCB","canUse","wants","Panel","props","join","header","children","footer","Accordian","summary","KeyMap","Enter","Backspace","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End","PageUp","PageDown","Insert","Delete","Escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","keyDisplays","Keyboard","keyboard","update","setEnabled","character","setCharacter","bits","setBits","getKey","currentKey","onKeyDown","event","key","getKeyDisplay","keypress","mapping","code","charCodeAt","keyPressToHackCharacter","setKey","onKeyUp","clearKey","addEventListener","removeEventListener","_jsxs","_jsx","RegisterComponent","name","onClick","Mode","mode","setMode","setValue","useStateInitializer","view","cursor","amount","block","Widths","display","width","doSelect","ref","select","doChange","edit","zIndex","left","marginTop","color","onFocus","onBlur","onKeyPress","type","defaultValue","render","doScroll","scrollTop","state","get","totalHeight","toleranceHeight","bufferedItems","settings","itemHeight","minIndex","maxIndex","Math","floor","data","offset","limit","max","min","getData","topPaddingHeight","bottomPaddingHeight","viewportRef","startState","reducer","MAX_SAFE_INTEGER","startIndex","count","tolerance","fillVirtualScrollSettings","adapter","itemsAbove","viewportHeight","initialState","dispatchScroll","useReducer","row","initialScroll","div","rows","map","d","rowKey","overflowY","overflowAnchor","onScroll","MemoryBlock","memory","jmp","editable","justifyLeft","format","dec","size","i","MemoryCell","VirtualScroll","rounded","background","whiteSpace","padStart","ceil","log10","flex","textAlign","InlineEdit","newValue","Memory","displayEnabled","onUpload","fmt","setFormat","setJmp","goto","setGoto","highlighted","setHighlighted","renderKey","setRenderKey","jumpTo","isNaN","parseInt","isFinite","fileUploadRef","doLoad","click","setStatus","BaseContext","upload","async","files","file","source","loader","endsWith","loadHack","loadAsm","loadBlob","bytes","loadBytes","rerenderMemoryBlock","useClockReset","reset","placeholder","FORMATS","option","bin","hex","asm","doFormat","WHITE","set","x","y","pixel","Screen","canvas","draw","ctx","getContext","image","assertExists","getImageData","col","putImageData","drawImage","ctxRef","useClockFrame","clearRect","backgroundColor","maxWidth","boxSizing","marginInline","margin","borderTop","borderLeft","borderBottom","borderRight","frameFinished","subscription","Clock","frame$","subscribe","unsubscribe","reset$","displayClock","Clockface","clockface","setClockface","$","useClockface","compare","cmp","out","cmpResult","CMP","outResult","isErr","cmpData","Ok","outData","cmpI","outI","j","cmpJ","outJ","trim","useImmerReducer","reducers","command","produce","draft","action","payload","init","setState","Runbar","runner","timer","dispatch","actions","running","speed","steps","finishFrame","bind","setSteps","setSpeed","frame","stop","makeTimerStore","dispatcher","useTimer","speedValue","speedValues","updateSpeed","prefix","overrideTooltips","alignItems","justifyContent","fontWeight","padding","step","onSpeedChange","clock","Timer","this","tick","now","Date","delta","done","timingLabel","console","time","timeEnd","requestAnimationFrame","toggle"],"sourceRoot":""}
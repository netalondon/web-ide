"use strict";(globalThis.webpackChunk_nand2tetris_web=globalThis.webpackChunk_nand2tetris_web||[]).push([[131],{5131:(e,t,n)=>{n.r(t),n.d(t,{Compiler:()=>A,default:()=>$});var r=n(4621),a=n(5874),i=n(3761),s=n(4533),o=n(3977);const l='Jack <: Base {\n    Root := Class\n\n    Class = "class" jackIdentifier OpenBrace ClassVarDec* SubroutineDec* CloseBrace\n\n    Type = "int" | "char" | "boolean" | jackIdentifier\n\n    ClassVarType = "static" | "field"\n    ClassVarDec = ClassVarType Type jackIdentifier TrailingIdentifier* Semi\n    TrailingIdentifier = Comma jackIdentifier\n\n    ReturnType = Type | "void"\n    SubroutineType = "constructor" | "function" | "method" \n    SubroutineDec = SubroutineType ReturnType jackIdentifier OpenParen ParameterList CloseParen SubroutineBody\n\n\n    Parameter = Type jackIdentifier\n    Parameters = Parameter TrailingParameter*\n    TrailingParameter = Comma Parameter\n    ParameterList = Parameters?\n\n    SubroutineBody = OpenBrace VarDec* Statement* CloseBrace\n\n    VarDec = "var" Type jackIdentifier TrailingIdentifier* Semi\n\n    Statement = LetStatement | IfStatement | WhileStatement | DoStatement | ReturnStatement\n\n    LetStatement = "let" jackIdentifier ArrayIndex? Equal Expression Semi\n    ArrayIndex = OpenSquare Expression CloseSquare\n\n    IfStatement = "if" OpenParen Expression CloseParen OpenBrace Statement* CloseBrace ElseBlock?\n    ElseBlock = "else" OpenBrace Statement* CloseBrace\n\n    WhileStatement = "while" OpenParen Expression CloseParen OpenBrace Statement* CloseBrace\n    DoStatement = "do" SubroutineCall Semi\n    ReturnStatement = "return" Expression? Semi\n\n    op = "+" | "-" | "*" | "/" | "&" | "|" | "<" | ">" | "="\n    ExpressionPart = op Term\n    Expression = Term ExpressionPart*\n\n    integerConstant = digit+\n    stringConstant = doubleQuote (~doubleQuote ~newline any)* doubleQuote\n    keywordConstant = "true" | "false" | "null" | "this"\n\n    ArrayAccess = jackIdentifier ArrayIndex\n    GroupedExpression = OpenParen Expression CloseParen\n\n    unaryOp = "-" | "~"\n    UnaryExpression = unaryOp Term\n\n    Term = integerConstant | stringConstant | keywordConstant | SubroutineCall  | ArrayAccess | jackIdentifier | GroupedExpression | UnaryExpression\n\n    CompoundIdentifier = jackIdentifier Dot jackIdentifier\n    SubroutineName = CompoundIdentifier | jackIdentifier\n    SubroutineCall = SubroutineName OpenParen ExpressionList CloseParen\n\n    ExpressionList = Expressions?\n    Expressions = Expression TrailingExpression*\n    TrailingExpression = Comma Expression\n\n    jackIdentifier = letter (alnum | underscore)*\n}',c=s.A.grammar(l,o.lN),u=c.extendSemantics(o.JE);function d(e){return e.children.map((e=>e.statement))}u.addAttribute("Root",{Root(e){return this.class}}),u.addAttribute("class",{Class:(e,t,n,r,a,i)=>({name:t.sourceString,varDecs:r.children.map((e=>e.classVarDec)),subroutines:a.children.map((e=>e.subroutineDec))})}),u.addAttribute("classVarDec",{ClassVarDec:(e,t,n,r,a)=>({varType:e.sourceString,type:t.sourceString,names:[n.sourceString,...r.children.map((e=>e.child(1).sourceString))]})}),u.addAttribute("subroutineDec",{SubroutineDec:(e,t,n,r,a,i,s)=>({type:e.sourceString,returnType:t.sourceString,name:n.sourceString,parameters:a.parameterList,body:s.subroutineBody})}),u.addAttribute("parameter",{Parameter:(e,t)=>({type:e.sourceString,name:t.sourceString})}),u.addAttribute("parameterList",{ParameterList:e=>e.child(0)?.parameters??[]}),u.addAttribute("parameters",{Parameters:(e,t)=>[e.parameter,...t.children.map((e=>e.child(1).parameter))]}),u.addAttribute("subroutineBody",{SubroutineBody:(e,t,n,r)=>({varDecs:t.children.map((e=>e.varDec)),statements:d(n)})}),u.addAttribute("varDec",{VarDec:(e,t,n,r,a)=>({type:t.sourceString,names:[n.sourceString,...r.children.map((e=>e.child(1).sourceString))]})}),u.addAttribute("statement",{LetStatement:(e,t,n,r,a,i)=>({statementType:"letStatement",name:t.sourceString,arrayIndex:n?.child(0)?.child(1)?.expression,value:a.expression}),IfStatement:(e,t,n,r,a,i,s,o)=>({statementType:"ifStatement",condition:n.expression,body:d(i),else:o.child(0)?.else??[]}),WhileStatement:(e,t,n,r,a,i,s)=>({statementType:"whileStatement",condition:n.expression,body:d(i)}),DoStatement:(e,t,n)=>({statementType:"doStatement",call:t.term}),ReturnStatement:(e,t,n)=>({statementType:"returnStatement",value:t.children.length>0?t.child(0).expression:void 0})}),u.addAttribute("else",{ElseBlock:(e,t,n,r)=>d(n)}),u.addAttribute("term",{integerConstant:e=>({termType:"numericLiteral",value:Number(e.sourceString)}),stringConstant(e,t,n){return{termType:"stringLiteral",value:this.sourceString.slice(1,-1)}},keywordConstant(e){return{termType:"keywordLiteral",value:this.sourceString}},SubroutineCall:(e,t,n,r)=>({termType:"subroutineCall",name:e.sourceString,parameters:n.expressionList}),ArrayAccess:(e,t)=>({termType:"arrayAccess",name:e.sourceString,index:t.child(1).expression}),jackIdentifier:(e,t)=>({termType:"variable",name:`${e.sourceString}${t.sourceString}`}),GroupedExpression:(e,t,n)=>({termType:"groupedExpression",expression:t.expression}),UnaryExpression:(e,t)=>({termType:"unaryExpression",op:e.sourceString,term:t.term})}),u.addAttribute("expressionList",{ExpressionList:e=>e.child(0)?.expressions??[]}),u.addAttribute("expressions",{Expressions:(e,t)=>[e.expression,...t.children.map((e=>e.child(1).expression))]}),u.addAttribute("expression",{Expression:(e,t)=>({nodeType:"expression",term:e.term,rest:t.children.map((e=>e.expressionPart))})}),u.addAttribute("expressionPart",{ExpressionPart:(e,t)=>({op:e.sourceString,term:t.term})});const m={parser:c,grammar:l,semantics:u,parse:(0,o.Q5)(c,u,(e=>e.class))};function p(e){const t=m.parse(e);if((0,a.ys)(t))return t;try{return(new b).compile((0,a.Ok)(t))}catch(n){return console.error(n),(0,a._)(n)}}const h={"+":"add","-":"sub","*":"call Math.multiply 2","/":"call Math.divide 2","&":"and","|":"or","<":"lt",">":"gt","=":"eq"},g={"-":"neg","~":"not"};class b{instructions=[];globalSymbolTable={};localSymbolTable={};className="";labelNum=0;fieldNum=0;staticNum=0;localNum=0;get output(){return Array.from(this.instructions)}varData(e){return this.localSymbolTable[e]||this.globalSymbolTable[e]}var(e){const t=this.varData(e);return`${t?.segment} ${t?.index}`}write(...e){this.instructions.push(...e)}getLabel(){const e=`L${this.labelNum}`;return this.labelNum+=1,e}compile(e){this.className=e.name;for(const t of e.varDecs)this.compileClassVarDec(t);for(const t of e.subroutines)this.compileSubroutineDec(t);return(0,a.Ok)(this.instructions.join("\n"))}compileClassVarDec(e){for(const t of e.names)"field"==e.varType?(this.globalSymbolTable[t]={type:e.type,segment:"this",index:this.fieldNum},this.fieldNum+=1):(this.globalSymbolTable[t]={type:e.type,segment:"static",index:this.staticNum},this.staticNum+=1)}compileVarDec(e){for(const t of e.names)this.localSymbolTable[t]={type:e.type,segment:"local",index:this.localNum},this.localNum+=1}registerArgs(e,t=!1){let n=0;for(const r of e)this.localSymbolTable[r.name]={type:r.type,segment:"argument",index:n+(t?1:0)},n+=1}compileSubroutineDec(e){switch(e.type){case"method":this.compileMethod(e);break;case"constructor":this.compileConstructor(e);break;case"function":this.compileFunction(e)}}compileSubroutineStart(e,t=!1){this.localSymbolTable={},this.localNum=0,this.registerArgs(e.parameters,t);const n=e.body.varDecs.map((e=>e.names.length)).reduce(((e,t)=>e+t),0);this.write(`function ${this.className}.${e.name} ${n}`);for(const r of e.body.varDecs)this.compileVarDec(r)}compileFunction(e){this.compileSubroutineStart(e),this.compileStatements(e.body.statements)}compileMethod(e){this.compileSubroutineStart(e,!0),this.write("push argument 0","pop pointer 0"),this.compileStatements(e.body.statements)}compileConstructor(e){this.compileSubroutineStart(e),this.write(`push constant ${this.fieldNum}`,"call Memory.alloc 1","pop pointer 0"),this.compileStatements(e.body.statements)}compileExpression(e){this.compileTerm(e.term);for(const t of e.rest)this.compileTerm(t.term),this.compileOp(t.op)}compileOp(e){this.write(h[e])}compileTerm(e){switch(e.termType){case"numericLiteral":this.write(`push constant ${e.value}`);break;case"stringLiteral":this.compileStringLiteral(e.value);break;case"variable":this.write(`push ${this.var(e.name)}`);break;case"keywordLiteral":this.compileKeywordLiteral(e.value);break;case"subroutineCall":this.compileSubroutineCall(e);break;case"arrayAccess":this.compileExpression(e.index),this.write(`push ${this.var(e.name)}`,"add","pop pointer 1","push that 0");break;case"groupedExpression":this.compileExpression(e.expression);break;case"unaryExpression":this.compileTerm(e.term),this.write(g[e.op])}}compileSubroutineCall(e){let t="",n="",r="",a=!0;if(e.name.includes(".")){const[i,s]=e.name.split(".",2);r=s;const o=this.varData(i);o?(t=this.var(i),n=o.type):(a=!1,n=i)}else t="pointer 0",n=this.className,r=e.name;a&&this.write(`push ${t}`);for(const i of e.parameters)this.compileExpression(i);this.write(`call ${n}.${r} ${e.parameters.length+(a?1:0)}`)}compileStringLiteral(e){this.write(`push constant ${e.length}`,"call String.new 1");for(let t=0;t<e.length;t++)this.write(`push constant ${e.charCodeAt(t)}`,"call String.appendChar 2")}compileKeywordLiteral(e){switch(e){case"true":this.write("push constant 1");break;case"false":case"null":this.write("push constant 0");break;case"this":this.write("push pointer 0")}}compileStatements(e){for(const t of e)this.compileStatement(t)}compileStatement(e){switch(e.statementType){case"doStatement":this.compileDoStatement(e);break;case"ifStatement":this.compileIf(e);break;case"letStatement":this.compileLet(e);break;case"returnStatement":this.compileReturn(e);break;case"whileStatement":this.compileWhile(e)}}compileReturn(e){e.value?this.compileExpression(e.value):this.write("push constant 0"),this.write("return")}compileLet(e){e.arrayIndex?(this.compileExpression(e.arrayIndex),this.write(`push ${this.var(e.name)}`,"add"),this.compileExpression(e.value),this.write("pop temp 0","pop pointer 1","push temp 0","pop that 0")):(this.compileExpression(e.value),this.write(`pop ${this.var(e.name)}`))}compileDoStatement(e){this.compileSubroutineCall(e.call),this.write("pop temp 0")}compileIf(e){const t=this.getLabel(),n=this.getLabel();this.compileExpression(e.condition),this.write("not",`if-goto ${n}`),this.compileStatements(e.body),this.write(`goto ${t}`,`label ${n}`),this.compileStatements(e.else),this.write(`label ${t}`)}compileWhile(e){const t=this.getLabel(),n=this.getLabel();this.write(`label ${t}`),this.compileExpression(e.condition),this.write("not",`if-goto ${n}`),this.compileStatements(e.body),this.write(`goto ${t}`,`label ${n}`)}}var f=n(8878),y=n(8177);function S(e){return`/jack/${e}.jack`}function v(e,t,n){return{initialState:{files:{},selected:""},reducers:{setFile(e,{name:t,content:n}){n??="";const r=p(n);e.files[t]={content:n,valid:!(0,a.ys)(r),error:(0,a.ys)(r)?(0,a._)(r):void 0}},deleteFile(e,t){delete e.files[t]},copyFile(e,{oldName:t,newName:n}){e.files[n]=e.files[t]},setSelected(e,t){e.selected=t}},actions:{async editFile(t,r){n.current({action:"setFile",payload:{name:t,content:r}}),await e.writeFile(S(t),r)},async addFile(t,r){n.current({action:"setFile",payload:{name:t,content:r}}),await e.writeFile(S(t),r??""),n.current({action:"setSelected",payload:t})},async deleteFile(e){n.current({action:"deleteFile",payload:e}),function(e){for(const t of Object.keys(localStorage))t.startsWith(e)&&localStorage.removeItem(t)}(S(e))},async reset(){for(const t of await e.scandir("/jack"))await this.deleteFile(t.name.replace(".jack",""))},async renameFile(t,r){n.current({action:"copyFile",payload:{oldName:t,newName:r}});const a=await e.readFile(S(t));await e.writeFile(S(r),a),await this.deleteFile(t)},async _loadFiles(){const t=(await e.scandir("/jack")).filter((e=>e.isFile()&&e.name.endsWith(".jack")));for(const r of t)n.current({action:"setFile",payload:{name:r.name.replace(".jack",""),content:await e.readFile(`/jack/${r.name}`)}});n.current({action:"setSelected",payload:t[0].name.replace(".jack","")})},async initialize(){0==(await e.scandir("/jack")).length&&(e.mkdir("/jack"),e.writeFile(S("Main"),"")),await this._loadFiles()}}}}var x=n(5608),C=n.n(x),k=n(8330),j=n(3499),w=n(8029),N=n(2675),E=n(4280),T=n(782);const A=()=>{const{setStatus:e}=(0,f.useContext)(i.L),{tracking:t,toolStates:n,setTitle:s}=(0,f.useContext)(w.BR),{state:o,dispatch:l,actions:c}=function(){const{setStatus:e,fs:t}=(0,f.useContext)(i.L),n=(0,f.useRef)((()=>{})),{initialState:r,reducers:a,actions:s}=(0,f.useMemo)((()=>v(t,0,n)),[e,n]),[o,l]=(0,y.A)(a,r);return n.current=l,{state:o,dispatch:n,actions:s}}(),u=(0,f.useRef)(null),d=(0,f.useRef)(null),m=(0,f.useRef)(null);(0,f.useEffect)((()=>{c.initialize()}),[c]),(0,f.useEffect)((()=>{s(n.compiler.title)}));const[h,g]=(0,f.useState)(!1);(0,f.useEffect)((()=>{var t,n;h&&e(S()?"Compiled successfully":null!==(t=null===(n=o.files[o.selected].error)||void 0===n?void 0:n.message)&&void 0!==t?t:"")}));const b=(0,f.useCallback)((e=>{l.current({action:"setSelected",payload:e}),t.trackEvent("tab","change",e)}),[t]),S=()=>Object.keys(o.files).map((e=>o.files[e].valid)).reduce(((e,t)=>e&&t),!0),x=()=>{const e=[];for(const t of Object.keys(o.files)){let n=(0,a.oA)(p(o.files[t].content));n=`// Compiled ${t}.jack:\n`.concat(n),e.push({name:t,content:n})}return e};return(0,T.jsxs)("div",{className:"Page CompilerPage grid",children:[(0,T.jsx)("a",{style:{display:"none"},ref:d}),(0,T.jsx)("input",{style:{display:"none"},ref:u,type:"file",webkitdirectory:"",onChange:async e=>{if(!e.target.files||0==e.target.files.length)return;await c.reset();for(const n of e.target.files)if(n.name.endsWith(".jack")){const e=await n.text();await c.addFile(n.name.replace(".jack",""),e)}const t=e.target.files[0].webkitRelativePath.split("/")[0];n.compiler.setTitle(`${t} / *.jack`)}}),(0,T.jsx)(k.N_,{ref:m,to:j.Ay.vm.href,style:{display:"none"}}),(0,T.jsx)(E.Z,{className:"code",header:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{children:(0,T.jsx)(r.x6,{id:"Source"})}),(0,T.jsxs)("div",{className:"flex row flex-1",children:[(0,T.jsx)("button",{className:"flex-0",onClick:()=>{var e;null===(e=u.current)||void 0===e||e.click()},children:"\ud83d\udcc2"}),(0,T.jsx)("button",{className:"flex-0","data-tooltip":"Compiles into VM code","data-placement":"bottom",onClick:()=>{g(!0)},children:"Compile"}),(0,T.jsx)("button",{className:"flex-0",disabled:!h||!S(),"data-tooltip":"Loads the compiled code into the VM emulators","data-placement":"right",onClick:()=>{var e,t;n.vm.setTitle(null===(e=n.compiler.title)||void 0===e?void 0:e.replace("jack","vm")),n.vm.setFiles(x()),null===(t=m.current)||void 0===t||t.click()},children:"Run"}),(0,T.jsx)("button",{className:"flex-0",disabled:!h||!S(),"data-tooltip":"Downloads the compiled VM code","data-placement":"bottom",onClick:async()=>{if(!d.current)return;const e=new(C());for(const r of x())e.file(`${r.name}.vm`,r.content);const t=await e.generateAsync({type:"blob"}),n=URL.createObjectURL(t);d.current.href=n,d.current.download="VMcode",d.current.click(),URL.revokeObjectURL(n)},children:"Download"})]})]}),children:(0,T.jsx)("div",{role:"tablist",style:{"--tab-count":`${Object.keys(o.files).length}`},children:Object.keys(o.files).map((e=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{role:"tab",id:`jack-tab-${e}`,"aria-controls":`jack-tabpanel-${e}`,"aria-selected":o.selected===e,style:{backgroundColor:h&&!o.files[e].valid?"#ffaaaa":void 0},children:(0,T.jsxs)("label",{children:[(0,T.jsx)("input",{type:"radio",name:"tabs","aria-controls":`jack-tabpanel-${e}`,value:e,checked:o.selected===e,onChange:()=>b(e)}),e,".jack"]})},`tab-${e}`),(0,T.jsx)("div",{role:"tabpanel","aria-labelledby":`jack-tab-${e}`,id:`jack-tabpanel-${e}`,children:(0,T.jsx)(N.K,{value:o.files[e].content,disabled:!0,onChange:e=>{},error:h?o.files[e].error:void 0,language:"jack"})},`tabpanel-${e}`)]})))})})]})},$=A},2675:(e,t,n)=>{n.d(t,{K:()=>d});var r=n(4621),a=n(7983),i=n(8878),s=n(8029),o=n(782);const l=({error:e})=>e?(0,o.jsxs)("details",{className:"ErrorPanel",open:!0,children:[(0,o.jsx)("summary",{role:"button",className:"secondary",children:(0,o.jsx)(r.x6,{id:"Parse Error"})}),(0,o.jsx)("pre",{children:(0,o.jsx)("code",{children:null===e||void 0===e?void 0:e.message})})]}):(0,o.jsx)(o.Fragment,{}),c=({value:e,onChange:t,language:n,disabled:r=!1})=>{const[a,s]=(0,i.useState)(e);return(0,o.jsx)("textarea",{"data-testid":`editor-${n}`,disabled:r,value:a,onChange:e=>{var n;const r=null===(n=e.target)||void 0===n?void 0:n.value;s(r),t(r)}})},u=({value:e,onChange:t,onCursorPositionChange:n,language:r,error:l,disabled:c=!1,highlight:u,highlightType:d="highlight",customDecorations:m=[],dynamicHeight:p=!1,alwaysRecenter:h=!0,lineNumberTransform:g})=>{const{theme:b}=(0,i.useContext)(s.BR),f=(0,a.dJ)(),[y,S]=(0,i.useState)(0),v=(0,i.useRef)(),x=(0,i.useRef)([]),C=(0,i.useRef)(void 0),k=(0,i.useRef)([]),j=(0,i.useCallback)((()=>("system"===b?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"===b)?"vs-dark":"vs"),[b]),w=(0,i.useCallback)((()=>{var e;let t;if("number"==typeof C.current){var n,r,a;const e=null!==(n=null===(r=v.current)||void 0===r||null===(a=r.getModel())||void 0===a?void 0:a.getLineCount())&&void 0!==n?n:0;if(C.current<=e){var i,s,o,l,c,u,m,p,g;t={start:null!==(i=null===(s=v.current)||void 0===s||null===(o=s.getModel())||void 0===o?void 0:o.getOffsetAt({lineNumber:C.current,column:0}))&&void 0!==i?i:0,end:C.current==e?null!==(l=null===(c=v.current)||void 0===c||null===(u=c.getModel())||void 0===u?void 0:u.getValueLength())&&void 0!==l?l:0:(null!==(m=null===(p=v.current)||void 0===p||null===(g=p.getModel())||void 0===g?void 0:g.getOffsetAt({lineNumber:C.current+1,column:0}))&&void 0!==m?m:1)-1,line:C.current}}}else t=C.current;x.current=((e,t,n,r,a,i="highlight",s=!0)=>{if(!t||!n)return a;const o=t.getModel();if(!o)return a;const l=o.getPositionAt(n.start),c=o.getPositionAt(n.end),u=null===e||void 0===e?void 0:e.Range.fromPositions(l,c),d=[];u&&(d.push({range:u,options:{inlineClassName:"error"==i?"error-highlight":"highlight"}}),n.start!=n.end&&(!s&&((e,t)=>{for(const r of null!==(n=null===e||void 0===e?void 0:e.getVisibleRanges())&&void 0!==n?n:[]){var n;if(r.containsRange(t))return!0}return!1})(t,u)||t.revealRangeInCenter(u)));for(const m of r){const t=null===e||void 0===e?void 0:e.Range.fromPositions(o.getPositionAt(m.span.start),o.getPositionAt(m.span.end));t&&d.push({range:t,options:{inlineClassName:m.cssClass}})}return t.deltaDecorations(a,d)})(f,v.current,null!==(e=t)&&void 0!==e?e:{start:0,end:0,line:0},k.current,x.current,d,h)}),[x,f,v,C,d]),N=()=>{if(p){var e;const t=null===(e=v.current)||void 0===e?void 0:e.getContentHeight();t&&S(t)}};(0,i.useEffect)((()=>{C.current=u,w()}),[u]),(0,i.useEffect)((()=>{k.current=m,w()}),[m]);const E=(0,i.useCallback)((e=>{var t,r;v.current=e,null===(t=v.current)||void 0===t||t.updateOptions({fontFamily:'"JetBrains Mono", source-code-pro, Menlo, Monaco,\n      Consolas, "Roboto Mono", "Ubuntu Monospace", "Noto Mono", "Oxygen Mono",\n      "Liberation Mono", monospace, "Apple Color Emoji", "Segoe UI Emoji",\n      "Segoe UI Symbol", "Noto Color Emoji"',fontSize:16,minimap:{enabled:!1},theme:j(),scrollBeyondLastLine:!1,readOnly:c,lineNumbers:null!==g&&void 0!==g?g:"on",folding:!1,quickSuggestions:{other:"inline"},renderValidationDecorations:"on"}),w(),N(),null===(r=v.current)||void 0===r||r.onDidChangeCursorPosition((e=>{var t,r;const a=null===(t=v.current)||void 0===t||null===(r=t.getModel())||void 0===r?void 0:r.getOffsetAt(e.position);void 0!==a&&(null===n||void 0===n||n(a))}))}),[j]);(0,i.useEffect)((()=>{void 0!==v.current&&v.current.updateOptions({lineNumbers:null!==g&&void 0!==g?g:"on"})}),[g]),(0,i.useEffect)((()=>{void 0!==v.current&&v.current.updateOptions({theme:j()})}),[v,j]),(0,i.useEffect)((()=>{void 0!==v.current&&v.current.updateOptions({readOnly:c,renderValidationDecorations:"on"})}),[v,c]),(0,i.useEffect)((()=>{if(void 0===v.current)return;if(null===f)return;const e=v.current.getModel();if(null===e)return;if(void 0===l||void 0===l.span)return void f.editor.setModelMarkers(e,r,[]);const t=e.getPositionAt(l.span.start),n=e.getPositionAt(l.span.end);f.editor.setModelMarkers(e,r,[{message:l.message,startColumn:t.column,startLineNumber:t.lineNumber,endColumn:n.column,endLineNumber:n.lineNumber,severity:8}])}),[l,v,f,r]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.Ay,{value:e,onChange:(e="")=>{N(),t(e)},language:r,onMount:E,height:p?y:void 0})})},d=({className:e="",style:t={},disabled:n=!1,value:r,error:a,onChange:d,onCursorPositionChange:m,grammar:p,language:h,highlight:g,highlightType:b="highlight",customDecorations:f=[],dynamicHeight:y=!1,alwaysRecenter:S=!0,lineNumberTransform:v})=>{const{monaco:x}=(0,i.useContext)(s.BR);return(0,o.jsx)("div",{className:`Editor ${y?"dynamic-height":""} ${e}`,style:t,children:x.canUse&&x.wants?(0,o.jsx)(u,{value:r,onChange:d,onCursorPositionChange:m,language:h,error:a,disabled:n,highlight:g,highlightType:b,customDecorations:f,dynamicHeight:y,alwaysRecenter:S,lineNumberTransform:v}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c,{value:r,onChange:d,language:h,disabled:n}),(0,o.jsx)(l,{error:a})]})})}},4280:(e,t,n)=>{n.d(t,{Z:()=>a,p:()=>i});var r=n(782);const a=e=>{var t;return(0,r.jsxs)("article",{className:["panel",null!==(t=e.className)&&void 0!==t?t:""].join(" "),children:[e.header&&(0,r.jsx)("header",{children:e.header}),(0,r.jsx)("main",{children:e.children}),e.footer&&(0,r.jsx)("footer",{children:e.footer})]})},i=e=>{var t;return(0,r.jsxs)("details",{className:null!==(t=e.className)&&void 0!==t?t:"",open:e.open,style:e.style,children:[(0,r.jsx)("summary",{children:(0,r.jsx)("div",{className:"flex row align-baseline",children:e.summary})}),e.children]})}},8177:(e,t,n)=>{n.d(t,{A:()=>i,b:()=>s});var r=n(8727),a=n(8878);function i(e,t){return(0,a.useReducer)(((t,n)=>(0,r.Ay)(t,(t=>{e[n.action](t,n.payload)}))),t)}function s(e){const[t,n]=(0,a.useState)(e);return(0,a.useEffect)((()=>{n(e)}),[e]),[t,n]}},3977:(e,t,n)=>{n.d(t,{JE:()=>o,$5:()=>c,lN:()=>s,Q5:()=>u,Ln:()=>d});var r=n(5874),a=n(4533),i=n(7844);const s={Base:a.A.grammar('\nBase {\n  Root = Value*\n\n  At = at\n  Bang = bang\n  Bar = bar\n  CloseAngle = closeAngle\n  CloseBrace = closeBrace\n  CloseParen = closeParen\n  CloseSquare = closeSquare\n  Comma = comma\n  Dollar = dollar\n  Dot = dot\n  DoubleQuote = doubleQuote\n  Equal = equal\n  OpenAngle = openAngle\n  OpenBrace = openBrace\n  OpenParen = openParen\n  OpenSquare = openSquare\n  Percent = percent\n  Semi = semi\n  Underscore = underscore\n\n  at = "@"\n  bang = "!"\n  bar = "|"\n  closeAngle = ">"\n  closeBrace = "}"\n  closeParen = ")"\n  closeSquare = "]"\n  comma = ","\n  dollar = "$"\n  dot = "."\n  doubleQuote = "\\""\n  equal = "="\n  minus = "-"\n  newline = "\\r"? "\\n"\n  openAngle = "<"\n  openBrace = "{"\n  openParen = "("\n  openSquare = "["\n  percent = "%"\n  semi = ";"\n  underscore = "_"\n\n  Value = identifier | number | boolean\n\n  boolean = true | false\n  True = true\n  False = false\n  true = "true"\n  false = "false"\n\n  Name = identifier\n  identifier = (letter|underscore|dot|dollar) (alnum|underscore|dot|dollar)*\n\n  Number = number\n  number = hexNumber | decNumber | binNumber\n  binNumber = ("%B") ("0"|"1")+\n  hexNumber = ("%X") hexDigit+\n  decNumber = ("%D")? (wholeDec | realDec)\n  wholeDec = minus? digit+\n  realDec = minus? digit* "." digit+\n\n  String = DoubleQuote (~doubleQuote any)* doubleQuote\n  \n  spaces := (lineComment | comment | space)*\n  commentStart = "/*"\n  commentEnd = "*/"\n  comment = commentStart (~commentEnd any)* commentEnd\n  lineCommentStart = "//"\n  lineComment = lineCommentStart (~"\\n" any)*\n\n  List<elem, sep> = NonemptyListOf<elem, sep> sep?\n  EmptyList<elem, sep> = EmptyList<elem, sep> sep?\n}')},o=s.Base.createSemantics();o.extendOperation("asIteration",{List:(e,t)=>e.asIteration()}),o.addAttribute("value",{decNumber:(e,t)=>(0,i.ZR)(t.sourceString),wholeDec:(e,t)=>(0,i.ZR)(t.sourceString),binNumber:(e,t)=>(0,i.Yp)(t.sourceString),hexNumber:(e,t)=>(0,i.l8)(t.sourceString),Number:e=>e.value,Name:e=>e.name,identifier(e,t){return this.sourceString}}),o.addAttribute("name",{identifier(e,t){return this.sourceString},Name(e){return this.child(0)?.name}}),o.addAttribute("String",{String:(e,t,n)=>t.sourceString});const l="HDL statement has a syntax error";function c(e,t){const n=e.match(/Line \d+, col \d+: (?<message>.*)/),r=n?.groups?.message?n.groups.message:e;return{message:`${void 0!=t?.line?`Line ${t.line}: `:""}${r}`,span:t}}function u(e,t,n=(({root:e})=>e)){return function(a){try{const i=e.match(a);if(i.succeeded()){const e=t(i),a=n(e);return(0,r.Ok)(a)}return(0,r._)(c(i.shortMessage??l,d(i.getInterval())))}catch(i){return(0,r._)(i)}}}function d(e){return{start:e.startIdx,end:e.endIdx,line:e.getLineAndColumn().lineNum}}},7844:(e,t,n)=>{n.d(t,{FN:()=>p,Yp:()=>c,ZR:()=>l,_Q:()=>u,ad:()=>h,e5:()=>m,l8:()=>o,uh:()=>d,xu:()=>g});const r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];function a(e){return r[e]??"X"}function i(e){switch(e){case 0:return"0000";case 1:return"0001";case 2:return"0010";case 3:return"0011";case 4:return"0100";case 5:return"0101";case 6:return"0110";case 7:return"0111";case 8:return"1000";case 9:return"1001";case 10:return"1010";case 11:return"1011";case 12:return"1100";case 13:return"1101";case 14:return"1110";case 15:return"1111";default:return"erro"}}function s(e,t){return 65535&parseInt(e.replace(/[^\d a-f A-F +-.]/g,""),t)}function o(e){return s(e,16)}function l(e){return s(e,10)}function c(e){return s(e.replaceAll(" ",""),2)}function u(e){return e.toUpperCase().includes("X")?o(e):l(e)}function d(e){return`0x${a((61440&e)>>12)}${a((3840&e)>>8)}${a((240&e)>>4)}${a(15&e)}`}function m(e,t=16){return`${i((61440&e)>>12)}${i((3840&e)>>8)}${i((240&e)>>4)}${i(15&e)}`.substring(16-t)}function p(e){return 32768===(e&=65535)?"-32768":32768&e?`-${e=1+~e&32767}`:`${e}`}function h(e){return`${e&=65535}`}function g(e,t){let n=~((e&=65535)&(t&=65535));return n&=65535,n}}}]);
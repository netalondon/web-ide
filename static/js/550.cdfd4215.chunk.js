"use strict";(globalThis.webpackChunk_nand2tetris_web=globalThis.webpackChunk_nand2tetris_web||[]).push([[550],{9267:(t,e,s)=>{s.d(e,{B:()=>x});var n=s(4621),i=s(7365),a=s(7022),r=s(3761),o=s(7589),l=s(6554),c=s(1091),d=s(8878),u=s(8029),h=s(3508),p=s(2675),m=s(4280),g=s(782);const f="skipTestEditWarning",x=({runner:t,tst:[e,s,x],cmp:[b,v],out:[y],setPath:C,disabled:S=!1,defaultTst:w,defaultCmp:T,showClear:_=!1,onSpeedChange:O,compileTest:k})=>{var I,j;const{fs:E,setStatus:A}=(0,d.useContext)(r.L),{filePicker:L,tracking:R}=(0,d.useContext)(u.BR),[N,F]=(0,d.useState)(!0),M=(0,d.useRef)();(0,d.useEffect)((()=>(M.current=new class extends c.M{async reset(){var e;await(null===(e=t.current)||void 0===e?void 0:e.reset()),F(!0)}finishFrame(){var e;super.finishFrame(),null===(e=t.current)||void 0===e||e.finishFrame()}async tick(){var e,s;return F(!0),null!==(e=await(null===(s=t.current)||void 0===s?void 0:s.tick()))&&void 0!==e&&e}toggle(){var e;null===(e=t.current)||void 0===e||e.toggle()}},()=>{var t;null===(t=M.current)||void 0===t||t.stop()})),[t]);const[D,P]=(0,d.useState)("tst"),G=(0,d.useCallback)((t=>{P(t),R.trackEvent("tab","change",t)}),[R]),[V,U]=(0,d.useState)(!1),[B,H]=(0,d.useState)(!1),[$,W]=(0,d.useState)(""),[K,z]=(0,d.useState)(""),X=(0,h.s)(),Z=(0,d.useCallback)((async()=>{try{var t;const n=await L.select();null===C||void 0===C||C(n);const i=await E.readFile(n);let a;try{const t=n.replace("VME.tst",".tst").replace(".tst",".cmp");a=await E.readFile(t)}catch(e){}null===s||void 0===s||s(i),null===v||void 0===v||v(null!==(t=a)&&void 0!==t?t:"")}catch(e){console.error(e),A("Failed to load test")}}),[L,A,E]),[Y,q]=(0,d.useState)();(0,d.useEffect)((()=>{q((0,i._)(b,y))}),[y,b]);const Q=(0,g.jsx)("dialog",{open:X.isOpen,children:(0,g.jsxs)("article",{children:[(0,g.jsx)("header",{children:"Warning"}),(0,g.jsxs)("main",{children:[(0,g.jsxs)("p",{children:["The test script can be edited during this IDE session. In the next session, the original script will be restored.",(0,g.jsx)("br",{})]}),(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,g.jsx)("input",{type:"checkbox",checked:B,onChange:t=>{H(t.target.checked)}}),(0,g.jsx)("p",{children:"Do not show this again"})]}),(0,g.jsx)("p",{children:(0,g.jsx)("br",{})}),(0,g.jsx)("button",{onClick:()=>{B&&localStorage.setItem(f,"true"),X.close()},children:"Ok"})]})]})});return(0,g.jsx)(m.Z,{className:"_test_panel",header:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"flex-0",children:(0,g.jsx)(n.x6,{id:"Test"})}),(0,g.jsx)("fieldset",{role:"group"}),Q,(0,g.jsx)("div",{className:"flex-1",children:M.current&&(0,g.jsx)(a.T,{prefix:(0,g.jsxs)(g.Fragment,{children:[_&&(0,g.jsx)("button",{className:"flex-0",onClick:()=>{s(null!==w&&void 0!==w?w:""),v(null!==T&&void 0!==T?T:"")},children:"Clear"}),V?(0,g.jsx)("button",{className:"flex-0",onClick:()=>{U(!1),s($),v(K)},children:"Restore"}):(0,g.jsx)("button",{className:"flex-0",onClick:()=>{localStorage.getItem(f)||X.open(),U(!0),W(e),z(b)},children:"Edit"}),(0,g.jsx)("button",{className:"flex-0",onClick:Z,children:"\ud83d\udcc2"})]}),runner:M.current,disabled:S,onSpeedChange:O})})]}),children:(0,g.jsxs)("div",{role:"tablist",style:{"--tab-count":"3"},children:[(0,g.jsx)("div",{role:"tab",id:"test-tab-tst","aria-controls":"test-tabpanel-tst","aria-selected":"tst"===D,children:(0,g.jsxs)("label",{children:[(0,g.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-tst",value:"tst",checked:"tst"===D,onChange:()=>G("tst")}),"Test Script"]})}),(0,g.jsx)("div",{role:"tabpanel","aria-labelledby":"test-tab-tst",id:"test-tabpanel-tst",children:(0,g.jsx)(p.K,{value:e,onChange:t=>{s(t),F(!1)},grammar:l.uG.parser,language:"tst",disabled:!V,highlight:N?x:void 0})}),(0,g.jsx)("div",{role:"tab",id:"test-tab-cmp","aria-controls":"test-tablpanel-cmp","aria-selected":"cmp"===D,children:(0,g.jsxs)("label",{children:[(0,g.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-cmp",value:"cmp",checked:"cmp"===D,onChange:()=>G("cmp")}),"Compare File"]})}),(0,g.jsx)("div",{role:"tabpanel","aria-labelledby":"test-tab-cmp",id:"test-tabpanel-cmp",style:{position:"relative"},children:(0,g.jsx)(p.K,{value:b,onChange:v,grammar:o.dl.parser,language:"cmp",lineNumberTransform:t=>"",disabled:!V})}),(0,g.jsx)("div",{role:"tab",id:"test-tab-out","aria-controls":"test-tabpanel-out","aria-selected":"out"===D,children:(0,g.jsxs)("label",{children:[(0,g.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-out",value:"out",checked:"out"===D,onChange:()=>G("out")}),"Output File"]})}),(0,g.jsxs)("div",{role:"tabpanel",id:"test-tabpanel-out","aria-labelledby":"test-tab-out",children:[""==y&&(0,g.jsx)("p",{children:"Execute test script to compare output."}),(null!==(I=null===Y||void 0===Y?void 0:Y.failureNum)&&void 0!==I?I:0)>0&&(0,g.jsxs)("p",{children:[null===Y||void 0===Y?void 0:Y.failureNum," comparison failure",1===(null===Y||void 0===Y?void 0:Y.failureNum)?"":"s",". Scroll down for details"]}),(0,g.jsx)(p.K,{value:null!==(j=null===Y||void 0===Y?void 0:Y.text)&&void 0!==j?j:"",onChange:()=>{},language:"",disabled:!0,lineNumberTransform:t=>"",customDecorations:null===Y||void 0===Y?void 0:Y.correctCellSpans.map((t=>({span:t,cssClass:"green"}))).concat(null===Y||void 0===Y?void 0:Y.incorrectCellSpans.map((t=>({span:t,cssClass:"red"}))))})]})]})})}},7437:(t,e,s)=>{s.d(e,{s:()=>l});var n=s(782),i=s(8878),a=s(6537);const r={Enter:128,Backspace:129,ArrowLeft:130,ArrowUp:131,ArrowRight:132,ArrowDown:133,Home:134,End:135,PageUp:136,PageDown:137,Insert:138,Delete:139,Escape:140,F1:141,F2:142,F3:143,F4:144,F5:145,F6:146,F7:147,F8:148,F9:149,F10:150,F11:151,F12:152},o={ArrowLeft:"L-arrow",ArrowUp:"U-arrow",ArrowRight:"R-arrow",ArrowDown:"D-arrow"};const l=({keyboard:t,update:e})=>{const[s,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),[u,h]=(0,i.useState)(t.getKey());let p=0;const m=t=>{if(!s)return;d(function(t){return o[t]??t}(t.key));const n=function(t){const e=r[t.key];if(void 0!==e)return e;if(1===t.key.length){const e=t.key.charCodeAt(0);if(e>=32&&e<=126)return e}return 0}(t);n!==p&&(f(n),e?.())},g=n=>{s&&(p=0,t.clearKey(),e?.(),h(t.getKey()),d(""))},f=e=>{0!==e&&(t.setKey(e),h(t.getKey()),p=e)};return(0,i.useEffect)((()=>(window.addEventListener("keydown",m),window.addEventListener("keyup",g),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",g)}))),(0,n.jsxs)("div",{className:"flex row align-baseline",children:[(0,n.jsx)("div",{className:"flex-2",children:(0,n.jsx)(a.d,{name:"Key",bits:u})}),(0,n.jsxs)("div",{className:"flex-2",children:["Char: ",c]}),(0,n.jsx)("div",{className:"flex-3",children:(0,n.jsx)("button",{onClick:()=>{l(!s)},children:(s?"Disable":"Enable")+" Keyboard"})})]})}},4171:(t,e,s)=>{s.d(e,{ce:()=>C,Ay:()=>S});var n=s(782),i=s(135),a=s(8878),r=s(7076),o=s(9547),l=s(7496),c=s(7844),d=s(6513),u=s(3376),h=s(8177);const p=0,m=1,g=t=>{const[e,s]=(0,a.useState)(t.mode??p),[i,r]=(0,h.b)(t.value),o=()=>(0,n.jsxs)("div",{style:{cursor:"text",...(0,u.V)("full","inline")},onClick:()=>{s(m)},children:[i,"\xa0"]}),l=(0,a.useCallback)((t=>t?.select()),[]),c=(0,a.useCallback)((e=>{s(p),r(e.value??""),t.onChange(e.value??"")}),[t,s,r]),d=()=>(0,n.jsx)("span",{style:{display:"block",position:"relative"},children:(0,n.jsx)("input",{ref:l,style:{zIndex:"10",position:"absolute",left:"0",marginTop:"-0.375rem",color:"var(--text-color)"},onFocus:t.onFocus,onBlur:({target:t})=>c(t),onKeyPress:({key:t,target:e})=>{"Enter"===t&&c(e)},type:"text",defaultValue:i})});return(()=>{switch(e){case m:return d();case p:return o();default:return(0,n.jsx)("span",{})}})()};var f=s(3761);function x(t,e,s){const{totalHeight:n,toleranceHeight:i,bufferedItems:a,settings:{itemHeight:r,minIndex:o,maxIndex:l}}=e,c=o+Math.floor((t-i)/r),d=function(t,e,s,n,i){const a=Math.max(0,t,s);return[...i(a,Math.min(e,s+n-1)-a)]}(o,l,c,a,s),u=Math.max((c-o)*r,0);return{scrollTop:t,topPaddingHeight:u,bottomPaddingHeight:Math.max(n-(u+d.length*r),0),data:d}}const b=t=>{const e=(0,a.useRef)(null),{settings:s,startState:i,reducer:r}=(0,a.useMemo)((()=>{const e=function(t){const{minIndex:e=0,maxIndex:s=Number.MAX_SAFE_INTEGER,startIndex:n=0,itemHeight:i=20,count:a=Math.max(s-e,1),tolerance:r=a}=t;return{minIndex:e,maxIndex:s,startIndex:n,itemHeight:i,count:a,tolerance:r}}(t.settings??{}),s=function(t,e){const{minIndex:s,maxIndex:n,startIndex:i,itemHeight:a,count:r,tolerance:o}=t,l=r+2*o,c=Math.max(0,i-o-s),d=r*a,u=Math.max(n-s,1)*a,h=o*a,p=c*a,m={scrollTop:0,settings:t,viewportHeight:d,totalHeight:u,toleranceHeight:h,bufferedItems:l,topPaddingHeight:p,bottomPaddingHeight:u-(p+(d+2*h)),data:[]};return{...m,...x(p+h,m,e)}}(e,t.get),n=(i=t.get,(t,e)=>({...t,...x(e,t,i)}));var i;return{settings:e,reducer:n,startState:s}}),[t.settings,t.get]),[o,l]=(0,a.useReducer)(r,i);(0,a.useEffect)((()=>{null!==e.current&&l(e.current.scrollTop)}),[s,t.row]);const c=(0,a.useCallback)((t=>{t&&(t.scrollTop=e.current?e.current.scrollTop:s.startIndex*s.itemHeight),e.current=t}),[e,s.startIndex,s.itemHeight]),d=o.data.map((e=>(0,n.jsx)("div",{style:{height:`${s.itemHeight}px`},children:t.row(e)},t.rowKey(e))));return(0,n.jsxs)("div",{ref:c,style:{height:`${o.viewportHeight}px`,overflowY:"scroll",overflowAnchor:"none"},className:t.className??"",onScroll:t=>l(t.target.scrollTop),children:[(0,n.jsx)("div",{style:{height:`${o.topPaddingHeight}px`}}),d,(0,n.jsx)("div",{style:{height:`${o.bottomPaddingHeight}px`}})]})},v=({memory:t,jmp:e={value:0},highlight:s=-1,editable:i=!1,justifyLeft:r=!1,maxSize:o,offset:l=0,cellLabels:d,format:u=c.FN,onChange:h=(()=>{}),onFocus:p=(()=>{})})=>{const m=(0,a.useMemo)((()=>({count:Math.min(t.size,25),maxIndex:o??t.size,itemHeight:34,startIndex:e.value})),[t.size,e]),g=(0,a.useCallback)(((e,s)=>t.range(e+l,e+l+s).map(((s,n)=>[n+e+l,{value:s,wasChanged:t.wasChanged(n+e+l)}]))),[t]),f=(0,a.useCallback)((([e,a])=>(0,n.jsx)(y,{index:e,value:a.wasChanged?u(a.value):"",label:(d?.[e]??"").padStart(d?Math.max(...d.map((t=>t.length))):0),showLabel:void 0!=d,size:t.size,editable:i,justifyLeft:r,highlight:e===s,onChange:h,onFocus:p})),[u,i,s,h]);return(0,n.jsx)(b,{settings:m,get:g,row:f,rowKey:([t])=>t})},y=({index:t,value:e,label:s,showLabel:a=!1,size:r,highlight:o=!1,editable:l=!1,justifyLeft:d=!1,onChange:u=(()=>{}),onFocus:h=(()=>{})})=>(0,n.jsxs)("div",{style:{display:"flex",height:"100%"},children:[a&&(0,n.jsx)("code",{style:{...(0,i.Wf)("none"),...o?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:s??""}),(0,n.jsx)("code",{style:{...(0,i.Wf)("none"),...o?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:r?(0,c.FN)(t).padStart(Math.ceil(Math.log10(r))," "):(0,c.FN)(t)}),(0,n.jsx)("code",{style:{flex:"1",textAlign:d?"left":"right",color:"var(--text-color)",...(0,i.Wf)("none"),...o?{background:"var(--mark-background-color)"}:{}},children:l?(0,n.jsx)(g,{value:e,highlight:o,onChange:s=>u(t,s,Number(e)),onFocus:()=>h(t)}):(0,n.jsx)("span",{style:{color:"var(--text-color)"},children:e})})]}),C=(0,a.forwardRef)((({name:t="Memory",className:e,displayEnabled:s=!0,highlight:i=-1,editable:u=!0,memory:p,format:m="dec",maxSize:g,offset:x,initialAddr:b,cellLabels:y,showUpload:C=!0,showClear:S=!0,onUpload:w,onChange:T},_)=>{const[O,k]=(0,h.b)(m),[I,j]=(0,a.useState)(""),[E,A]=(0,a.useState)({value:b??0}),[L,R]=(0,h.b)(i),[N,F]=(0,a.useState)(0),M=()=>{const t=!isNaN(parseInt(I))&&isFinite(parseInt(I))?Number(I):0;R(t),A({value:t}),U()},D=(0,a.useRef)(null),P=(0,a.useCallback)((()=>{T?.(),D.current?.click()}),[D]),{setStatus:G}=(0,a.useContext)(f.L),V=(0,a.useCallback)((async t=>{if(!t.target.files?.length)return void G("No file selected");const e=t.target.files[0];w?.(e.name);const s=await e.text(),n=e.name.endsWith("hack")?o.aU:e.name.endsWith("asm")?o.aY:o.yt;try{const t=await n(s);p.loadBytes(t)}catch(i){return void G(`Error loading memory: ${i.message}`)}t.target.value="",k(e.name.endsWith("hack")?"bin":e.name.endsWith("asm")?"asm":O),M()}),[]),U=()=>{F(N+1)};(0,a.useImperativeHandle)(_,(()=>({rerender:U})));return(0,d.rT)((()=>{j(""),A({value:0})})),(0,n.jsxs)("article",{className:`panel memory ${e??t}`,children:[(0,n.jsxs)("header",{children:[(0,n.jsx)("div",{style:{whiteSpace:"nowrap"},children:t}),(0,n.jsxs)("fieldset",{role:"group",children:[(0,n.jsx)("input",{type:"file",style:{display:"none"},ref:D,onChange:V}),C&&(0,n.jsx)("button",{onClick:P,className:"flex-0","data-tooltip":"Load file","data-placement":"bottom",children:"\ud83d\udcc2"}),S&&(0,n.jsx)("button",{onClick:()=>{p.reset(),T?.(),U()},className:"flex-0","data-tooltip":"Clear","data-placement":"bottom",children:"\ud83c\udd91"}),(0,n.jsx)("input",{style:{width:"4em",height:"100%"},placeholder:"Addr",value:I,onKeyDown:({key:t})=>"Enter"===t&&M(),onChange:({target:{value:t}})=>j(t)}),(0,n.jsx)("button",{onClick:M,className:"flex-0","data-tooltip":"Scroll to address","data-placement":"bottom",children:"\u2935\ufe0f"}),(0,n.jsx)("select",{value:O,onChange:t=>k(t.target.value),children:r.hR.map((t=>(0,n.jsx)("option",{children:t},t)))})]})]}),s?(0,n.jsx)(v,{jmp:E,memory:p,highlight:L,editable:u,justifyLeft:"asm"==O,format:t=>function(t,e){switch(t){case"bin":return(0,c.e5)(e);case"hex":return(0,c.uh)(e);case"asm":return(0,l.k)(e);default:return(0,c.FN)(e)}}(O,t),cellLabels:y,maxSize:g,offset:x,onChange:(t,e)=>{p.update(t,e,O??"dec"),T?.(),U()},onFocus:t=>R(t)},N):"Memory display is disabled"]})}));C.displayName="Memory";const S=C},6537:(t,e,s)=>{s.d(e,{d:()=>a});var n=s(782),i=s(7844);const a=({name:t,bits:e})=>(0,n.jsxs)("div",{children:[t,": ",(0,i.FN)(e)]})},4668:(t,e,s)=>{s.d(e,{f:()=>d});var n=s(782),i=s(2469),a=s(8878),r=s(6513);const o="white",l="black";function c(t,e,s,n){const i=4*(512*s+e),a=n===o?255:0;t[i]=a,t[i+1]=a,t[i+2]=a,t[i+3]=255}const d=({memory:t,showScaleControls:e=!1,onScale:s})=>{const d=(0,a.useRef)(),[u,h]=(0,a.useState)(1),p=t=>{s?.(t),h(t)},m=(0,a.useCallback)((()=>{const e=d.current?.getContext("2d")??void 0;e&&function(t,e){const s=(0,i.Z1)(t.getImageData(0,0,512,256),"Failed to create Context2d");for(let i=0;i<512;i++)for(let t=0;t<256;t++){const r=(n=i,a=t,0===(e.get(32*a+(n/16|0))&1<<n%16)?o:l);c(s.data,i,t,r)}var n,a;t.putImageData(s,0,0)}(e,t)}),[t]),g=(0,a.useCallback)((t=>{d.current=t??void 0,m()}),[d,m]);return(0,r.Nt)(m),(0,r.rT)((()=>{d.current?.getContext("2d")?.clearRect(0,0,d.current.width,d.current.height)})),(0,n.jsxs)("article",{className:"panel",children:[(0,n.jsxs)("header",{children:[(0,n.jsx)("div",{children:"Screen"}),e&&(0,n.jsxs)("fieldset",{role:"group",children:[(0,n.jsx)("button",{onClick:()=>p(0),children:"x0"}),(0,n.jsx)("button",{onClick:()=>p(1),children:"x1"}),(0,n.jsx)("button",{onClick:()=>p(2),children:"x2"})]})]}),u>0&&(0,n.jsx)("main",{style:{backgroundColor:"var(--code-background-color)"},children:(0,n.jsx)("figure",{style:{width:512*u+"px",height:256*u+"px",boxSizing:"content-box",marginInline:"auto",margin:"auto",borderTop:"2px solid gray",borderLeft:"2px solid gray",borderBottom:"2px solid lightgray",borderRight:"2px solid lightgray"},children:(0,n.jsx)("canvas",{ref:g,width:512,height:256,style:{transform:`translate(-50%, -50%) scale(${u}) translate(50%, 50%)`,imageRendering:"pixelated"}})})})]})}},6513:(t,e,s)=>{s.d(e,{Nt:()=>o,rT:()=>l,wr:()=>d});var n=s(782),i=s(8878),a=s(4641),r=s(1487);function o(t){(0,i.useEffect)((()=>{const e=r.z.get().frame$.subscribe((()=>{t()}));return()=>e.unsubscribe()}),[t])}function l(t){(0,i.useEffect)((()=>{const e=r.z.get().reset$.subscribe((()=>{t()}));return()=>e.unsubscribe()}),[t])}function c(){return(0,a.V)(r.z.get())}const d=()=>{const t=function(){const[t,e]=(0,i.useState)(c());return(0,i.useEffect)((()=>{const t=r.z.get().$.subscribe((()=>{e(c())}));return()=>t.unsubscribe()}),[]),t}();return(0,n.jsx)("span",{style:{whiteSpace:"nowrap"},children:t})}},7365:(t,e,s)=>{s.d(e,{U:()=>r,_:()=>o});var n=s(5874),i=s(7589);function a(t,e){const s=[];for(let n=0;n<Math.min(t.length,e.length);n++){const i=t[n]??[],a=e[n]??[];for(let t=0;t<Math.max(i.length,a.length);t++){const e=i[t]??"",r=a[t]??"";null===e?.trim().match(/^\*+$/)&&r!==e&&s.push({row:n,col:t,expected:e,given:r})}}return s}function r(t,e){const s=i.dl.parse(t),r=i.dl.parse(e);if((0,n.ys)(s)||(0,n.ys)(r))return!1;return 0==a((0,n.Ok)(s),(0,n.Ok)(r)).length}function o(t,e){const s=i.dl.parse(t),r=i.dl.parse(e);if((0,n.ys)(s)||(0,n.ys)(r))return{text:"",failureNum:0,correctCellSpans:[],incorrectCellSpans:[]};const o=(0,n.Ok)(s),c=a(o,(0,n.Ok)(r)),d=new Array(o.length);for(const n of c){const t=d[n.row];t?t.push(n):d[n.row]=[n]}const u=e.split("\n"),h=new Array(o.length);for(let n=0;n<d.length;n++)d[n]&&(h[n]=l(u[n],d[n]));const p=[];let m=0;const g=[],f=[];for(let n=0;n<u.length;n++){const t=h[n];t?(p.push(t.expectedLine),g.push(...t.correctCellSpans.map((t=>({start:t.start+m,end:t.end+m,line:t.line})))),m+=t.expectedLine.length+1,p.push(t.givenLine),f.push(...t.correctCellSpans.map((t=>({start:t.start+m,end:t.end+m,line:t.line})))),m+=t.givenLine.length+1):(p.push(u[n]),m+=u[n].length+1)}return{text:p.join("\n"),failureNum:c.length,correctCellSpans:g,incorrectCellSpans:f}}function l(t,e){const s=t.split("|").filter((t=>""!=t)),n=s.map((t=>" ".repeat(t.length))),i=[];let a=0;for(let l=0;l<s.length;l++)i.push(a+1),a+=s[l].length+1;const r=[],o=[];for(const l of e){s[l.col]=l.expected,n[l.col]=l.given;const t={start:i[l.col],end:i[l.col]+l.expected.length,line:0};r.push(t),o.push(t)}return{expectedLine:`|${s.join("|")}|`,givenLine:`|${n.join("|")}|`,correctCellSpans:r,incorrectCellSpans:o}}},7721:(t,e,s)=>{s.d(e,{D4:()=>o,I8:()=>c,Z8:()=>d,gV:()=>l,p$:()=>a});var n=s(8739),i=s(7076);function a(){return{A:0,D:0,PC:0,ALU:0,flag:n.iI.Zero}}const r={c:32768,x1:36864,x2:36864,am:36864,op:4032,d1:32800,d2:32784,d3:32776,j1:32769,j2:32770,j3:32772};function o(t){function e(e){return(t&e)===e}return{c:e(r.c),x1:e(r.x1),x2:e(r.x2),am:e(r.am),op:(t&r.op)>>6,d1:e(r.d1),d2:e(r.d2),d3:e(r.d3),j1:e(r.j1),j2:e(r.j2),j3:e(r.j3)}}function l({inM:t,instruction:e},{A:s,D:i,PC:a}){const r=o(e),l=r.am?t:s,[c,d]=(0,n.v0)(r.op,i,l);return r.d2&&(i=c),[{A:s,D:i,PC:a+1,ALU:c,flag:d},r.d3]}function c({inM:t,instruction:e,reset:s},{A:i,D:a,PC:r,ALU:l,flag:c}){const d=o(e),u=d.j1&&c===n.iI.Positive,h=d.j2&&c===n.iI.Zero,p=d.j3&&c===n.iI.Negative;r=s?0:u||h||p?i:r,d.c?d.d1&&(i=l):i=32767&e;const m=d.am?t:i,g=(0,n.v0)(d.op,a,m);l=g[0],c=g[1];return[{addressM:i,outM:l,writeM:d.d3},{A:i,D:a,ALU:l,flag:c,PC:r}]}class d{RAM;ROM;Screen;Keyboard;#t=0;#e=0;#s=0;#n={A:0,D:0,PC:0,ALU:0,flag:n.iI.Zero};get state(){return this.#n}get PC(){return this.#t}get A(){return this.#e}get D(){return this.#s}setA(t){this.#e=t}setD(t){this.#s=t}setPC(t){this.#t=t}constructor({RAM:t=new i.XK,ROM:e}){this.RAM=t,this.ROM=e,this.Screen=new i.qN(this.RAM,i.RL,i.L7),this.Keyboard=new i.PC(this.RAM)}reset(){this.#t=0,this.#e=0,this.#s=0}tick(){const t=this.#e,[{outM:e,writeM:s},{A:i,D:a,PC:r}]=function(t,e){const[s,n]=l(t,e);return c(t,s)}({inM:this.RAM.get(this.#e),instruction:this.ROM.get(this.#t),reset:!1},{A:this.#e,D:this.#s,PC:this.#t,ALU:this.#s,flag:n.iI.Zero});this.#e=i,this.#s=a,this.#t=r,s&&this.RAM.set(t,e)}}},7589:(t,e,s)=>{s.d(e,{dl:()=>l});var n=s(4533),i=s(3977);const a="\nCmp <: Base {\n  Root := line*\n  line = bar cell+ newline?\n  cell = cellvalue bar\n  cellvalue = (~(bar|newline) any)*\n}",r=n.A.grammar(a,i.lN),o=r.extendSemantics(i.JE);o.addAttribute("cell",{cell:(t,e)=>t.sourceString}),o.addAttribute("line",{line:(t,e,s)=>e.children.map((t=>t.cell))}),o.addAttribute("root",{Root:t=>t.children.map((t=>t.line))});const l={grammar:a,semantics:o,parser:r,parse:(0,i.Q5)(r,o)}},6554:(t,e,s)=>{s.d(e,{uG:()=>l});var n=s(4533),i=s(3977);const a='\nTst <: Base {\n  Root := Tst\n  Tst = (TstStatement | TstRepeat | TstWhile)+\n\n  TstRepeat = Repeat Number? OpenBrace TstCommand+ CloseBrace\n  TstWhile = While Condition OpenBrace TstCommand+ CloseBrace\n  TstStatement = TstCommand\n\n  TstCommand = TstOperation Separator\n  Separator = (Semi | Bang | Comma)\n\n  TstOperation =\n    | TstFileOperation\n    | TstOutputListOperation\n    | TstEvalOperation\n    | TstSetOperation\n    | TstOutputOperation\n    | TstEchoOperation\n    | TstClearEchoOperation\n    | TstLoadROMOperation\n\n  TstLoadROMOperation = ROM32K Load FileName\n  TstFileOperation = FileOperation FileName?\n  TstOutputListOperation = "output-list" OutputFormat+\n  OutputFormat = Name Index? FormatSpec?\n  FormatSpec = percent FormatStyle wholeDec dot wholeDec dot wholeDec\n  TstSetOperation = Set Name Index? Number\n  Index = OpenSquare wholeDec? CloseSquare\n  Condition = Value CompareOp Value\n  TstEvalOperation = Eval | TickTock | Tick | Tock | VmStep\n  TstOutputOperation = Output\n  TstEchoOperation = Echo String\n  TstClearEchoOperation = ClearEcho\n\n  FileName = Name\n  FileOperation = "load" | "output-file" | "compare-to"\n\n  Set = "set"\n  Eval = "eval"\n  Tick = "tick"\n  Tock = "tock"\n  TickTock = "ticktock"\n  VmStep = "vmstep"\n  Echo = "echo"\n  Repeat = "repeat"\n  ClearEcho = "clear-echo"\n  Output = "output"\n  OutputList = "output-list"\n  FormatStyle = "B"|"D"|"S"|"X"\n  ROM32K = "ROM32K"\n  Load = "load"\n  While = "while"\n\n  CompareOp = "<>" | "<=" | ">=" | "=" | "<" | ">"\n}',r=n.A.grammar(a,i.lN),o=r.extendSemantics(i.JE);o.extendAttribute("value",{Index:(t,e,s)=>e?.child(0)?.value??-1}),o.extendAttribute("name",{FileName:({name:t})=>t}),o.addAttribute("index",{Index:(t,e,s)=>e.child(0)?.value??0}),o.addAttribute("formatSpec",{FormatSpec:(t,{sourceString:e},{value:s},n,{value:i},a,{value:r})=>({style:e,width:i,lpad:s,rpad:r})}),o.addAttribute("format",{OutputFormat:({name:t},e,s)=>({id:t,builtin:void 0!==e?.child(0),address:e?.child(0)?.value??-1,format:s?.child(0)?.formatSpec})}),o.addAttribute("operation",{TstEvalOperation:t=>({op:t.sourceString}),TstOutputOperation:t=>({op:"output"}),TstOutputListOperation:(t,e)=>({op:"output-list",spec:e.children.map((t=>t.format))}),TstSetOperation(t,{name:e},s,{value:n}){const i={op:"set",id:e,value:n},a=s.child(0)?.child(1)?.child(0);return a&&(i.index=a.value),i},TstEchoOperation:(t,e)=>({op:"echo",message:e.String}),TstClearEchoOperation:t=>({op:"clear-echo"}),TstLoadROMOperation:(t,e,{name:s})=>({op:"loadRom",file:s}),TstFileOperation:(t,e)=>({op:t.sourceString,file:e?.sourceString})}),o.addAttribute("command",{TstCommand(t,e){return{op:t.operation,separator:e.sourceString,span:(0,i.Ln)(this.source)}}}),o.addAttribute("condition",{Condition:({value:t},{sourceString:e},{value:s})=>({left:t,right:s,op:e})}),o.addAttribute("statement",{TstWhile(t,e,s,n,a){return{statements:n.children.map((t=>t.command)),condition:e.condition,span:(0,i.Ln)(this.source)}},TstRepeat(t,e,s,n,a){return{statements:n.children.map((t=>t.command)),count:e.sourceString?Number(e.sourceString):-1,span:(0,i.Ln)(this.source)}},TstStatement:t=>t.command}),o.addAttribute("tst",{Tst:t=>({lines:t.children.map((t=>t.statement))})}),o.addAttribute("root",{Root:({tst:t})=>t});const l={grammar:a,semantics:o,parser:r,parse:(0,i.Q5)(r,o)}},4013:(t,e,s)=>{s.d(e,{G:()=>m});var n,i=s(2469),a=s(1106),r=s(6418),o=s(4867),l=s(7076);s(3977);!function(t){t[t.SYS_WAIT_DURATION_NOT_POSITIVE=1]="SYS_WAIT_DURATION_NOT_POSITIVE",t[t.ARRAY_SIZE_NOT_POSITIVE=2]="ARRAY_SIZE_NOT_POSITIVE",t[t.DIVIDE_BY_ZERO=3]="DIVIDE_BY_ZERO",t[t.SQRT_NEG=4]="SQRT_NEG",t[t.ALLOC_SIZE_NOT_POSITIVE=5]="ALLOC_SIZE_NOT_POSITIVE",t[t.HEAP_OVERFLOW=6]="HEAP_OVERFLOW",t[t.ILLEGAL_PIXEL_COORD=7]="ILLEGAL_PIXEL_COORD",t[t.ILLEGAL_LINE_COORD=8]="ILLEGAL_LINE_COORD",t[t.ILLEGAL_RECT_COORD=9]="ILLEGAL_RECT_COORD",t[t.ILLEGAL_CENTER_COORD=12]="ILLEGAL_CENTER_COORD",t[t.ILLEGAL_RADIUS=13]="ILLEGAL_RADIUS",t[t.STRING_LENGTH_NEG=14]="STRING_LENGTH_NEG",t[t.GET_CHAR_INDEX_OUT_OF_BOUNDS=15]="GET_CHAR_INDEX_OUT_OF_BOUNDS",t[t.SET_CHAR_INDEX_OUT_OF_BOUNDS=16]="SET_CHAR_INDEX_OUT_OF_BOUNDS",t[t.STRING_FULL=17]="STRING_FULL",t[t.STRING_EMPTY=18]="STRING_EMPTY",t[t.STRING_INSUFFICIENT_CAPACITY=19]="STRING_INSUFFICIENT_CAPACITY",t[t.ILLEGAL_CURSOR_LOCATION=20]="ILLEGAL_CURSOR_LOCATION"}(n||(n={}));s(5874);l.XK;!function(){const t=new Array(126);t[32]=c(["        ","        ","        ","        ","        ","        ","        ","        ","        ","        ","        "]),t[33]=c(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[34]=c([" \u2588\u2588 \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588 \u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),t[35]=c(["        "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","        ","        "]),t[36]=c(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        "]),t[37]=c(["        ","        ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","        ","        "]),t[38]=c(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[39]=c(["  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        ","        ","        ","        ","        ","        ","        "]),t[40]=c(["   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),t[41]=c([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),t[42]=c(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        ","        "]),t[43]=c(["        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),t[44]=c(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        "]),t[45]=c(["        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        ","        "]),t[46]=c(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[47]=c(["        ","        ","     \u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588       ","        ","        "]),t[48]=c(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),t[49]=c(["  \u2588\u2588    "," \u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[50]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[51]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[52]=c(["    \u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588   "," \u2588 \u2588\u2588   ","\u2588  \u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588\u2588  ","        ","        "]),t[53]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[54]=c(["  \u2588\u2588\u2588   "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[55]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588   \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[56]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[57]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),t[58]=c(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),t[59]=c(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),t[60]=c(["        ","        ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),t[61]=c(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        "]),t[62]=c(["        ","        ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","        ","        "]),t[64]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[63]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[65]=c(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[66]=c(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","        ","        "]),t[67]=c(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),t[68]=c(["\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        ","        "]),t[69]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[70]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),t[71]=c(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588 \u2588  ","        ","        "]),t[72]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[73]=c([" \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[74]=c(["  \u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),t[75]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[76]=c(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[77]=c(["\u2588    \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[78]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[79]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[80]=c(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),t[81]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","        "]),t[82]=c(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[83]=c([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[84]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588 \u2588\u2588 \u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[85]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[86]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[87]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),t[88]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[89]=c(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[90]=c(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[91]=c([" \u2588\u2588\u2588\u2588   "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[92]=c(["        ","        ","\u2588       ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","    \u2588\u2588  ","     \u2588  ","        ","        "]),t[94]=c(["   \u2588    ","  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        ","        ","        ","        ","        ","        ","        "]),t[95]=c(["        ","        ","        ","        ","        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        "]),t[96]=c([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),t[97]=c(["        ","        ","        "," \u2588\u2588\u2588    ","   \u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[98]=c(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[99]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[100]=c(["    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[101]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[102]=c(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  "," \u2588\u2588  \u2588  "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    ","        ","        "]),t[103]=c(["        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),t[104]=c(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[105]=c(["  \u2588\u2588    ","  \u2588\u2588    ","        "," \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[106]=c(["    \u2588\u2588  ","    \u2588\u2588  ","        ","   \u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),t[107]=c(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[108]=c([" \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[109]=c(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","        ","        "]),t[110]=c(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[111]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[112]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","        "]),t[113]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","        "]),t[114]=c(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588     ","        ","        "]),t[115]=c(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","   \u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),t[116]=c(["  \u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),t[117]=c(["        ","        ","        ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),t[118]=c(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),t[119]=c(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),t[120]=c(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),t[121]=c(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        "]),t[122]=c(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),t[123]=c(["   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","        ","        "]),t[124]=c(["  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),t[125]=c(["\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","        ","        "]),t[126]=c([" \u2588\u2588  \u2588  ","\u2588 \u2588\u2588 \u2588  ","\u2588  \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "])}();function c(t){return t.map((t=>t.split("").map((t=>"\u2588"==t))))}new Array(l.RL).fill(0);s(9937);class d{_vmTestInstruction_=!0;async do(t){t.vmstep()}*steps(){yield this}}function u(t){return void 0!==t.op}function h(t){return void 0!==t.condition}function p(t){const{op:e}=t;switch(e){case"tick":return new a.IJ;case"tock":return new a.CX;case"ticktock":return new r.z;case"eval":return new a.Nq;case"vmstep":return new d;case"output":return new o.ik;case"set":return new o.jl(t.id,t.value,t.index);case"output-list":return new o.Ad(t.spec);case"echo":return new o.S0(t.message);case"clear-echo":return new o.Tn;case"loadRom":return new o.fK(t.file);case"load":return new o.hh(t.file);case"output-file":case"compare-to":return;default:(0,i.H8)(e,`Unknown tst operation ${e}`)}}function m(t,e){let s,n=[],i=t,a=[];for(const r of e.lines){if(u(r))i=t,a=[r];else{const e=h(r)?new o.eB(new o.kW(r.condition.left,r.condition.right,r.condition.op)):new o.UM(r.count);e.span=r.span,t.addInstruction(e),i=e,a=r.statements}for(const t of a){const e=p(t.op);if(void 0!==e&&(void 0===s?s=r.span:s.end=r.span.end,i.addInstruction(e),n.push(e)),","!=t.separator){";"==t.separator?i.addInstruction(new o.fe(s??t.span)):"!"==t.separator&&i.addInstruction(new o.Ge(s??t.span));for(const e of n)e.span=s??t.span;s=void 0,n=[]}}}return t.reset(),t}},1106:(t,e,s)=>{s.d(e,{BX:()=>o,CX:()=>d,IJ:()=>c,Nq:()=>l});var n=s(9651),i=s(1487),a=s(4013),r=s(9937);class o extends r.V{chip=new n.ti;get chipId(){return this.chip.id}clock=i.z.get();static from(t,e){const s=new o(e);return(0,a.G)(s,t)}with(t){return this.chip=t,this}hasVar(t){return"time"===t||(t=`${t}`,this.chip.hasIn(t)||this.chip.hasOut(t))}getVar(t,e){if("time"===(t=`${t}`))return this.clock.toString();const s=this.chip.get(t,e);return s?s instanceof n.z7?s.busVoltage:s.voltage():0}getWidth(t,e){const s=this.chip.get(t,e);return s?s.width:0}setVar(t,e,s){const i=this.chip.get(t,s);i instanceof n.z7?i.busVoltage=e:i?.pull(0===e?n.$L:n.RY)}eval(){this.chip.eval()}tick(){this.chip.eval(),this.clock.tick()}tock(){this.chip.eval(),this.clock.tock()}async loadROM(t){await this.chip.load(this.fs,t)}async run(){this.clock.reset(),await super.run()}}class l{_chipTestInstruction_=!0;async do(t){t.eval()}*steps(){yield this}}class c{_chipTestInstruction_=!0;async do(t){t.tick()}*steps(){yield this}}class d{_chipTestInstruction_=!0;async do(t){t.tock()}*steps(){yield this}}},6418:(t,e,s)=>{s.d(e,{b:()=>o,z:()=>l});var n=s(7721),i=s(7076),a=s(4013),r=s(9937);class o extends r.V{cpu;ticks=0;static from(t,e){const s=new o(e);return(0,a.G)(s,t)}constructor(t=new i.n9(new Int16Array)){super(),this.cpu=new n.Z8({ROM:t}),this.reset()}reset(){return super.reset(),this.cpu.reset(),this.ticks=0,this}hasVar(t){return"number"!==typeof t&&!("A"!==t&&"D"!==t&&"PC"!==t&&"time"!==t&&!t.startsWith("RAM"))}getVar(t,e){switch(t){case"A":return this.cpu.A;case"D":return this.cpu.D;case"PC":return this.cpu.PC;case"time":return this.ticks;case"RAM":return void 0===e?0:this.cpu.RAM.get(e)}if("number"===typeof t)return 0;if(t.startsWith("RAM")){const e=Number(t.substring(4,t.length-1));return this.cpu.RAM.get(e)}return 0}getWidth(t,e){return 16}setVar(t,e,s){switch(t){case"A":this.cpu.setA(e);break;case"D":this.cpu.setD(e);break;case"PC":this.cpu.setPC(e);break;case"RAM":this.cpu.RAM.set(s??0,e)}}ticktock(){this.ticks+=1,this.cpu.tick()}async loadROM(t){await this.cpu.ROM.load(this.fs,t)}}class l{_cpuTestInstruction_=!0;async do(t){t.ticktock()}*steps(){yield this}}},4867:(t,e,s)=>{s.d(e,{Ad:()=>l,Ge:()=>a,S0:()=>p,Tn:()=>m,UM:()=>d,eB:()=>h,fK:()=>g,fe:()=>i,hh:()=>f,ik:()=>o,jl:()=>r,kW:()=>u});class n{span;constructor(t){this.span=t}async do(){}*steps(){yield this}}class i extends n{}class a extends n{}class r{variable;value;index;constructor(t,e,s){this.variable=t,this.value=e,this.index=s}async do(t){t.setVar(this.variable,this.value,this.index)}*steps(){yield this}}class o{async do(t){t.output()}*steps(){yield this}}class l{outputs=[];constructor(t=[]){for(const e of t)this.addOutput(e)}addOutput(t){this.outputs.push({id:t.id,style:t.format?.style??"B",len:t.format?.width??-1,lpad:t.format?.lpad??1,rpad:t.format?.rpad??1,builtin:t.builtin,address:t.address})}async do(t){t.outputList(this.outputs),t.header()}*steps(){yield this}}class c{instructions=[];span;addInstruction(t){this.instructions.push(t)}async do(t){for(const e of this.instructions)e.do(t)}*steps(t){yield this}}class d extends c{repeat;constructor(t){super(),this.repeat=t}async do(){}*innerSteps(t){for(const e of this.instructions)yield*e.steps(t)}*steps(t){if(-1===this.repeat)for(yield this;;)yield*this.innerSteps(t);else for(let e=0;e<this.repeat;e++)yield this,yield*this.innerSteps(t)}}class u{x;y;op;constructor(t,e,s){this.x=t,this.y=e,this.op=s}check(t){const e=t.hasVar(this.x)?t.getVar(this.x):this.x,s=t.hasVar(this.y)?t.getVar(this.y):this.y;if("string"===typeof e||"string"===typeof s)switch(this.op){case"=":return`${e}`===`${s}`;case"<>":return`${e}`!==`${s}`}else switch(this.op){case"<":return e<s;case"<=":return e<=s;case">":return e>s;case">=":return e>=s;case"=":return e===s;case"<>":return e!==s}return!1}}class h extends c{condition;constructor(t){super(),this.condition=t}*steps(t){for(;this.condition.check(t);){yield this;for(const e of this.instructions)yield*e.steps(t)}}}class p{content;constructor(t){this.content=t}async do(t){t.echo(this.content)}*steps(){yield this}}class m{async do(t){t.clearEcho()}*steps(){yield this}}class g{file;constructor(t){this.file=t}async do(t){t.fs.pushd("/samples"),await t.loadROM(this.file),t.fs.popd()}*steps(){yield this}}class f{file;constructor(t){this.file=t}async do(t){await t.load(this.file)}*steps(){yield this}}},9937:(t,e,s)=>{s.d(e,{V:()=>l});var n=s(2469),i=s(4544),a=s(7844);class r{variable;fmt;lPad;rPad;len;index;builtin;constructor(t,e="%B1.1.1",s,i,a,r,o){if(this.variable=t,e.startsWith("%")&&void 0===s&&void 0===i&&void 0===a){const{fmt:t,lPad:s,rPad:n,len:i}=e.match(/^%(?<fmt>[BDXS])(?<lPad>\d+)\.(?<len>\d+)\.(?<rPad>\d+)$/)?.groups;this.fmt=t,this.lPad=parseInt(s),this.rPad=parseInt(n),this.len=parseInt(i),this.builtin=!1,this.index=-1}else(0,n.vA)(["B","X","D","S"].includes(e[0])),this.fmt=e[0],this.len=s??3,this.lPad=i??1,this.rPad=a??1,this.builtin=r??!1,this.index=o??-1}header(t){let e=`${this.variable}`;if(this.builtin){e=`${e}[${this.index>=0?this.index:""}]`}return e.length>this.len+this.lPad+this.rPad?e.substring(0,this.len+this.lPad+this.rPad):this.padCenter(e)}print(t){const e=t.getVar(this.variable,this.index);if("S"===this.fmt)return this.padLeft(e);const s=(0,{B:a.e5,D:a.FN,X:a.uh}[this.fmt])(e);return"D"===this.fmt?this.padRight(s):this.padLeft(s.slice(s.length-this.len))}padCenter(t){const e=this.lPad+this.len+this.rPad,s=Math.floor((e-t.length)/2),n=e-s-t.length,i=s+t.length,a=i+n;return t=(t=t.padStart(i)).padEnd(a)}padLeft(t){t=t.substring(0,this.len);const e=this.rPad+this.len,s=this.lPad+e;return t=(t=t.padEnd(e)).padStart(s)}padRight(t){t=t.substring(0,this.len);const e=this.lPad+this.len,s=this.rPad+e;return t=(t=t.padStart(e)).padEnd(s)}}var o=s(4867);class l{instructions=[];_outputList=[];_log="";fs=new i.Q2;doEcho;constructor(t){this.doEcho=t}setFileSystem(t){return this.fs=t,this}echo(t){this.doEcho?.(t)}clearEcho(){this.doEcho?.("")}async loadROM(t){}async load(t){}async compareTo(t){}outputFile(t){}createOutputs(t){return t.map((t=>{if(-1===t.len)if("time"===t.id)t.len=7,t.style="S";else{const e=this.getWidth(t.id,t.address);"B"===t.style?t.len=e:"D"===t.style?t.len=Math.ceil(Math.log(e)):"X"===t.style&&(t.len=Math.ceil(e/4))}return new r(t.id,t.style,t.len,t.lpad,t.rpad,t.builtin,t.address)}))}outputList(t){this._outputList=this.createOutputs(t)}addInstruction(t){this.instructions.push(t)}reset(){return this._steps=function*(t){for(const e of t.instructions)yield*e.steps(t)}(this),this._step=this._steps.next(),this._log="",this}_steps;_step;get steps(){return void 0===this._steps&&(this.reset(),this._steps=(0,n.Z1)(this._steps,"Reset did not initialize steps"),this._step=(0,n.Z1)(this._step,"Reset did not find first step")),this._steps}get currentStep(){return this._step?.value}get done(){return this._step?.done??!1}async step(){for(;!this._step.done;){if(await this._step.value.do(this),this._step=this.steps.next(),this._step.value instanceof o.fe)return this._step=this.steps.next(),!1;if(this._step.value instanceof o.Ge)return!0}return!0}async run(){for(this.reset();!await this.step(););}breakpoints=new Map;addBreakpoint(t,e){this.breakpoints.set(t,e)}clearBreakpoints(){this.breakpoints.clear()}output(){const t=this._outputList.map((t=>t.print(this)));this._log+=`|${t.join("|")}|\n`}header(){const t=this._outputList.map((t=>t.header(this)));this._log+=`|${t.join("|")}|\n`}log(){return this._log}}}}]);
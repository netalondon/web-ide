"use strict";(globalThis.webpackChunk_nand2tetris_web=globalThis.webpackChunk_nand2tetris_web||[]).push([[537],{2675:(e,t,n)=>{n.d(t,{K:()=>d});var s=n(6458),r=n(8878),a=n(8029),i=n(782);let l=(...e)=>(0,i.jsx)(i.Fragment,{});const o=({error:e})=>e?(0,i.jsxs)("details",{className:"ErrorPanel",open:!0,children:[(0,i.jsx)("summary",{role:"button",className:"secondary",children:(0,i.jsx)(s.x6,{id:"1tSpqV"})}),(0,i.jsx)("pre",{children:(0,i.jsx)("code",{children:null===e||void 0===e?void 0:e.message})})]}):(0,i.jsx)(i.Fragment,{}),c=({value:e,onChange:t,language:n,disabled:s=!1})=>{const[a,l]=(0,r.useState)(e);return(0,i.jsx)("textarea",{"data-testid":`editor-${n}`,disabled:s,value:a,onChange:e=>{var n;const s=null===(n=e.target)||void 0===n?void 0:n.value;l(s),t(s)}})},d=({className:e="",style:t={},disabled:s=!1,value:d,error:u,onChange:h,onCursorPositionChange:m,grammar:g,language:p,highlight:x,highlightType:f="highlight",customDecorations:v=[],dynamicHeight:b=!1,alwaysRecenter:j=!0,lineNumberTransform:y})=>{const{monaco:w}=(0,r.useContext)(a.BR),[k,C]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{w.canUse&&w.wants&&!k&&(l=(await Promise.all([n.e(983),n.e(535),n.e(965)]).then(n.bind(n,8965))).Monaco,C(!0))})()}),[w,k,C]),(0,i.jsx)("div",{className:`Editor ${b?"dynamic-height":""} ${e}`,style:t,children:w.canUse&&w.wants&&k?(0,i.jsx)(l,{value:d,onChange:h,onCursorPositionChange:m,language:p,error:u,disabled:s,highlight:x,highlightType:f,customDecorations:v,dynamicHeight:b,alwaysRecenter:j,lineNumberTransform:y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{value:d,onChange:h,language:p,disabled:s}),(0,i.jsx)(o,{error:u})]})})}},5168:(e,t,n)=>{n.d(t,{p:()=>a,Z:()=>r});var s=n(782);const r=e=>{var t;return(0,s.jsxs)("article",{className:["panel",null!==(t=e.className)&&void 0!==t?t:"",e.isEditorPanel?"editor":""].join(" "),children:[e.header&&(0,s.jsx)("header",{children:e.header}),(0,s.jsx)("main",{children:e.children}),e.footer&&(0,s.jsx)("footer",{children:e.footer})]})},a=e=>{var t;return(0,s.jsxs)("details",{className:null!==(t=e.className)&&void 0!==t?t:"",open:e.open,style:e.style,children:[(0,s.jsx)("summary",{children:(0,s.jsx)("div",{className:"flex row align-baseline",children:e.summary})}),e.children]})}},1384:(e,t,n)=>{n.d(t,{o:()=>a,w:()=>i});var s=n(8878),r=n(782);const a=e=>{const t=(0,s.useId)(),n=`tab-${t}`,a=`panel-${t}`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{role:"tab",id:n,"aria-controls":a,style:e.style,children:(0,r.jsxs)("label",{children:[e.title,(0,r.jsx)("input",{type:"radio",name:e.parent,"aria-controls":a,value:n,checked:e.checked,onChange:t=>{var n;return 1==t.target.checked&&(null===(n=e.onSelect)||void 0===n?void 0:n.call(e))}})]})}),(0,r.jsx)("div",{role:"tabpanel",id:a,"aria-labelledby":n,children:e.children})]})},i=e=>{var t,n,a,i;const l=(0,s.useId)(),[o,c]=(0,s.useState)(0),d=null!==(t=null===(n=e.tabIndex)||void 0===n?void 0:n.value)&&void 0!==t?t:o,u=null!==(a=null===(i=e.tabIndex)||void 0===i?void 0:i.set)&&void 0!==a?a:c;return(0,r.jsx)("section",{role:"tablist",style:{"--tab-count":e.children.length},children:s.Children.map(e.children,((e,t)=>(0,s.cloneElement)(e,{checked:t===d,parent:l,idx:t,onSelect:()=>{var n,s;u(t),null===(n=e.props)||void 0===n||null===(s=n.onSelect)||void 0===s||s.call(n)}})))})}},9267:(e,t,n)=>{n.d(t,{B:()=>y});var s=n(6458),r=n(5874),a=n(7365),i=n(1296),l=n(1593),o=n(7022),c=n(910),d=n(7589),u=n(6554),h=n(1091),m=n(8878),g=n(8029),p=n(3508),x=n(2675),f=n(5168),v=n(1384),b=n(782);const j="skipTestEditWarning",y=({runner:e,tst:[t,n,y],cmp:[k,C],out:[S],tstName:N,setPath:F,disabled:E=!1,defaultTst:L,defaultCmp:T,showName:I=!1,showLoad:R=!0,showClear:H=!1,speed:D,onSpeedChange:M,prefix:A})=>{var K,$;const{fs:z,setStatus:P}=(0,m.useContext)(c.L),{filePicker:U,tracking:W}=(0,m.useContext)(g.BR),[B,_]=(0,m.useState)(!0),q=(0,m.useRef)();(0,m.useEffect)((()=>(q.current=new class extends h.M{async reset(){var t;await(null===(t=e.current)||void 0===t?void 0:t.reset()),_(!0)}finishFrame(){var t;super.finishFrame(),null===(t=e.current)||void 0===t||t.finishFrame()}async tick(){var t,n;return _(!0),null!==(t=await(null===(n=e.current)||void 0===n?void 0:n.tick()))&&void 0!==t&&t}toggle(){var t;null===(t=e.current)||void 0===t||t.toggle()}},()=>{var e;null===(e=q.current)||void 0===e||e.stop()})),[e]);const O=(0,m.useCallback)((e=>{W.trackEvent("tab","change",e)}),[W]),[V,Z]=(0,m.useState)(!1),[G,Y]=(0,m.useState)(!1),[X,J]=(0,m.useState)(""),[Q,ee]=(0,m.useState)(""),te=(0,p.s)(),[ne,se]=(0,l.b)(null!==N&&void 0!==N?N:""),re=(0,m.useCallback)((async()=>{var e;const t=await U.select({suffix:".tst"}),s=await(0,i.g)(z,t);if((0,r.ys)(s))return void P("Failed to load test");null===F||void 0===F||F(t),se(null!==(e=t.split("/").pop())&&void 0!==e?e:"");const{tst:a,cmp:l}=(0,r.oA)(s);null===n||void 0===n||n(a),null===C||void 0===C||C(null!==l&&void 0!==l?l:"")}),[U,P,z]),[ae,ie]=(0,m.useState)();(0,m.useEffect)((()=>{ie((0,a._)(k,S))}),[S,k]);const le=(0,b.jsx)("dialog",{open:te.isOpen,children:(0,b.jsxs)("article",{children:[(0,b.jsx)("header",{children:"Warning"}),(0,b.jsxs)("main",{children:[(0,b.jsxs)("p",{children:["The test script can be edited during this IDE session. In the next session, the original script will be restored.",(0,b.jsx)("br",{})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,b.jsx)("input",{type:"checkbox",checked:G,onChange:e=>{Y(e.target.checked)}}),(0,b.jsx)("p",{children:"Do not show this again"})]}),(0,b.jsx)("p",{children:(0,b.jsx)("br",{})}),(0,b.jsx)("button",{onClick:()=>{G&&localStorage.setItem(j,"true"),te.close()},children:"Ok"})]})]})});return(0,b.jsx)(f.Z,{className:"_test_panel",header:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.x6,{id:"NnH3pK"}),I&&(""==ne?": Default":`: ${ne}`)]}),le,(0,b.jsx)("div",{className:"flex-1",children:q.current&&(0,b.jsx)(o.T,{prefix:(0,b.jsxs)(b.Fragment,{children:[A,H&&(0,b.jsx)("button",{className:"flex-0",onClick:()=>{n(null!==L&&void 0!==L?L:""),C(null!==T&&void 0!==T?T:"")},children:"Clear"}),V?(0,b.jsx)("button",{className:"flex-0",onClick:()=>{Z(!1),n(X),C(Q)},children:"Restore"}):(0,b.jsx)("button",{className:"flex-0",onClick:()=>{localStorage.getItem(j)||te.open(),Z(!0),J(t),ee(k)},children:"Edit"}),R&&(0,b.jsx)("button",{className:"flex-0",onClick:re,"data-tooltip":"Load a test script","data-placement":"bottom",children:"\ud83d\udcc2"})]}),runner:q.current,disabled:E,speed:D,onSpeedChange:M})})]}),children:(0,b.jsxs)(v.w,{children:[(0,b.jsx)(v.o,{title:"Test Script",onSelect:()=>O("tst"),children:(0,b.jsx)(x.K,{value:t,onChange:e=>{n(e),_(!1)},grammar:u.uG.parser,language:"tst",disabled:!V,highlight:B?y:void 0})}),(0,b.jsx)(v.o,{title:"Compare File",onSelect:()=>O("cmp"),children:(0,b.jsx)(x.K,{value:k,onChange:C,grammar:d.dl.parser,language:"cmp",lineNumberTransform:e=>"",disabled:!V})}),(0,b.jsxs)(v.o,{title:"Output File",onSelect:()=>O("out"),children:[""==S&&(0,b.jsx)("p",{children:"Execute test script to generate output."}),(0,b.jsx)(x.K,{value:S,onChange:()=>{},language:"cmp",disabled:!0,lineNumberTransform:e=>""})]}),(0,b.jsxs)(v.o,{title:"Diff Table",onSelect:()=>O("diff"),children:[""==S&&(0,b.jsx)("p",{children:"Execute test script to compare output."}),(null!==(K=null===ae||void 0===ae?void 0:ae.failureNum)&&void 0!==K?K:0)>0&&(0,b.jsxs)("p",{children:[null===ae||void 0===ae?void 0:ae.failureNum," comparison failure",1===(null===ae||void 0===ae?void 0:ae.failureNum)?"":"s",". Scroll down for details"]}),(0,b.jsx)(x.K,{value:null!==($=null===ae||void 0===ae?void 0:ae.text)&&void 0!==$?$:"",onChange:()=>{},language:"",disabled:!0,lineNumberTransform:e=>{var t;return null!==(t=null===ae||void 0===ae?void 0:ae.lineNumbers[e-1])&&void 0!==t?t:""},customDecorations:null===ae||void 0===ae?void 0:ae.decorations.map((e=>({span:e.span,cssClass:w(e.type)})))})]})]})})};function w(e){switch(e){case"error-line":return"diff-highlight-line-1";case"error-cell":return"diff-highlight-cell-1";case"correct-line":return"diff-highlight-line-2";case"correct-cell":return"diff-highlight-cell-2";default:return""}}},7437:(e,t,n)=>{n.d(t,{s:()=>o});var s=n(782),r=n(8878),a=n(6537);const i={Enter:128,Backspace:129,ArrowLeft:130,ArrowUp:131,ArrowRight:132,ArrowDown:133,Home:134,End:135,PageUp:136,PageDown:137,Insert:138,Delete:139,Escape:140,F1:141,F2:142,F3:143,F4:144,F5:145,F6:146,F7:147,F8:148,F9:149,F10:150,F11:151,F12:152},l={ArrowLeft:"L-arrow",ArrowUp:"U-arrow",ArrowRight:"R-arrow",ArrowDown:"D-arrow"};const o=({keyboard:e,update:t})=>{const[n,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(e.getKey());let m=0;const g=(0,r.useRef)(null),p=e=>{if(!n)return;d(function(e){return l[e]??e}(e.key)),g.current?.blur();const s=function(e){const t=i[e.key];if(void 0!==t)return t;if(1===e.key.length){const t=e.key.charCodeAt(0);if(t>=32&&t<=126)return t}return 0}(e);s&&e.preventDefault(),s!==m&&(f(s),t?.())},x=s=>{g.current?.blur(),n&&(e.getKey()&&s.preventDefault(),m=0,e.clearKey(),t?.(),h(e.getKey()),d(""))},f=t=>{0!==t&&(e.setKey(t),h(e.getKey()),m=t)};return(0,r.useEffect)((()=>(window.addEventListener("keydown",p),window.addEventListener("keyup",x),()=>{window.removeEventListener("keydown",p),window.removeEventListener("keyup",x)}))),(0,s.jsx)("article",{className:"panel",children:(0,s.jsxs)("div",{className:"flex row align-baseline",children:[(0,s.jsx)("button",{onClick:()=>{o(!n)},ref:g,className:"flex-0",style:{whiteSpace:"pre"},children:(n?"Disable":"Enable")+" Keyboard"}),(0,s.jsx)("div",{className:"flex-1"})," ",(0,s.jsxs)("div",{className:"flex-4",children:["Key: ",c]}),(0,s.jsx)("div",{className:"flex-4",children:(0,s.jsx)(a.d,{name:"Char code",bits:u})})]})})}},64:(e,t,n)=>{n.d(t,{ce:()=>w,Ay:()=>k});var s=n(782),r=n(135),a=n(8878),i=n(7076),l=n(9547),o=n(7496),c=n(7844),d=n(6513),u=n(8281);var h=n(1593);const m=0,g=1,p=e=>{const[t,n]=(0,a.useState)(e.mode??m),[r,i]=(0,h.b)(e.value),l=()=>{return(0,s.jsxs)("div",{style:{cursor:"text",...(e="full",t="inline",void 0===e&&void 0!==u.UL[t]&&(e=t),{..."inline"===t?{display:"inline-block"}:{},width:u.UL[e]??"0"})},onClick:()=>{n(g)},children:[r,"\xa0"]});var e,t},o=(0,a.useCallback)((e=>e?.select()),[]),c=(0,a.useCallback)((t=>{n(m),i(t.value??""),e.onChange(t.value??"")}),[e,n,i]),d=()=>(0,s.jsx)("span",{style:{display:"block",position:"relative"},children:(0,s.jsx)("input",{ref:o,style:{zIndex:"10",position:"absolute",left:"0",marginTop:"-0.375rem",color:"var(--text-color)"},onFocus:e.onFocus,onBlur:({target:e})=>c(e),onKeyPress:({key:e,target:t})=>{"Enter"===e&&c(t)},type:"text",defaultValue:r})});return(()=>{switch(t){case g:return d();case m:return l();default:return(0,s.jsx)("span",{})}})()};var x=n(2144),f=n(910);function v(e,t,n){const{totalHeight:s,toleranceHeight:r,bufferedItems:a,settings:{itemHeight:i,minIndex:l,maxIndex:o}}=t,c=l+Math.floor((e-r)/i),d=function(e,t,n,s,r){const a=Math.max(0,e,n);return[...r(a,Math.min(t,n+s-1)-a)]}(l,o,c,a,n),u=Math.max((c-l)*i,0);return{scrollTop:e,topPaddingHeight:u,bottomPaddingHeight:Math.max(s-(u+d.length*i),0),data:d}}const b=e=>{const t=(0,a.useRef)(null),{settings:n,startState:r,reducer:i}=(0,a.useMemo)((()=>{const t=function(e){const{minIndex:t=0,maxIndex:n=Number.MAX_SAFE_INTEGER,startIndex:s=0,itemHeight:r=20,count:a=Math.max(n-t,1),tolerance:i=a}=e;return{minIndex:t,maxIndex:n,startIndex:s,itemHeight:r,count:a,tolerance:i}}(e.settings??{}),n=function(e,t){const{minIndex:n,maxIndex:s,startIndex:r,itemHeight:a,count:i,tolerance:l}=e,o=i+2*l,c=Math.max(0,r-l-n),d=i*a,u=Math.max(s-n,1)*a,h=l*a,m=c*a,g={scrollTop:0,settings:e,viewportHeight:d,totalHeight:u,toleranceHeight:h,bufferedItems:o,topPaddingHeight:m,bottomPaddingHeight:u-(m+(d+2*h)),data:[]};return{...g,...v(m+h,g,t)}}(t,e.get),s=(r=e.get,(e,t)=>({...e,...v(t,e,r)}));var r;return{settings:t,reducer:s,startState:n}}),[e.settings,e.get]),[l,o]=(0,a.useReducer)(i,r);(0,a.useEffect)((()=>{null!==t.current&&o(t.current.scrollTop)}),[n,e.row]);const c=(0,a.useCallback)((e=>{e&&(e.scrollTop=t.current?t.current.scrollTop:n.startIndex*n.itemHeight),t.current=e}),[t,n.startIndex,n.itemHeight]),d=l.data.map((t=>(0,s.jsx)("div",{style:{height:`${n.itemHeight}px`},children:e.row(t)},e.rowKey(t))));return(0,s.jsxs)("div",{ref:c,style:{height:`${l.viewportHeight}px`,overflowY:"scroll",overflowAnchor:"none"},className:e.className??"",onScroll:e=>o(e.target.scrollTop),children:[(0,s.jsx)("div",{style:{height:`${l.topPaddingHeight}px`}}),d,(0,s.jsx)("div",{style:{height:`${l.bottomPaddingHeight}px`}})]})},j=({memory:e,jmp:t={value:0},highlight:n=-1,editable:r=!1,justifyLeft:i=!1,count:l,maxSize:o,offset:d=0,cellLabels:u,format:h=c.FN,onChange:m=(()=>{}),onFocus:g=(()=>{})})=>{const p=(0,a.useMemo)((()=>({count:Math.min(e.size,l??25),maxIndex:o??e.size,itemHeight:34,startIndex:t.value})),[e.size,t]),x=(0,a.useCallback)(((t,n)=>e.range(t+d,t+d+n).map(((n,s)=>[s+t+d,{value:n,wasChanged:e.wasChanged(s+t+d)}]))),[e]),f=(0,a.useCallback)((([t,a])=>(0,s.jsx)(y,{index:t,value:a.wasChanged?h(a.value):"",label:(u?.[t]??"").padStart(u?Math.max(...u.map((e=>e.length))):0),showLabel:void 0!=u,size:e.size,editable:r,justifyLeft:i,highlight:t===n,onChange:m,onFocus:g})),[h,r,n,m]);return(0,s.jsx)(b,{settings:p,get:x,row:f,rowKey:([e])=>e})},y=({index:e,value:t,label:n,showLabel:a=!1,size:i,highlight:l=!1,editable:o=!1,justifyLeft:d=!1,onChange:u=(()=>{}),onFocus:h=(()=>{})})=>(0,s.jsxs)("div",{style:{display:"flex",height:"100%"},children:[a&&(0,s.jsx)("code",{style:{...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:n??""}),(0,s.jsx)("code",{style:{...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:i?(0,c.FN)(e).padStart(Math.ceil(Math.log10(i))," "):(0,c.FN)(e)}),(0,s.jsx)("code",{style:{flex:"1",textAlign:d?"left":"right",color:"var(--text-color)",...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{}},children:o?(0,s.jsx)(p,{value:t,highlight:l,onChange:n=>u(e,n,Number(t)),onFocus:()=>h(e)}):(0,s.jsx)("span",{style:{color:"var(--text-color)"},children:t})})]}),w=(0,a.forwardRef)((({name:e="Memory",className:t,displayEnabled:n=!0,highlight:r=-1,editable:u=!0,memory:m,format:g="dec",onSetFormat:p,excludedFormats:v=[],count:b,maxSize:y,offset:w,initialAddr:k,cellLabels:C,fileSelect:S,showClear:N=!0,onChange:F},E)=>{const[L,T]=(0,h.b)(g),[I,R]=(0,a.useState)(""),[H,D]=(0,a.useState)({value:k??0}),[M,A]=(0,h.b)(r),[K,$]=(0,a.useState)(0),z=()=>{const e=!isNaN(parseInt(I))&&isFinite(parseInt(I))?Number(I):0;A(e),D({value:e}),U()},{setStatus:P}=(0,a.useContext)(f.L),U=()=>{$(K+1)};(0,a.useImperativeHandle)(E,(()=>({rerender:U})));(0,d.rT)((()=>{R(""),D({value:0})}));return(0,s.jsxs)("article",{className:`panel memory ${t??e}`,children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{style:{whiteSpace:"nowrap"},children:e}),(0,s.jsxs)("fieldset",{role:"group",children:[S&&(0,s.jsx)("button",{onClick:async()=>{if(F?.(),S){const{name:e,content:t}=await S();P(x.F),requestAnimationFrame((async()=>{const n=e.endsWith("hack")?l.aU:e.endsWith("asm")?l.aY:l.yt;requestAnimationFrame((async()=>{try{const s=await n(t);m.loadBytes(s),P(""),T(e.endsWith("hack")?"bin":e.endsWith("asm")?"asm":L),z()}catch(s){return void P(`Error loading memory: ${s.message}`)}}))}))}},className:"flex-0","data-tooltip":"Load file","data-placement":"bottom",children:"\ud83d\udcc2"}),N&&(0,s.jsx)("button",{onClick:()=>{m.reset(),F?.(),U()},className:"flex-0","data-tooltip":"Clear","data-placement":"bottom",children:"\ud83c\udd91"}),(0,s.jsx)("input",{style:{width:"4em",height:"100%"},placeholder:"Addr",value:I,onKeyDown:({key:e})=>"Enter"===e&&z(),onChange:({target:{value:e}})=>R(e)}),(0,s.jsx)("button",{onClick:z,className:"flex-0","data-tooltip":"Scroll to address","data-placement":"bottom",children:"\u2935\ufe0f"}),(0,s.jsx)("select",{value:L,onChange:e=>(e=>{T(e),p?.(e)})(e.target.value),children:i.hR.filter((e=>!v.includes(e))).map((e=>(0,s.jsx)("option",{children:e},e)))})]})]}),n?(0,s.jsx)(j,{jmp:H,memory:m,highlight:M,editable:u,justifyLeft:"asm"==L,count:b,format:e=>function(e,t){switch(e){case"bin":return(0,c.e5)(t);case"hex":return(0,c.uh)(t);case"asm":return(0,o.k)(t);default:return(0,c.FN)(t)}}(L,e),cellLabels:C,maxSize:y,offset:w,onChange:(e,t)=>{m.update(e,t,L??"dec"),F?.(),U()},onFocus:e=>A(e)},K):"Memory display is disabled"]})}));w.displayName="Memory";const k=w},6537:(e,t,n)=>{n.d(t,{d:()=>a});var s=n(782),r=n(7844);const a=({name:e,bits:t})=>(0,s.jsxs)("div",{children:[e,": ",(0,r.FN)(t)]})},4668:(e,t,n)=>{n.d(t,{f:()=>d});var s=n(782),r=n(2469),a=n(8878),i=n(6513);const l="white",o="black";function c(e,t,n,s){const r=4*(512*n+t),a=s===l?255:0;e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=255}const d=({memory:e,showScaleControls:t=!1,scale:n=1,onScale:d})=>{const u=(0,a.useRef)(),[h,m]=(0,a.useState)(n),g=e=>{d?.(e),m(e)},p=(0,a.useCallback)((()=>{const t=u.current?.getContext("2d",{willReadFrequently:!0})??void 0;t&&function(e,t){const n=(0,r.Z1)(e.getImageData(0,0,512,256),"Failed to create Context2d");for(let r=0;r<512;r++)for(let e=0;e<256;e++){const i=(s=r,a=e,0===(t.get(32*a+(s/16|0))&1<<s%16)?l:o);c(n.data,r,e,i)}var s,a;e.putImageData(n,0,0)}(t,e)}),[e]),x=(0,a.useCallback)((e=>{u.current=e??void 0,p()}),[u,p]);return(0,i.Nt)(p),(0,i.rT)((()=>{u.current?.getContext("2d")?.clearRect(0,0,u.current.width,u.current.height)})),(0,s.jsxs)("article",{className:"panel",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{children:"Screen"}),t&&(0,s.jsxs)("fieldset",{role:"group",children:[(0,s.jsx)("button",{"aria-current":0===h,onClick:()=>g(0),children:"x0"}),(0,s.jsx)("button",{"aria-current":1===h,onClick:()=>g(1),children:"x1"}),(0,s.jsx)("button",{"aria-current":2===h,onClick:()=>g(2),children:"x2"})]})]}),h>0&&(0,s.jsx)("main",{style:{backgroundColor:"var(--code-background-color)"},children:(0,s.jsx)("figure",{style:{width:512*h+"px",height:256*h+"px",boxSizing:"content-box",marginInline:"auto",margin:"auto",borderTop:"2px solid gray",borderLeft:"2px solid gray",borderBottom:"2px solid lightgray",borderRight:"2px solid lightgray"},children:(0,s.jsx)("canvas",{ref:x,width:512,height:256,style:{transform:`translate(-50%, -50%) scale(${h}) translate(50%, 50%)`,imageRendering:"pixelated"}})})})]})}},6513:(e,t,n)=>{n.d(t,{Nt:()=>l,rT:()=>o,wr:()=>d});var s=n(782),r=n(8878),a=n(4641),i=n(1164);function l(e){(0,r.useEffect)((()=>{const t=i.z.get().frame$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function o(e){(0,r.useEffect)((()=>{const t=i.z.get().reset$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function c(){return(0,a.V)(i.z.get())}const d=()=>{const e=function(){const[e,t]=(0,r.useState)(c());return(0,r.useEffect)((()=>{const e=i.z.get().$.subscribe((()=>{t(c())}));return()=>e.unsubscribe()}),[]),e}();return(0,s.jsx)("span",{style:{whiteSpace:"nowrap"},children:e})}},2144:(e,t,n)=>{n.d(t,{F:()=>s});const s="Loading in progress..."},7022:(e,t,n)=>{n.d(t,{T:()=>i});var s=n(782),r=n(8878),a=n(1593);const i=e=>{const t=function(e){const t=(0,r.useRef)((()=>{})),{initialState:n,reducers:s,actions:i}=(0,r.useMemo)((()=>((e,t)=>{const n={running:e.running,speed:e.speed,steps:e.steps},s=e.finishFrame.bind(e);return e.finishFrame=function(){s(),t.current({action:"update"})},{initialState:n,reducers:{update(t){t.running=e.running,t.speed=e.speed,t.steps=e.steps},setSteps(t,n){t.steps=n,e.steps=n},setSpeed(t,n){t.speed=n,e.speed=n}},actions:{frame(){e.frame()},start(){e.start(),t.current({action:"update"})},stop(){e.stop(),t.current({action:"update"})},reset(){e.reset(),t.current({action:"update"})}}}})(e,t)),[e,t]),[l,o]=(0,a.A)(s,n);return t.current=o,{state:l,dispatch:t.current,actions:i}}(e.runner),[n,i]=(0,a.b)(e.speed??2),l={0:[1e3,1],1:[500,1],2:[16,1],3:[16,16666],4:[16,499980]};(0,r.useEffect)((()=>{o()}),[n]);const o=()=>{const[e,s]=l[n];t.dispatch({action:"setSpeed",payload:e}),t.dispatch({action:"setSteps",payload:s})},c=(0,r.useRef)(null),d=e=>{c.current?.blur()};return(0,r.useEffect)((()=>(window.addEventListener("keydown",d),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",d)}))),(0,s.jsxs)("div",{className:"flex row wrap",children:[(0,s.jsxs)("fieldset",{role:"group",children:[e.prefix,(0,s.jsx)("button",{className:"flex-0",disabled:e.disabled,onClick:()=>t.actions.frame(),"data-tooltip":e.overrideTooltips?.step??"Step","data-placement":"bottom",children:"\u27a1\ufe0f"}),(0,s.jsx)("button",{className:"flex-0",ref:c,disabled:e.disabled,onClick:()=>t.state.running?t.actions.stop():t.actions.start(),"data-tooltip":t.state.running?e.overrideTooltips?.pause??"Pause":e.overrideTooltips?.run??"Run","data-placement":"bottom",children:t.state.running?"\u23f8":"\ufe0f\u23e9"}),(0,s.jsx)("button",{className:"flex-0",onClick:()=>{t.state.running&&t.actions.stop(),t.actions.reset()},"data-tooltip":e.overrideTooltips?.reset??"Reset","data-placement":"bottom",children:"\u23ee"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:"normal"},children:[(0,s.jsx)("span",{style:{padding:"0.2rem"},children:"Slow"}),(0,s.jsx)("input",{type:"range",min:0,max:4,step:1,value:n,disabled:t.state.running,onChange:t=>{const n=Number(t.target.value);i(n),e.onSpeedChange?.(n)},style:{width:"150px",padding:"0.2rem"},"data-tooltip":"Execution speed","data-placement":"bottom"}),(0,s.jsx)("span",{style:{padding:"0.2rem"},children:"Fast"})]}),e.children]})}},135:(e,t,n)=>{n.d(t,{Wf:()=>a});var s=n(8281);function r(e){switch(e){case"t":return[...r("tl"),...r("tr")];case"r":return[...r("tr"),...r("br")];case"b":return[...r("br"),...r("bl")];case"l":return[...r("tl"),...r("bl")];default:return[s.Hw[e]]}}function a(e="",t=""){var n;n=e,void 0!==s.Hw[n]&&(t=e,e="");const a=function(e){return s.DN[e]}(e);return r(t).reduce(((e,t)=>(""===t?e.borderRadius=a:e[`border${t}Radius`]=a,e)),{})}},8281:(e,t,n)=>{n.d(t,{DN:()=>s,Hw:()=>r,UL:()=>a});const s={none:"0px",sm:"0.125rem","":"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},r={"":"",t:"Top",r:"Right",l:"Left",b:"Bottom",tl:"TopLeft",tr:"TopRight",bl:"BottomLeft",br:"BottomRight"},a={"1/4":"25%","1/2":"50%","3/4":"75%",full:"100%"}},1091:(e,t,n)=>{n.d(t,{M:()=>r});const s=n(1164).z.get();class r{frame(){this.tick(),this.finishFrame()}finishFrame(){s.frame()}steps=1;speed=1e3;get running(){return this.#e}#e=!1;#t=0;#n=0;#s=async()=>{if(!this.#e)return;const e=Date.now(),t=e-this.#n;if(this.#n=e,this.#t+=t,this.#t>this.speed){let e=!1,t=this.steps;const n=`Timing ${t} steps`;for(console.time(n);!e&&t--;)e=await this.tick();console.timeEnd(n),this.finishFrame(),e&&this.stop(),this.#t-=this.speed}requestAnimationFrame(this.#s)};start(){this.#e=!0,this.#n=Date.now()-this.speed,this.#s(),this.toggle()}stop(){this.#e=!1,this.toggle()}}}}]);
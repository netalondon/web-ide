"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[691],{691:function(t,n,i){i.d(n,{J_:function(){return f}});var e=i(726),r=i(1092),u=i(7791),a=i(4625),s=i(8090),o=i(3118),l=i(6329);function c(t,n){if(void 0!==n){if(n>=t)return n-t+1;if(t>0&&0===n)return 1;throw new Error("Bus specification has start > end (".concat(t," > ").concat(n,")"))}}function h(t,n){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,r.Z)().mark((function t(n,i){var e,u,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,o._c)(n)&&void 0!==i){t.next=2;break}return t.abrupt("return",(0,o.cT)(n));case 2:return t.prev=2,t.next=5,i.readFile("".concat(n,".hdl"));case 5:return e=t.sent,u=s.Gq.parse(e),l=(0,a.IY)(u)?f((0,a.Ok)(u),i):(0,a.UG)(new Error("HDL Was not parsed")),t.abrupt("return",l);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",(0,a.UG)(new Error("Could not load chip ".concat(n,".hdl"))));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}function f(t,n){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function t(n,i){var u,s,v,f,d,Z,b;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("BUILTIN"!==n.parts){t.next=2;break}return t.abrupt("return",(0,o.cT)(n.name.toString()));case 2:u=new l.Af(n.ins.map((function(t){var n=t.pin,i=t.width;return{pin:n.toString(),width:i}})),n.outs.map((function(t){var n=t.pin,i=t.width;return{pin:n.toString(),width:i}})),n.name.toString(),[],n.clocked),s=(0,e.Z)(n.parts),t.prev=4,s.s();case 6:if((v=s.n()).done){t.next=24;break}return f=v.value,t.next=10,h(f.name.toString(),i);case 10:if(d=t.sent,!(0,a.dZ)(d)){t.next=13;break}return t.abrupt("return",d);case 13:Z=(0,a.Ok)(d),b=f.wires.map((function(t){var n,i,e,r,u=t.lhs,a=t.rhs;return{to:{name:u.pin.toString(),start:null!==(n=u.start)&&void 0!==n?n:0,width:c(null!==(i=u.start)&&void 0!==i?i:0,u.end)},from:{name:a.pin.toString(),start:null!==(e=a.start)&&void 0!==e?e:0,width:c(null!==(r=a.start)&&void 0!==r?r:0,a.end)}}})),t.prev=15,u.wire(Z,b),t.next=22;break;case 19:return t.prev=19,t.t0=t.catch(15),t.abrupt("return",(0,a.UG)(t.t0));case 22:t.next=6;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(4),s.e(t.t1);case 29:return t.prev=29,s.f(),t.finish(29);case 32:return t.abrupt("return",(0,a.Ok)(u));case 33:case"end":return t.stop()}}),t,null,[[4,26,29,32],[15,19]])})))).apply(this,arguments)}},3300:function(t,n,i){i.d(n,{N1:function(){return E},Z9:function(){return x},ar:function(){return W},lL:function(){return w},m1:function(){return A},zp:function(){return S}});var e=i(7538),r=i(3943),u=i(1026),a=i(9422),s=i(7169),o=i(3243),l=i(7597),c=i(4649),h=i(1092),v=i(7791),f=i(2951),d=i(1976),Z=i(7591),b=i(4337),g=i(6329),y=i(3116),p=i(134),m=i(326),k=i(7930),V=i(5838),A=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){return(0,f.Z)(this,i),n.call(this,16,"ROM")}return(0,d.Z)(i,[{key:"load",value:function(){var t=(0,v.Z)((0,h.Z)().mark((function t(n,i){var e=this;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,k.zD)(n,i);case 3:t.sent.map((function(t,n){return e.at(n).busVoltage=t})),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("ROM32K Failed to load file ".concat(i));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(n,i){return t.apply(this,arguments)}}()}]),i}(y.FH),w=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){return(0,f.Z)(this,i),n.call(this,13,"Screen")}return(0,d.Z)(i)}(y.FH);(0,c.Z)(w,"SIZE",V.yJ),(0,c.Z)(w,"OFFSET",V.GD);var E=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){return(0,f.Z)(this,i),n.call(this,[],["out[16]"],"Keyboard")}return(0,d.Z)(i,[{key:"getKey",value:function(){return this.out().busVoltage}},{key:"setKey",value:function(t){this.out().busVoltage=65535&t}},{key:"clearKey",value:function(){this.out().busVoltage=0}}]),i}(g.Af);(0,c.Z)(E,"OFFSET",V.eu);var S=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){var t;return(0,f.Z)(this,i),t=n.call(this,["in[16]","load","address[15])"],["out[16]"],"Memory"),(0,c.Z)((0,s.Z)(t),"ram",new y.xs),(0,c.Z)((0,s.Z)(t),"screen",new w),(0,c.Z)((0,s.Z)(t),"keyboard",new E),(0,c.Z)((0,s.Z)(t),"address",0),t.parts.add(t.keyboard),t.parts.add(t.screen),t.parts.add(t.ram),t}return(0,d.Z)(i,[{key:"tick",value:function(){var t=this.in("load").voltage();if(this.address=this.in("address").busVoltage,t){var n=this.in().busVoltage;this.address>=E.OFFSET||(this.address>=w.OFFSET?this.screen.at(this.address-w.OFFSET).busVoltage=n:this.ram.at(this.address).busVoltage=n)}}},{key:"tock",value:function(){this.eval()}},{key:"eval",value:function(){if(this.ram){this.address=this.in("address").busVoltage;var t,n,i=0;if(this.address>=E.OFFSET)i=null!==(t=null===(n=this.keyboard)||void 0===n?void 0:n.out().busVoltage)&&void 0!==t?t:0;else if(this.address>=w.OFFSET){var e,r;i=null!==(e=null===(r=this.screen)||void 0===r?void 0:r.at(this.address-w.OFFSET).busVoltage)&&void 0!==e?e:0}else{var u,a;i=null!==(u=null===(a=this.ram)||void 0===a?void 0:a.at(this.address).busVoltage)&&void 0!==u?u:0}this.out().busVoltage=i}}},{key:"in",value:function(t){if(null!==t&&void 0!==t&&t.startsWith("RAM16K")){var n,e,r,u=(0,m.o5)(null!==(n=null===(e=t.match((0,a.Z)(/\[(\d+)\]/,{idx:1})))||void 0===e||null===(r=e.groups)||void 0===r?void 0:r.idx)&&void 0!==n?n:"0");return this.ram.at(u)}if(null!==t&&void 0!==t&&t.startsWith("Screen")){var s,c,h,v=(0,m.o5)(null!==(s=null===(c=t.match((0,a.Z)(/\[(\d+)\]/,{idx:1})))||void 0===c||null===(h=c.groups)||void 0===h?void 0:h.idx)&&void 0!==s?s:"0");return this.screen.at(v)}return(0,o.Z)((0,l.Z)(i.prototype),"in",this).call(this,t)}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.startsWith("RAM16K")?this.at(16383&n):t.startsWith("Screen")?this.at(n&8191+w.OFFSET):t.startsWith("Keyboard")?this.at(E.OFFSET):t.startsWith("Memory")?this.at(n):(0,o.Z)((0,l.Z)(i.prototype),"get",this).call(this,t,n)}},{key:"at",value:function(t){return t>=E.OFFSET?this.keyboard.out():t>=w.OFFSET?this.screen.at(t-w.OFFSET):this.ram.at(t)}},{key:"reset",value:function(){this.address=0,this.ram.reset(),this.screen.reset(),(0,o.Z)((0,l.Z)(i.prototype),"reset",this).call(this)}}]),i}(g.tI),x=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){var t;return(0,f.Z)(this,i),t=n.call(this,["inM[16]","instruction[16]","reset"],["outM[16]","writeM","addressM[15]","pc[15]"]),(0,c.Z)((0,s.Z)(t),"_state",(0,p.Zu)()),t}return(0,d.Z)(i,[{key:"state",get:function(){return this._state}},{key:"tick",value:function(){var t,n=(0,p.aL)(this.cpuInput(),this._state),i=(0,u.Z)(n,2),e=i[0],r=i[1];this._state=e,this.out("writeM").pull(r?g.lj:g.yE),this.out("outM").busVoltage=null!==(t=this._state.ALU)&&void 0!==t?t:0}},{key:"tock",value:function(){var t,n,i,e;if(this._state){var r=(0,p.Ff)(this.cpuInput(),this._state),a=(0,u.Z)(r,2),s=a[0],o=a[1];this._state=o,this.out("addressM").busVoltage=null!==(t=s.addressM)&&void 0!==t?t:0,this.out("outM").busVoltage=null!==(n=s.outM)&&void 0!==n?n:0,this.out("writeM").pull(s.writeM?g.lj:g.yE),this.out("pc").busVoltage=null!==(i=null===(e=this._state)||void 0===e?void 0:e.PC)&&void 0!==i?i:0}}},{key:"cpuInput",value:function(){return{inM:this.in("inM").busVoltage,instruction:this.in("instruction").busVoltage,reset:1===this.in("reset").busVoltage}}},{key:"get",value:function(t,n){return null!==t&&void 0!==t&&t.startsWith("ARegister")?new g.qP("ARegister",this._state.A):null!==t&&void 0!==t&&t.startsWith("DRegister")?new g.qP("DRegister",this._state.D):null!==t&&void 0!==t&&t.startsWith("PC")?new g.qP("PC",this._state.PC):(0,o.Z)((0,l.Z)(i.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this._state=(0,p.Zu)(),this._state.PC=-1,(0,o.Z)((0,l.Z)(i.prototype),"reset",this).call(this)}}]),i}(g.tI),M=new WeakMap,P=new WeakMap,j=new WeakMap,W=function(t){(0,Z.Z)(i,t);var n=(0,b.Z)(i);function i(){var t;return(0,f.Z)(this,i),t=n.call(this,["reset"],[]),(0,e.Z)((0,s.Z)(t),M,{writable:!0,value:new S}),(0,e.Z)((0,s.Z)(t),P,{writable:!0,value:new A}),(0,e.Z)((0,s.Z)(t),j,{writable:!0,value:new x}),t.wire((0,r.Z)((0,s.Z)(t),j),[{from:{name:"reset",start:0},to:{name:"reset",start:0}},{from:{name:"instruction",start:0},to:{name:"instruction",start:0}},{from:{name:"outM",start:0},to:{name:"inM",start:0}},{from:{name:"writeM",start:0},to:{name:"writeM",start:0}},{from:{name:"addressM",start:0},to:{name:"addressM",start:0}}]),t.wire((0,r.Z)((0,s.Z)(t),P),[{from:{name:"pc",start:0},to:{name:"address",start:0}},{from:{name:"instruction",start:0},to:{name:"out",start:0}}]),t.wire((0,r.Z)((0,s.Z)(t),M),[{from:{name:"inM",start:0},to:{name:"in",start:0}},{from:{name:"writeM",start:0},to:{name:"load",start:0}},{from:{name:"addressM",start:0},to:{name:"address",start:0}},{from:{name:"outM",start:0},to:{name:"out",start:0}}]),t}return(0,d.Z)(i,[{key:"eval",value:function(){(0,o.Z)((0,l.Z)(i.prototype),"eval",this).call(this)}},{key:"get",value:function(t,n){return t.startsWith("PC")||t.startsWith("ARegister")||t.startsWith("DRegister")?(0,r.Z)(this,j).get(t):t.startsWith("RAM16K")?(0,r.Z)(this,M).get(t,n):(0,o.Z)((0,l.Z)(i.prototype),"get",this).call(this,t,n)}},{key:"load",value:function(t,n){return(0,r.Z)(this,P).load(t,n)}}]),i}(g.Af)},3118:function(t,n,i){i.d(n,{JU:function(){return O},zZ:function(){return K},cT:function(){return H},_c:function(){return q}});var e=i(1026),r=i(4625),u=i(2951),a=i(1976),s=i(7591),o=i(4337),l=i(6329);var c=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[1===t&&1===n?l.lj:l.yE]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,e.Z)(t,1)[0];this.out().pull(n)}}]),i}(l.Af),h=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[t&n&65535]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af);var v=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in","sel"],["a","b"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[n===l.yE&&t===l.lj?l.lj:l.yE,n===l.lj&&t===l.lj?l.lj:l.yE]}(this.in("in").voltage(),this.in("sel").voltage()),n=(0,e.Z)(t,2),i=n[0],r=n[1];this.out("a").pull(i),this.out("b").pull(r)}}]),i}(l.Af),f=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in","sel[2]"],["a","b","c","d"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[0===n&&t===l.lj?l.lj:l.yE,1===n&&t===l.lj?l.lj:l.yE,2===n&&t===l.lj?l.lj:l.yE,3===n&&t===l.lj?l.lj:l.yE]}(this.in("in").voltage(),this.in("sel").busVoltage),n=(0,e.Z)(t,4),i=n[0],r=n[1],u=n[2],a=n[3];this.out("a").pull(i),this.out("b").pull(r),this.out("c").pull(u),this.out("d").pull(a)}}]),i}(l.Af),d=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in","sel[3]"],["a","b","c","d","e","f","g","h"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[0===n&&t===l.lj?l.lj:l.yE,1===n&&t===l.lj?l.lj:l.yE,2===n&&t===l.lj?l.lj:l.yE,3===n&&t===l.lj?l.lj:l.yE,4===n&&t===l.lj?l.lj:l.yE,5===n&&t===l.lj?l.lj:l.yE,6===n&&t===l.lj?l.lj:l.yE,7===n&&t===l.lj?l.lj:l.yE]}(this.in("in").voltage(),this.in("sel").busVoltage),n=(0,e.Z)(t,8),i=n[0],r=n[1],u=n[2],a=n[3],s=n[4],o=n[5],c=n[6],h=n[7];this.out("a").pull(i),this.out("b").pull(r),this.out("c").pull(u),this.out("d").pull(a),this.out("e").pull(s),this.out("f").pull(o),this.out("g").pull(c),this.out("h").pull(h)}}]),i}(l.Af);function Z(t,n,i){return[i===l.yE?t:n]}function b(t,n,i,e,r){var u=1&r;return 0===(2&r)?Z(t,n,u):Z(i,e,u)}var g=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b","sel"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n,i){return[i===l.yE?t:n]}(this.in("a").voltage(),this.in("b").voltage(),this.in("sel").voltage()),n=(0,e.Z)(t,1)[0];this.out().pull(n)}}]),i}(l.Af),y=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]","sel"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=Z(this.in("a").busVoltage,this.in("b").busVoltage,this.in("sel").voltage()),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af),p=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]","c[16]","d[16]","sel[2]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=b(this.in("a").busVoltage,this.in("b").busVoltage,this.in("c").busVoltage,this.in("d").busVoltage,this.in("sel").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af),m=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]","c[16]","d[16]","e[16]","f[16]","g[16]","h[16]","sel[3]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n,i,e,r,u,a,s,o){var l=3&o;return 0===(4&o)?b(t,n,i,e,l):b(r,u,a,s,l)}(this.in("a").busVoltage,this.in("b").busVoltage,this.in("c").busVoltage,this.in("d").busVoltage,this.in("e").busVoltage,this.in("f").busVoltage,this.in("g").busVoltage,this.in("h").busVoltage,this.in("sel").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af),k=i(326);var V=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[1===t&&1===n?l.yE:l.lj]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,e.Z)(t,1)[0];this.out().pull(n)}}]),i}(l.Af),A=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in("a").busVoltage,n=this.in("b").busVoltage;this.out().busVoltage=(0,k.C2)(t,n)}}]),i}(l.Af);var w=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in("in").voltage(),n=[t===l.yE?l.lj:l.yE],i=(0,e.Z)(n,1)[0];this.out().pull(i)}}]),i}(l.Af),E=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in[16]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=[65535&~this.in().busVoltage],n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af);function S(t,n){return[1===t||1===n?l.lj:l.yE]}var x=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=S(this.in("a").voltage(),this.in("b").voltage()),n=(0,e.Z)(t,1)[0];this.out().pull(n)}}]),i}(l.Af),M=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[65535&(t|n)]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af),P=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in[8]"],["out"],"Or8way")}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in().busVoltage,n=[0===(255&t)?l.yE:l.lj],i=(0,e.Z)(n,1)[0];this.out().pull(i)}}]),i}(l.Af);var j=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b"],["out"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[t===l.lj&&n===l.yE||t===l.yE&&n===l.lj?l.lj:l.yE]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,e.Z)(t,1)[0];this.out().pull(n)}}]),i}(l.Af),W=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n){return[65535&(t^n)]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af);function _(t,n){return[t+n&65535]}var C=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a[16]","b[16]"],["out[16]"],"Add16")}return(0,a.Z)(i,[{key:"eval",value:function(){var t=_(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,e.Z)(t,1)[0];this.out().busVoltage=n}}]),i}(l.Af),L=i(6693),F=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]"],"ALU")}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in("x").busVoltage,n=this.in("y").busVoltage,i=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0),r=(0,L.Bb)(i,t,n),u=(0,e.Z)(r,1)[0];this.out().busVoltage=u}}]),i}(l.Af),O=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]","zr","ng"],"ALU")}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in("x").busVoltage,n=this.in("y").busVoltage,i=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0),r=(0,L.Bb)(i,t,n),u=(0,e.Z)(r,2),a=u[0],s=u[1],o=s===L.vU.Negative?l.lj:l.yE,c=s===L.vU.Zero?l.lj:l.yE;this.out("out").busVoltage=a,this.out("ng").pull(o),this.out("zr").pull(c)}},{key:"op",value:function(){var t=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0);return t}}]),i}(l.Af);function I(t,n){return[1===t&&0===n||0===t&&1===n?l.lj:l.yE,1===t&&1===n?l.lj:l.yE]}var R=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b"],["sum","carry"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=I(this.in("a").voltage(),this.in("b").voltage()),n=(0,e.Z)(t,2),i=n[0],r=n[1];this.out("sum").pull(i),this.out("carry").pull(r)}}]),i}(l.Af);var B=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["a","b","c"],["sum","carry"])}return(0,a.Z)(i,[{key:"eval",value:function(){var t=function(t,n,i){var r=I(t,n),u=(0,e.Z)(r,2),a=u[0],s=u[1],o=I(a,i),l=(0,e.Z)(o,2),c=l[0],h=S(s,l[1]);return[c,(0,e.Z)(h,1)[0]]}(this.in("a").voltage(),this.in("b").voltage(),this.in("c").voltage()),n=(0,e.Z)(t,2),i=n[0],r=n[1];this.out("sum").pull(i),this.out("carry").pull(r)}}]),i}(l.Af);var T=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(){return(0,u.Z)(this,i),n.call(this,["in[16]"],["out[16]"],"Inc16")}return(0,a.Z)(i,[{key:"eval",value:function(){var t=this.in().busVoltage,n=_(t,1),i=(0,e.Z)(n,1)[0];this.out().busVoltage=i}}]),i}(l.Af),D=i(3300),z=i(7039),N=function(t){(0,s.Z)(i,t);var n=(0,o.Z)(i);function i(t){return(0,u.Z)(this,i),n.call(this,["in"],["out"],t,["t"])}return(0,a.Z)(i,[{key:"tick",value:function(){var t=this.in().voltage();this.pin("t").pull(t)}},{key:"tock",value:function(){var t=this.pin("t").voltage();this.out().pull(t)}}]),i}(l.tI),U=i(3116),K=new Map([["Nand",V],["Nand16",A],["Not",w],["Not16",E],["And",c],["And16",h],["Or",x],["Or16",M],["Or8Way",P],["XOr",j],["XOr16",W],["Xor",j],["Xor16",W],["Mux",g],["Mux16",y],["Mux4Way16",p],["Mux8Way16",m],["DMux",v],["DMux4Way",f],["DMux8Way",d],["HalfAdder",R],["FullAdder",B],["Add16",C],["Inc16",T],["ALU",O],["ALUNoStat",F],["DFF",N],["Bit",z.sU],["Register",z.aX],["ARegister",z.aX],["DRegister",z.aX],["PC",z.PC],["RAM8",U.HX],["RAM64",U.IH],["RAM512",U.OB],["RAM4K",U.rS],["RAM16K",U.xs],["ROM32K",D.m1],["Screen",D.lL],["Keyboard",D.N1],["CPU",D.Z9],["Computer",D.ar],["Memory",D.zp],["ARegister",z.l0],["DRegister",z.l0]].map((function(t){var n=(0,e.Z)(t,2),i=n[0],r=n[1];return[i,function(){var t=new r;return t.name=i,t}]})));function q(t){return K.has(t)}function H(t){var n=K.get(t);return n?(0,r.Ok)(n()):(0,r.UG)(new Error("Chip ".concat(t," not in builtin registry")))}},7039:function(t,n,i){i.d(n,{PC:function(){return Z},aX:function(){return f},l0:function(){return d},sU:function(){return v}});var e=i(2951),r=i(1976),u=i(7169),a=i(3243),s=i(7597),o=i(7591),l=i(4337),c=i(4649),h=i(6329),v=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){var r;return(0,e.Z)(this,i),r=n.call(this,["in","load"],["out"],t),(0,c.Z)((0,u.Z)(r),"bit",h.yE),r}return(0,r.Z)(i,[{key:"tick",value:function(){this.in("load").voltage()===h.lj&&(this.bit=this.in().voltage())}},{key:"tock",value:function(){var t;this.out().pull(null!==(t=this.bit)&&void 0!==t?t:0)}},{key:"reset",value:function(){this.bit=h.yE,(0,a.Z)((0,s.Z)(i.prototype),"reset",this).call(this)}}]),i}(h.tI),f=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){var r;return(0,e.Z)(this,i),r=n.call(this,["in[16]","load"],["out[16]"],t),(0,c.Z)((0,u.Z)(r),"bits",0),r}return(0,r.Z)(i,[{key:"tick",value:function(){this.in("load").voltage()===h.lj&&(this.bits=65535&this.in().busVoltage)}},{key:"tock",value:function(){this.out().busVoltage=65535&this.bits}},{key:"get",value:function(t,n){return t===this.name?this.out():(0,a.Z)((0,s.Z)(i.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this.bits=0,(0,a.Z)((0,s.Z)(i.prototype),"reset",this).call(this)}}]),i}(h.tI),d=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(){return(0,e.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i)}(f),Z=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){var r;return(0,e.Z)(this,i),r=n.call(this,["in[16]","load","inc","reset"],["out[16]"],t),(0,c.Z)((0,u.Z)(r),"bits",0),r}return(0,r.Z)(i,[{key:"tick",value:function(){this.in("reset").voltage()===h.lj?this.bits=0:this.in("load").voltage()===h.lj?this.bits=65535&this.in().busVoltage:this.in("inc").voltage()===h.lj&&(this.bits+=1)}},{key:"tock",value:function(){this.out().busVoltage=65535&this.bits}},{key:"get",value:function(t,n){return t===this.name?this.out():(0,a.Z)((0,s.Z)(i.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this.bits=0,(0,a.Z)((0,s.Z)(i.prototype),"reset",this).call(this)}}]),i}(h.tI)},3116:function(t,n,i){i.d(n,{FH:function(){return d},HX:function(){return b},IH:function(){return g},OB:function(){return y},rS:function(){return p},xs:function(){return m}});var e=i(2951),r=i(1976),u=i(7169),a=i(3243),s=i(7597),o=i(7591),l=i(4337),c=i(4649),h=i(6329),v=i(5541),f=i(5838),d=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t,r){var a;return(0,e.Z)(this,i),a=n.call(this,["in[16]","load","address[".concat(t,"]")],["out[16]"],r),(0,c.Z)((0,u.Z)(a),"width",void 0),(0,c.Z)((0,u.Z)(a),"_memory",void 0),(0,c.Z)((0,u.Z)(a),"_nextData",0),(0,c.Z)((0,u.Z)(a),"_address",0),a.width=t,a._memory=new f.zp(Math.pow(2,a.width)),a}return(0,r.Z)(i,[{key:"memory",get:function(){return this._memory}},{key:"address",get:function(){return this._address}},{key:"tick",value:function(){var t=this.in("load").voltage();this._address=this.in("address").busVoltage,t&&(this._nextData=this.in().busVoltage,this._memory.set(this._address,this._nextData))}},{key:"tock",value:function(){var t,n;this.out().busVoltage=null!==(t=null===(n=this._memory)||void 0===n?void 0:n.get(this._address))&&void 0!==t?t:0}},{key:"eval",value:function(){var t,n,i=this.in("address").busVoltage;this.out().busVoltage=null!==(t=null===(n=this._memory)||void 0===n?void 0:n.get(i))&&void 0!==t?t:0}},{key:"at",value:function(t){var n=this;return(0,v.hu)(t<this._memory.size,(function(){return"Request out of bounds (".concat(t," >= ").concat(n._memory.size,")")})),new Z("".concat(this.name,"[").concat(t,"]"),t,this._memory)}},{key:"reset",value:function(){console.log("ram reset"),this._memory.reset(),(0,a.Z)((0,s.Z)(i.prototype),"reset",this).call(this)}}]),i}(h.tI),Z=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t,r,a){var s;return(0,e.Z)(this,i),s=n.call(this,t),(0,c.Z)((0,u.Z)(s),"index",void 0),(0,c.Z)((0,u.Z)(s),"ram",void 0),s.index=r,s.ram=a,s}return(0,r.Z)(i,[{key:"busVoltage",get:function(){return this.ram.get(this.index)},set:function(t){this.ram.set(this.index,t)}}]),i}(h.Gc),b=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){return(0,e.Z)(this,i),n.call(this,3,t)}return(0,r.Z)(i)}(d),g=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){return(0,e.Z)(this,i),n.call(this,6,t)}return(0,r.Z)(i)}(d),y=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){return(0,e.Z)(this,i),n.call(this,9,t)}return(0,r.Z)(i)}(d),p=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){return(0,e.Z)(this,i),n.call(this,12,t)}return(0,r.Z)(i)}(d),m=function(t){(0,o.Z)(i,t);var n=(0,l.Z)(i);function i(t){return(0,e.Z)(this,i),n.call(this,14,t)}return(0,r.Z)(i)}(d)},8090:function(t,n,i){i.d(n,{Gq:function(){return o}});var e=i(5640),r=i(1510),u='\nHdl <: Base{\n  Root := Chip\n  Chip = "CHIP" Name OpenBrace ChipBody CloseBrace\n  ChipBody = InList? OutList? PartList ClockedList?\n  InList = "IN" PinList Semi\n  OutList = "OUT" PinList Semi\n  PartList = BuiltinPart | Parts\n  PinList = List<PinDecl, Comma>\n  PinDecl = Name PinWidth?\n  PinWidth = OpenSquare decNumber CloseSquare\n  BuiltinPart = "BUILTIN" Semi\n  Parts = "PARTS:" Part*\n  Part = Name "(" Wires ")" Semi\n  Wires = List<Wire, Comma>\n  Wire = WireSide Equal (WireSide | True | False) \n  WireSide = Name SubBus? \n  SubBus = OpenSquare decNumber subBusRest? CloseSquare\n  subBusRest = ".." decNumber\n  ClockedList = "CLOCKED" SimplePinList Semi\n  SimplePinList = List<Name, Comma>\n}',a=e.Z.grammar(u,r.y1),s=a.extendSemantics(r.rJ);s.addAttribute("SubBus",{SubBus:function(t,n,i,e){var r,u,a,s=n.value;return{start:s,end:null!==(r=null===(u=i.child(0))||void 0===u||null===(a=u.child(1))||void 0===a?void 0:a.value)&&void 0!==r?r:s}}}),s.addAttribute("WireSide",{WireSide:function(t,n){var i,e,r=t.name,u=null!==(i=null===(e=n.child(0))||void 0===e?void 0:e.SubBus)&&void 0!==i?i:{start:void 0,end:void 0};return{pin:r,start:u.start,end:u.end}}}),s.addAttribute("Wire",{Wire:function(t,n,i){var e=i.isTerminal()?{pin:i.sourceString}:i.WireSide;return{lhs:t.WireSide,rhs:e}}}),s.addAttribute("Wires",{Wires:function(t){return t.asIteration().children.map((function(t){return t.Wire}))}}),s.addAttribute("Part",{Part:function(t,n,i,e,r){return{name:t.name,wires:i.Wires}}}),s.addAttribute("Parts",{Parts:function(t,n){return n.children.map((function(t){return t.Part}))},BuiltinPart:function(t,n){return"BUILTIN"}}),s.addAttribute("PartList",{PartList:function(t){return t.Parts}}),s.addAttribute("Clocked",{ClockedList:function(t,n,i){var e;return null!==(e=n.asIteration().children.map((function(t){return t.sourceString})))&&void 0!==e?e:[]}}),s.addAttribute("PinDecl",{PinDecl:function(t,n){var i,e,r;return{pin:t.name,width:null!==(i=null===(e=n.child(0))||void 0===e||null===(r=e.child(1))||void 0===r?void 0:r.value)&&void 0!==i?i:1}}}),s.addAttribute("PinList",{PinList:function(t){return t.asIteration().children.map((function(t){return t.PinDecl}))}}),s.addAttribute("Chip",{Chip:function(t,n,i,e,r){var u,a,s,o,l,c,h,v;return{name:n.name,ins:null!==(u=null===(a=e.child(0).child(0))||void 0===a||null===(s=a.child(1))||void 0===s?void 0:s.PinList)&&void 0!==u?u:[],outs:null!==(o=null===(l=e.child(1).child(0))||void 0===l||null===(c=l.child(1))||void 0===c?void 0:c.PinList)&&void 0!==o?o:[],parts:null!==(h=e.child(2).PartList)&&void 0!==h?h:[],clocked:null===(v=e.child(3).child(0))||void 0===v?void 0:v.Clocked}}}),s.addAttribute("Root",{Root:function(t){var n;return null===(n=t.child(0))||void 0===n?void 0:n.Chip}});var o={parser:a,grammar:u,semantics:s,parse:(0,r.Pz)(a,s,(function(t){return t.Chip}))}}}]);
//# sourceMappingURL=691.3debd93b.chunk.js.map